{
    "advisory_record": {
        "cve_id": "CVE-2018-1335",
        "description": "From Apache Tika versions 1.7 to 1.17, clients could send carefully crafted headers to tika-server that could be used to inject commands into the command line of the server running tika-server. This vulnerability only affects those running tika-server on a server that is open to untrusted clients. The mitigation is to upgrade to Tika 1.18.",
        "reserved_timestamp": 1512604800,
        "published_timestamp": 1524614400,
        "updated_timestamp": 1571331985,
        "repository_url": null,
        "references": {
            "": 48,
            "https://access.redhat.com/support/": 15,
            "https://access.redhat.com/downloads/": 12,
            "https://access.redhat.com/errata/": 9,
            "https://access.redhat.com/labs/": 9,
            "https://access.redhat.com/security/security-updates/#/cve": 7,
            "https://access.redhat.com/management/": 6,
            "https://access.redhat.com/": 6,
            "https://access.redhat.com/documentation": 6,
            "https://access.redhat.com/product-life-cycles/": 6,
            "https://access.redhat.com/security": 6,
            "https://access.redhat.com/security/security-updates/#/security-advisories": 6,
            "https://access.redhat.com/support/contact/": 6,
            "https://status.redhat.com": 6,
            "https://access.redhat.com/products/red-hat-enterprise-linux/": 5,
            "https://access.redhat.com/products/red-hat-openshift-container-platform": 5,
            "https://access.redhat.com/products/red-hat-ansible-automation-platform/": 5,
            "https://access.redhat.com/products/": 5,
            "https://access.redhat.com/errata/RHSA-2019:3140": 4,
            "https://access.redhat.com/downloads/content/package-browser": 3,
            "https://catalog.redhat.com/software/containers/explore/": 3,
            "https://access.redhat.com/articles/1202803": 3,
            "https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution": 3,
            "https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article": 3,
            "https://access.redhat.com/documentation/en/red_hat_enterprise_linux": 3,
            "https://access.redhat.com/documentation/en/openshift_container_platform": 3,
            "https://access.redhat.com/documentation/en/red_hat_ansible_automation_platform": 3,
            "https://access.redhat.com/documentation/": 3,
            "https://access.redhat.com/security/": 3,
            "https://access.redhat.com/security/vulnerabilities": 3,
            "https://access.redhat.com/security/data": 3,
            "https://access.redhat.com/security/security-updates/#/security-labs": 3,
            "https://access.redhat.com/security/updates/backporting/": 3,
            "https://access.redhat.com/support/cases/": 3,
            "https://access.redhat.com/support/cases/#/troubleshoot": 3,
            "https://access.redhat.com/community": 3,
            "https://access.redhat.com/community/": 3,
            "https://access.redhat.com/discussions/": 3,
            "https://access.redhat.com/announcements/": 3,
            "https://access.redhat.com/accelerators/": 3,
            "https://access.redhat.com/jbossnetwork/restricted/listSoftware.html": 3,
            "https://cloud.redhat.com/insights": 3,
            "https://access.redhat.com/changeLanguage?language=en": 3,
            "https://access.redhat.com/changeLanguage?language=ko": 3,
            "https://access.redhat.com/changeLanguage?language=ja": 3,
            "https://access.redhat.com/changeLanguage?language=zh_CN": 3,
            "https://redhat.com/en": 3,
            "https://twitter.com/RedHat": 3,
            "https://access.redhat.com/management": 3,
            "https://access.redhat.com/support": 3,
            "https://access.redhat.com/support/customer-service": 3,
            "https://access.redhat.com/articles/33844": 3,
            "https://access.redhat.com/help/login_assistance": 3,
            "https://www.redhat.com/en/trust": 3,
            "https://www.redhat.com/en/about/browser-support": 3,
            "https://www.redhat.com/en/about/digital-accessibility": 3,
            "https://access.redhat.com/recognition/": 3,
            "https://access.redhat.com/help/colophon/": 3,
            "https://www.redhat.com/": 3,
            "http://developers.redhat.com/": 3,
            "https://connect.redhat.com/": 3,
            "https://cloud.redhat.com/": 3,
            "https://access.redhat.com/subscription-value": 3,
            "https://www.redhat.com/about/": 3,
            "http://jobs.redhat.com": 3,
            "https://redhat.com/en/about/company": 3,
            "https://redhat.com/en/jobs": 3,
            "https://redhat.com/en/events": 3,
            "https://redhat.com/en/about/office-locations": 3,
            "https://redhat.com/en/contact": 3,
            "https://redhat.com/en/blog": 3,
            "https://redhat.com/en/about/our-culture/diversity-equity-inclusion": 3,
            "https://coolstuff.redhat.com/": 3,
            "https://www.redhat.com/en/summit": 3,
            "https://redhat.com/en/about/privacy-policy": 3,
            "https://redhat.com/en/about/terms-use": 3,
            "https://redhat.com/en/about/all-policies-guidelines": 3,
            "https://redhat.com/en/about/digital-accessibility": 3,
            "https://lists.apache.org/thread.html/b3ed4432380af767effd4c6f27665cc7b2686acccbefeb9f55851dca%40%3Cdev.tika.apache.org%3E": 2,
            "http://www.securityfocus.com/bid/104001": 2,
            "https://www.exploit-db.com/exploits/46540/": 2,
            "http://packetstormsecurity.com/files/153864/Apache-Tika-1.17-Header-Command-Injection.html": 2,
            "https://www.openwall.com/lists/oss-security/2018/04/25/8": 2,
            "https://lists.apache.org/thread.html/b3ed4432380af767effd4c6f27665cc7b2686acccbefeb9f55851dca@%3Cdev.tika.apache.org%3E": 2,
            "https://access.redhat.com/security/updates/classification/": 2,
            "https://access.redhat.com/security/cve/cve-2018-1335": 2,
            "https://access.redhat.com/changeLanguage?language=fr": 2,
            "https://access.redhat.com/products/red-hat-satellite/": 2,
            "https://access.redhat.com/products/red-hat-subscription-management/": 2,
            "https://access.redhat.com/products/red-hat-insights/": 2,
            "https://access.redhat.com/products/red-hat-openstack-platform/": 2,
            "https://access.redhat.com/products/red-hat-openshift-container-platform/": 2,
            "https://access.redhat.com/products/red-hat-openshift-ai/": 2,
            "https://access.redhat.com/products/openshift-dedicated-red-hat/": 2,
            "https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/": 2,
            "https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/": 2,
            "https://access.redhat.com/products/red-hat-quay/": 2,
            "https://access.redhat.com/products/red-hat-openshift-dev-spaces": 2,
            "https://access.redhat.com/products/red-hat-openshift-service-aws": 2,
            "https://access.redhat.com/products/red-hat-storage/": 2,
            "https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/": 2,
            "https://access.redhat.com/products/red-hat-ceph-storage/": 2,
            "https://access.redhat.com/products/red-hat-openshift-data-foundation": 2,
            "https://access.redhat.com/products/red-hat-runtimes/": 2,
            "https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/": 2,
            "https://access.redhat.com/products/red-hat-data-grid/": 2,
            "https://access.redhat.com/products/red-hat-jboss-web-server/": 2,
            "https://access.redhat.com/products/red-hat-build-of-keycloak/": 2,
            "https://access.redhat.com/products/spring-boot/": 2,
            "https://access.redhat.com/products/nodejs/": 2,
            "https://access.redhat.com/products/quarkus/": 2,
            "https://access.redhat.com/products/red-hat-application-foundations/": 2,
            "https://access.redhat.com/products/red-hat-fuse/": 2,
            "https://access.redhat.com/products/red-hat-amq/": 2,
            "https://access.redhat.com/products/red-hat-3scale/": 2,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1544620": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1548909": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1572416": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1666415": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1666418": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1666482": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1666484": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1666489": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1667188": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1671096": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1671097": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1677341": 1,
            "https://bugzilla.redhat.com/show_bug.cgi?id=1715197": 1,
            "https://www.redhat.com/security/data/cve/CVE-2016-5397.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-1335.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-8088.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-11307.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-11798.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-12022.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-12023.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-14718.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-14719.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-19360.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-19361.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2018-19362.html": 1,
            "https://www.redhat.com/security/data/cve/CVE-2019-0201.html": 1,
            "https://access.redhat.com/security/updates/classification/#important": 1,
            "https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?product=data.services.platform&downloadType=securityPatches&version=6.4": 1,
            "https://access.redhat.com/documentation/en-us/red_hat_jboss_data_virtualization/6.4/html/release_notes/": 1,
            "https://access.redhat.com/security/team/contact/": 1,
            "https://www.first.org/cvss/user-guide": 1,
            "https://access.redhat.com/security/cve/CVE-2019-9213": 1,
            "https://access.redhat.com/security/cve/CVE-2019-18634": 1,
            "https://access.redhat.com/security/cve/CVE-2020-11023": 1,
            "https://access.redhat.com/security/cve/CVE-2019-15031": 1,
            "https://access.redhat.com/security/cve/CVE-2018-1125": 1,
            "https://access.redhat.com/security/cve/CVE-2020-14060": 1,
            "https://nvd.nist.gov/vuln-metrics/cvss": 1,
            "https://access.redhat.com/site/security/team/contact/": 1
        },
        "affected_products": [
            "Tika",
            "Apache",
            "Apache Tika"
        ],
        "versions": {
            "status": "affected",
            "version": "1.7 to 1.17"
        },
        "files": [
            "tika-server"
        ],
        "keywords": [
            "command",
            "line",
            "tika",
            "inject",
            "client",
            "mitigation",
            "upgrade",
            "vulnerability",
            "apache",
            "affect",
            "server",
            "craft",
            "send",
            "header",
            "version"
        ],
        "files_extension": [],
        "has_fixing_commit": false
    },
    "commits": [
        {
            "commit_id": "066e60d5d6de8d51124c297410e7a4eca787d143",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516992822,
            "hunks": 1,
            "message": "TIKA-2551: No longer hardcode HtmlParser for XML files in tika-server.",
            "diff": [
                "diff --git a/tika-server/src/main/java/org/apache/tika/server/resource/TikaResource.java b/tika-server/src/main/java/org/apache/tika/server/resource/TikaResource.java",
                "index d019152e4..c80a02c2c 100644",
                "--- a/tika-server/src/main/java/org/apache/tika/server/resource/TikaResource.java",
                "+++ b/tika-server/src/main/java/org/apache/tika/server/resource/TikaResource.java",
                "@@ -109,6 +109,2 @@ public class TikaResource {",
                "-        Map<MediaType, Parser> parsers = ((AutoDetectParser)parser).getParsers();",
                "-        parsers.put(MediaType.APPLICATION_XML, new HtmlParser());",
                "-        ((AutoDetectParser)parser).setParsers(parsers);",
                "-",
                "         ((AutoDetectParser)parser).setFallback(new Parser() {"
            ],
            "changed_files": [
                "tika-server/src/main/java/org/apache/tika/server/resource/TikaResource.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2551": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "CHANGES_RELEVANT_FILES",
                    "message": "The commit changes some relevant files: tika-server/src/main/java/org/apache/tika/server/resource/TikaResource.java",
                    "relevance": 8
                },
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: server",
                    "relevance": 4
                },
                {
                    "id": "ADV_KEYWORDS_IN_FILES",
                    "message": "An advisory keyword is contained in the changed files: server",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2551",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "88b93c1e14538c543eeac3452cca2bffa28a29db",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512416693,
            "hunks": 5,
            "message": "TIKA-2516 upgrade to cxf 3.0.13",
            "diff": [
                "diff --git a/tika-langdetect/pom.xml b/tika-langdetect/pom.xml",
                "index 2dc1ed26d..7e32347b3 100644",
                "--- a/tika-langdetect/pom.xml",
                "+++ b/tika-langdetect/pom.xml",
                "@@ -36,6 +36,2 @@",
                "-  <properties>",
                "-    <cxf.version>3.0.12</cxf.version>",
                "-  </properties>",
                "-  ",
                "   <dependencies>",
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index cfbe17fc5..2229d3e6f 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -310,2 +310,3 @@",
                "     <commons.io.version>2.5</commons.io.version>",
                "+    <cxf.version>3.0.13</cxf.version>",
                "     <slf4j.version>1.7.24</slf4j.version>",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 6e8c29a4d..20fbb6e70 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -47,3 +47,2 @@",
                "     <netcdf-java.version>4.5.5</netcdf-java.version>",
                "-    <cxf.version>3.0.12</cxf.version>",
                "     <sis.version>0.6</sis.version>",
                "diff --git a/tika-server/pom.xml b/tika-server/pom.xml",
                "index ba0d70d1f..eb4e39714 100644",
                "--- a/tika-server/pom.xml",
                "+++ b/tika-server/pom.xml",
                "@@ -31,3 +31,2 @@",
                "   <properties>",
                "-    <cxf.version>3.0.12</cxf.version>",
                "   </properties>",
                "diff --git a/tika-translate/pom.xml b/tika-translate/pom.xml",
                "index c4e4a9ac2..3a6051098 100644",
                "--- a/tika-translate/pom.xml",
                "+++ b/tika-translate/pom.xml",
                "@@ -36,6 +36,2 @@",
                "-  <properties>",
                "-    <cxf.version>3.0.12</cxf.version>",
                "-  </properties>",
                "-",
                "   <dependencies>"
            ],
            "changed_files": [
                "tika-langdetect/pom.xml",
                "tika-parent/pom.xml",
                "tika-parsers/pom.xml",
                "tika-server/pom.xml",
                "tika-translate/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2516": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "CHANGES_RELEVANT_FILES",
                    "message": "The commit changes some relevant files: tika-server/pom.xml",
                    "relevance": 8
                },
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "ADV_KEYWORDS_IN_FILES",
                    "message": "An advisory keyword is contained in the changed files: server",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2516",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "c069ad5b83ee9690257aea8fbd6aa124583f4296",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512759523,
            "hunks": 18,
            "message": "[maven-release-plugin] prepare for next development iteration",
            "diff": [
                "diff --git a/pom.xml b/pom.xml",
                "index 158b271b7..11f349072 100644",
                "--- a/pom.xml",
                "+++ b/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-app/pom.xml b/tika-app/pom.xml",
                "index 3ba4c6f70..83b244a22 100644",
                "--- a/tika-app/pom.xml",
                "+++ b/tika-app/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-batch/pom.xml b/tika-batch/pom.xml",
                "index c568506fc..dd883e089 100644",
                "--- a/tika-batch/pom.xml",
                "+++ b/tika-batch/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index 80778d579..e5a77f681 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-core/pom.xml b/tika-core/pom.xml",
                "index 8e6f0b32d..82177cf5f 100644",
                "--- a/tika-core/pom.xml",
                "+++ b/tika-core/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-dl/pom.xml b/tika-dl/pom.xml",
                "index 4bc850e83..ee20ef595 100644",
                "--- a/tika-dl/pom.xml",
                "+++ b/tika-dl/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-eval/pom.xml b/tika-eval/pom.xml",
                "index 697fabfc8..5707712c8 100644",
                "--- a/tika-eval/pom.xml",
                "+++ b/tika-eval/pom.xml",
                "@@ -27,3 +27,3 @@",
                "         <artifactId>tika-parent</artifactId>",
                "-        <version>1.17</version>",
                "+        <version>1.18-SNAPSHOT</version>",
                "         <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-example/pom.xml b/tika-example/pom.xml",
                "index cbe933388..aa2c20870 100644",
                "--- a/tika-example/pom.xml",
                "+++ b/tika-example/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-java7/pom.xml b/tika-java7/pom.xml",
                "index 56a1188dd..827130120 100644",
                "--- a/tika-java7/pom.xml",
                "+++ b/tika-java7/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-langdetect/pom.xml b/tika-langdetect/pom.xml",
                "index f827e2271..2f919a150 100644",
                "--- a/tika-langdetect/pom.xml",
                "+++ b/tika-langdetect/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-nlp/pom.xml b/tika-nlp/pom.xml",
                "index 5ab619844..f0a605947 100644",
                "--- a/tika-nlp/pom.xml",
                "+++ b/tika-nlp/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index fb40fa4d8..e56ba1d04 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -33,3 +33,3 @@",
                "   <artifactId>tika-parent</artifactId>",
                "-  <version>1.17</version>",
                "+  <version>1.18-SNAPSHOT</version>",
                "   <packaging>pom</packaging>",
                "@@ -441,3 +441,3 @@",
                "     <url>https://github.com/apache/tika</url>",
                "-    <tag>1.17-rc1</tag>",
                "+    <tag>1.17</tag>",
                "   </scm>",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index cce6b7200..38794032d 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-serialization/pom.xml b/tika-serialization/pom.xml",
                "index 8de5bf617..277e9742b 100644",
                "--- a/tika-serialization/pom.xml",
                "+++ b/tika-serialization/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-server/pom.xml b/tika-server/pom.xml",
                "index 2257fb452..fdbd82f2d 100644",
                "--- a/tika-server/pom.xml",
                "+++ b/tika-server/pom.xml",
                "@@ -22,3 +22,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-translate/pom.xml b/tika-translate/pom.xml",
                "index b14a75295..4b4edcfd6 100644",
                "--- a/tika-translate/pom.xml",
                "+++ b/tika-translate/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-xmp/pom.xml b/tika-xmp/pom.xml",
                "index b02317f3f..e214fcdd9 100644",
                "--- a/tika-xmp/pom.xml",
                "+++ b/tika-xmp/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17</version>",
                "+    <version>1.18-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>"
            ],
            "changed_files": [
                "pom.xml",
                "tika-app/pom.xml",
                "tika-batch/pom.xml",
                "tika-bundle/pom.xml",
                "tika-core/pom.xml",
                "tika-dl/pom.xml",
                "tika-eval/pom.xml",
                "tika-example/pom.xml",
                "tika-java7/pom.xml",
                "tika-langdetect/pom.xml",
                "tika-nlp/pom.xml",
                "tika-parent/pom.xml",
                "tika-parsers/pom.xml",
                "tika-serialization/pom.xml",
                "tika-server/pom.xml",
                "tika-translate/pom.xml",
                "tika-xmp/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [
                [
                    "no-tag",
                    "6087955514973b6173bc3c1df5f057a6b52b0c98"
                ]
            ],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "CHANGES_RELEVANT_FILES",
                    "message": "The commit changes some relevant files: tika-server/pom.xml",
                    "relevance": 8
                },
                {
                    "id": "ADV_KEYWORDS_IN_FILES",
                    "message": "An advisory keyword is contained in the changed files: server",
                    "relevance": 4
                },
                {
                    "id": "COMMIT_HAS_TWINS",
                    "message": "This commit has one or more twins.",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "33f3855bf36a0d119f77e0dbb3ccf1b8af5d082d",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1513178025,
            "hunks": 17,
            "message": "2.0.0, here we come!",
            "diff": [
                "diff --git a/pom.xml b/pom.xml",
                "index 11f349072..d4a98240a 100644",
                "--- a/pom.xml",
                "+++ b/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-app/pom.xml b/tika-app/pom.xml",
                "index 83b244a22..f262e400b 100644",
                "--- a/tika-app/pom.xml",
                "+++ b/tika-app/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-batch/pom.xml b/tika-batch/pom.xml",
                "index dd883e089..78f85f687 100644",
                "--- a/tika-batch/pom.xml",
                "+++ b/tika-batch/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index e5a77f681..2b075cace 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-core/pom.xml b/tika-core/pom.xml",
                "index 82177cf5f..d3e4f4ab9 100644",
                "--- a/tika-core/pom.xml",
                "+++ b/tika-core/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-dl/pom.xml b/tika-dl/pom.xml",
                "index ee20ef595..9e61ca0ea 100644",
                "--- a/tika-dl/pom.xml",
                "+++ b/tika-dl/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-eval/pom.xml b/tika-eval/pom.xml",
                "index 5707712c8..39377dbf4 100644",
                "--- a/tika-eval/pom.xml",
                "+++ b/tika-eval/pom.xml",
                "@@ -27,3 +27,3 @@",
                "         <artifactId>tika-parent</artifactId>",
                "-        <version>1.18-SNAPSHOT</version>",
                "+        <version>2.0.0-SNAPSHOT</version>",
                "         <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-example/pom.xml b/tika-example/pom.xml",
                "index aa2c20870..ce57a4c47 100644",
                "--- a/tika-example/pom.xml",
                "+++ b/tika-example/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-java7/pom.xml b/tika-java7/pom.xml",
                "index 827130120..d5d8716f1 100644",
                "--- a/tika-java7/pom.xml",
                "+++ b/tika-java7/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-langdetect/pom.xml b/tika-langdetect/pom.xml",
                "index 2f919a150..fce981e6b 100644",
                "--- a/tika-langdetect/pom.xml",
                "+++ b/tika-langdetect/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-nlp/pom.xml b/tika-nlp/pom.xml",
                "index f0a605947..e8552cec8 100644",
                "--- a/tika-nlp/pom.xml",
                "+++ b/tika-nlp/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index e56ba1d04..6cba9b50c 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -33,3 +33,3 @@",
                "   <artifactId>tika-parent</artifactId>",
                "-  <version>1.18-SNAPSHOT</version>",
                "+  <version>2.0.0-SNAPSHOT</version>",
                "   <packaging>pom</packaging>",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 38794032d..c2f0a5a03 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-serialization/pom.xml b/tika-serialization/pom.xml",
                "index 277e9742b..115ae6bb7 100644",
                "--- a/tika-serialization/pom.xml",
                "+++ b/tika-serialization/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-server/pom.xml b/tika-server/pom.xml",
                "index fdbd82f2d..985387951 100644",
                "--- a/tika-server/pom.xml",
                "+++ b/tika-server/pom.xml",
                "@@ -22,3 +22,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-translate/pom.xml b/tika-translate/pom.xml",
                "index 4b4edcfd6..21e162569 100644",
                "--- a/tika-translate/pom.xml",
                "+++ b/tika-translate/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-xmp/pom.xml b/tika-xmp/pom.xml",
                "index e214fcdd9..12f53201c 100644",
                "--- a/tika-xmp/pom.xml",
                "+++ b/tika-xmp/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>2.0.0-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>"
            ],
            "changed_files": [
                "pom.xml",
                "tika-app/pom.xml",
                "tika-batch/pom.xml",
                "tika-bundle/pom.xml",
                "tika-core/pom.xml",
                "tika-dl/pom.xml",
                "tika-eval/pom.xml",
                "tika-example/pom.xml",
                "tika-java7/pom.xml",
                "tika-langdetect/pom.xml",
                "tika-nlp/pom.xml",
                "tika-parent/pom.xml",
                "tika-parsers/pom.xml",
                "tika-serialization/pom.xml",
                "tika-server/pom.xml",
                "tika-translate/pom.xml",
                "tika-xmp/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "CHANGES_RELEVANT_FILES",
                    "message": "The commit changes some relevant files: tika-server/pom.xml",
                    "relevance": 8
                },
                {
                    "id": "ADV_KEYWORDS_IN_FILES",
                    "message": "An advisory keyword is contained in the changed files: server",
                    "relevance": 4
                }
            ]
        },
        {
            "commit_id": "94777e32b1c536a6f8e3e2a97813dfa46cd75ef9",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512759500,
            "hunks": 18,
            "message": "[maven-release-plugin] prepare release 1.17-rc1",
            "diff": [
                "diff --git a/pom.xml b/pom.xml",
                "index 70ffef4f5..158b271b7 100644",
                "--- a/pom.xml",
                "+++ b/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-app/pom.xml b/tika-app/pom.xml",
                "index 7e2722517..3ba4c6f70 100644",
                "--- a/tika-app/pom.xml",
                "+++ b/tika-app/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-batch/pom.xml b/tika-batch/pom.xml",
                "index 68713c4e8..c568506fc 100644",
                "--- a/tika-batch/pom.xml",
                "+++ b/tika-batch/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index dd0b12e9e..80778d579 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-core/pom.xml b/tika-core/pom.xml",
                "index cccdc08ae..8e6f0b32d 100644",
                "--- a/tika-core/pom.xml",
                "+++ b/tika-core/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-dl/pom.xml b/tika-dl/pom.xml",
                "index 7e3879c9b..4bc850e83 100644",
                "--- a/tika-dl/pom.xml",
                "+++ b/tika-dl/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-eval/pom.xml b/tika-eval/pom.xml",
                "index 2f72371b6..697fabfc8 100644",
                "--- a/tika-eval/pom.xml",
                "+++ b/tika-eval/pom.xml",
                "@@ -27,3 +27,3 @@",
                "         <artifactId>tika-parent</artifactId>",
                "-        <version>1.17-SNAPSHOT</version>",
                "+        <version>1.17</version>",
                "         <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-example/pom.xml b/tika-example/pom.xml",
                "index 45cf31847..cbe933388 100644",
                "--- a/tika-example/pom.xml",
                "+++ b/tika-example/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-java7/pom.xml b/tika-java7/pom.xml",
                "index cc236169b..56a1188dd 100644",
                "--- a/tika-java7/pom.xml",
                "+++ b/tika-java7/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-langdetect/pom.xml b/tika-langdetect/pom.xml",
                "index 7e32347b3..f827e2271 100644",
                "--- a/tika-langdetect/pom.xml",
                "+++ b/tika-langdetect/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-nlp/pom.xml b/tika-nlp/pom.xml",
                "index 032107dd4..5ab619844 100644",
                "--- a/tika-nlp/pom.xml",
                "+++ b/tika-nlp/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index 0be183516..fb40fa4d8 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -33,3 +33,3 @@",
                "   <artifactId>tika-parent</artifactId>",
                "-  <version>1.17-SNAPSHOT</version>",
                "+  <version>1.17</version>",
                "   <packaging>pom</packaging>",
                "@@ -441,3 +441,3 @@",
                "     <url>https://github.com/apache/tika</url>",
                "-    <tag>1.17</tag>",
                "+    <tag>1.17-rc1</tag>",
                "   </scm>",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index f30de1ca8..cce6b7200 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-serialization/pom.xml b/tika-serialization/pom.xml",
                "index 2fd1a71bf..8de5bf617 100644",
                "--- a/tika-serialization/pom.xml",
                "+++ b/tika-serialization/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-server/pom.xml b/tika-server/pom.xml",
                "index eb4e39714..2257fb452 100644",
                "--- a/tika-server/pom.xml",
                "+++ b/tika-server/pom.xml",
                "@@ -22,3 +22,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-translate/pom.xml b/tika-translate/pom.xml",
                "index 3a6051098..b14a75295 100644",
                "--- a/tika-translate/pom.xml",
                "+++ b/tika-translate/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-xmp/pom.xml b/tika-xmp/pom.xml",
                "index bee0479fc..b02317f3f 100644",
                "--- a/tika-xmp/pom.xml",
                "+++ b/tika-xmp/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>"
            ],
            "changed_files": [
                "pom.xml",
                "tika-app/pom.xml",
                "tika-batch/pom.xml",
                "tika-bundle/pom.xml",
                "tika-core/pom.xml",
                "tika-dl/pom.xml",
                "tika-eval/pom.xml",
                "tika-example/pom.xml",
                "tika-java7/pom.xml",
                "tika-langdetect/pom.xml",
                "tika-nlp/pom.xml",
                "tika-parent/pom.xml",
                "tika-parsers/pom.xml",
                "tika-serialization/pom.xml",
                "tika-server/pom.xml",
                "tika-translate/pom.xml",
                "tika-xmp/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "CHANGES_RELEVANT_FILES",
                    "message": "The commit changes some relevant files: tika-server/pom.xml",
                    "relevance": 8
                },
                {
                    "id": "ADV_KEYWORDS_IN_FILES",
                    "message": "An advisory keyword is contained in the changed files: server",
                    "relevance": 4
                }
            ]
        },
        {
            "commit_id": "6f33bae5c9cc35bab7eccc7017850803e6dc252b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512774554,
            "hunks": 17,
            "message": "roll back to start rc2",
            "diff": [
                "diff --git a/pom.xml b/pom.xml",
                "index 11f349072..70ffef4f5 100644",
                "--- a/pom.xml",
                "+++ b/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-app/pom.xml b/tika-app/pom.xml",
                "index 83b244a22..7e2722517 100644",
                "--- a/tika-app/pom.xml",
                "+++ b/tika-app/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-batch/pom.xml b/tika-batch/pom.xml",
                "index dd883e089..68713c4e8 100644",
                "--- a/tika-batch/pom.xml",
                "+++ b/tika-batch/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index e5a77f681..dd0b12e9e 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-core/pom.xml b/tika-core/pom.xml",
                "index 82177cf5f..cccdc08ae 100644",
                "--- a/tika-core/pom.xml",
                "+++ b/tika-core/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-dl/pom.xml b/tika-dl/pom.xml",
                "index ee20ef595..7e3879c9b 100644",
                "--- a/tika-dl/pom.xml",
                "+++ b/tika-dl/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-eval/pom.xml b/tika-eval/pom.xml",
                "index 5707712c8..2f72371b6 100644",
                "--- a/tika-eval/pom.xml",
                "+++ b/tika-eval/pom.xml",
                "@@ -27,3 +27,3 @@",
                "         <artifactId>tika-parent</artifactId>",
                "-        <version>1.18-SNAPSHOT</version>",
                "+        <version>1.17-SNAPSHOT</version>",
                "         <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-example/pom.xml b/tika-example/pom.xml",
                "index aa2c20870..45cf31847 100644",
                "--- a/tika-example/pom.xml",
                "+++ b/tika-example/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-java7/pom.xml b/tika-java7/pom.xml",
                "index 827130120..cc236169b 100644",
                "--- a/tika-java7/pom.xml",
                "+++ b/tika-java7/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-langdetect/pom.xml b/tika-langdetect/pom.xml",
                "index 2f919a150..7e32347b3 100644",
                "--- a/tika-langdetect/pom.xml",
                "+++ b/tika-langdetect/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-nlp/pom.xml b/tika-nlp/pom.xml",
                "index f0a605947..032107dd4 100644",
                "--- a/tika-nlp/pom.xml",
                "+++ b/tika-nlp/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index e56ba1d04..0be183516 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -33,3 +33,3 @@",
                "   <artifactId>tika-parent</artifactId>",
                "-  <version>1.18-SNAPSHOT</version>",
                "+  <version>1.17-SNAPSHOT</version>",
                "   <packaging>pom</packaging>",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 38794032d..f30de1ca8 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-serialization/pom.xml b/tika-serialization/pom.xml",
                "index 277e9742b..2fd1a71bf 100644",
                "--- a/tika-serialization/pom.xml",
                "+++ b/tika-serialization/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-server/pom.xml b/tika-server/pom.xml",
                "index fdbd82f2d..eb4e39714 100644",
                "--- a/tika-server/pom.xml",
                "+++ b/tika-server/pom.xml",
                "@@ -22,3 +22,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-translate/pom.xml b/tika-translate/pom.xml",
                "index 4b4edcfd6..3a6051098 100644",
                "--- a/tika-translate/pom.xml",
                "+++ b/tika-translate/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-xmp/pom.xml b/tika-xmp/pom.xml",
                "index e214fcdd9..bee0479fc 100644",
                "--- a/tika-xmp/pom.xml",
                "+++ b/tika-xmp/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.18-SNAPSHOT</version>",
                "+    <version>1.17-SNAPSHOT</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>"
            ],
            "changed_files": [
                "pom.xml",
                "tika-app/pom.xml",
                "tika-batch/pom.xml",
                "tika-bundle/pom.xml",
                "tika-core/pom.xml",
                "tika-dl/pom.xml",
                "tika-eval/pom.xml",
                "tika-example/pom.xml",
                "tika-java7/pom.xml",
                "tika-langdetect/pom.xml",
                "tika-nlp/pom.xml",
                "tika-parent/pom.xml",
                "tika-parsers/pom.xml",
                "tika-serialization/pom.xml",
                "tika-server/pom.xml",
                "tika-translate/pom.xml",
                "tika-xmp/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "CHANGES_RELEVANT_FILES",
                    "message": "The commit changes some relevant files: tika-server/pom.xml",
                    "relevance": 8
                },
                {
                    "id": "ADV_KEYWORDS_IN_FILES",
                    "message": "An advisory keyword is contained in the changed files: server",
                    "relevance": 4
                }
            ]
        },
        {
            "commit_id": "b054df2be2f43c4944ff66f7d9fd2ceb1655d9c0",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512775802,
            "hunks": 18,
            "message": "[maven-release-plugin] prepare release 1.17-rc2",
            "diff": [
                "diff --git a/pom.xml b/pom.xml",
                "index 70ffef4f5..158b271b7 100644",
                "--- a/pom.xml",
                "+++ b/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-app/pom.xml b/tika-app/pom.xml",
                "index 7e2722517..3ba4c6f70 100644",
                "--- a/tika-app/pom.xml",
                "+++ b/tika-app/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-batch/pom.xml b/tika-batch/pom.xml",
                "index 68713c4e8..c568506fc 100644",
                "--- a/tika-batch/pom.xml",
                "+++ b/tika-batch/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index dd0b12e9e..80778d579 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-core/pom.xml b/tika-core/pom.xml",
                "index cccdc08ae..8e6f0b32d 100644",
                "--- a/tika-core/pom.xml",
                "+++ b/tika-core/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-dl/pom.xml b/tika-dl/pom.xml",
                "index 7e3879c9b..4bc850e83 100644",
                "--- a/tika-dl/pom.xml",
                "+++ b/tika-dl/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-eval/pom.xml b/tika-eval/pom.xml",
                "index 2f72371b6..697fabfc8 100644",
                "--- a/tika-eval/pom.xml",
                "+++ b/tika-eval/pom.xml",
                "@@ -27,3 +27,3 @@",
                "         <artifactId>tika-parent</artifactId>",
                "-        <version>1.17-SNAPSHOT</version>",
                "+        <version>1.17</version>",
                "         <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-example/pom.xml b/tika-example/pom.xml",
                "index 45cf31847..cbe933388 100644",
                "--- a/tika-example/pom.xml",
                "+++ b/tika-example/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-java7/pom.xml b/tika-java7/pom.xml",
                "index cc236169b..56a1188dd 100644",
                "--- a/tika-java7/pom.xml",
                "+++ b/tika-java7/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-langdetect/pom.xml b/tika-langdetect/pom.xml",
                "index 7e32347b3..f827e2271 100644",
                "--- a/tika-langdetect/pom.xml",
                "+++ b/tika-langdetect/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-nlp/pom.xml b/tika-nlp/pom.xml",
                "index 032107dd4..5ab619844 100644",
                "--- a/tika-nlp/pom.xml",
                "+++ b/tika-nlp/pom.xml",
                "@@ -26,3 +26,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index 0be183516..965a34f9e 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -33,3 +33,3 @@",
                "   <artifactId>tika-parent</artifactId>",
                "-  <version>1.17-SNAPSHOT</version>",
                "+  <version>1.17</version>",
                "   <packaging>pom</packaging>",
                "@@ -441,3 +441,3 @@",
                "     <url>https://github.com/apache/tika</url>",
                "-    <tag>1.17</tag>",
                "+    <tag>1.17-rc2</tag>",
                "   </scm>",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index f30de1ca8..cce6b7200 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-serialization/pom.xml b/tika-serialization/pom.xml",
                "index 2fd1a71bf..8de5bf617 100644",
                "--- a/tika-serialization/pom.xml",
                "+++ b/tika-serialization/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-server/pom.xml b/tika-server/pom.xml",
                "index eb4e39714..2257fb452 100644",
                "--- a/tika-server/pom.xml",
                "+++ b/tika-server/pom.xml",
                "@@ -22,3 +22,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-translate/pom.xml b/tika-translate/pom.xml",
                "index 3a6051098..b14a75295 100644",
                "--- a/tika-translate/pom.xml",
                "+++ b/tika-translate/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>",
                "diff --git a/tika-xmp/pom.xml b/tika-xmp/pom.xml",
                "index bee0479fc..b02317f3f 100644",
                "--- a/tika-xmp/pom.xml",
                "+++ b/tika-xmp/pom.xml",
                "@@ -27,3 +27,3 @@",
                "     <artifactId>tika-parent</artifactId>",
                "-    <version>1.17-SNAPSHOT</version>",
                "+    <version>1.17</version>",
                "     <relativePath>../tika-parent/pom.xml</relativePath>"
            ],
            "changed_files": [
                "pom.xml",
                "tika-app/pom.xml",
                "tika-batch/pom.xml",
                "tika-bundle/pom.xml",
                "tika-core/pom.xml",
                "tika-dl/pom.xml",
                "tika-eval/pom.xml",
                "tika-example/pom.xml",
                "tika-java7/pom.xml",
                "tika-langdetect/pom.xml",
                "tika-nlp/pom.xml",
                "tika-parent/pom.xml",
                "tika-parsers/pom.xml",
                "tika-serialization/pom.xml",
                "tika-server/pom.xml",
                "tika-translate/pom.xml",
                "tika-xmp/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "CHANGES_RELEVANT_FILES",
                    "message": "The commit changes some relevant files: tika-server/pom.xml",
                    "relevance": 8
                },
                {
                    "id": "ADV_KEYWORDS_IN_FILES",
                    "message": "An advisory keyword is contained in the changed files: server",
                    "relevance": 4
                }
            ]
        },
        {
            "commit_id": "32cbe382e7744de5ce32b812f2546f2d5625510b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1517577464,
            "hunks": 3,
            "message": "TIKA-2561 upgrade jsoup to avoid potential xss vuln in grib",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 14f46b431..cae337c05 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -408,5 +408,15 @@",
                "         </exclusion>",
                "+        <exclusion>",
                "+          <groupId>org.jsoup</groupId>",
                "+          <artifactId>jsoup</artifactId>",
                "+        </exclusion>",
                "       </exclusions>",
                "     </dependency>",
                "+    <!-- grib's current jsoup is vulnerable to xss",
                "+         exclude and import a more modern version TIKA-2561-->",
                "     <dependency>",
                "+      <groupId>org.jsoup</groupId>",
                "+      <artifactId>jsoup</artifactId>",
                "+      <version>1.11.2</version>",
                "+    </dependency>    <dependency>",
                "       <groupId>edu.ucar</groupId>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2561": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "tika-1.28.2-rc1"
            ],
            "matched_rules": [
                {
                    "id": "SEC_KEYWORDS_IN_MESSAGE",
                    "message": "The commit message contains some security-related keywords: xss, vuln",
                    "relevance": 4
                },
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2561",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "c80241952fa2f515687c6479768d24d7e907653c",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1517577000,
            "hunks": 2,
            "message": "TIKA-2561 -- update jsoup version in grib parser to avoid xss vuln",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 5d85b70db..85e9cd26a 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -408,4 +408,15 @@",
                "         </exclusion>",
                "+        <exclusion>",
                "+          <groupId>org.jsoup</groupId>",
                "+          <artifactId>jsoup</artifactId>",
                "+        </exclusion>",
                "       </exclusions>",
                "     </dependency>",
                "+    <!-- grib's current jsoup is vulnerable to xss",
                "+         exclude and import a more modern version TIKA-2561-->",
                "+    <dependency>",
                "+      <groupId>org.jsoup</groupId>",
                "+      <artifactId>jsoup</artifactId>",
                "+      <version>1.11.2</version>",
                "+    </dependency>",
                "     <dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2561": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "SEC_KEYWORDS_IN_MESSAGE",
                    "message": "The commit message contains some security-related keywords: xss, vuln",
                    "relevance": 4
                },
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: version",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2561",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "7d83b86c9d3e7a749c0dd2adb52325c35fb99c51",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510676787,
            "hunks": 1,
            "message": "TIKA-2504 exclude dependency on old vfs2 to remove vulnerability from plexus-utils",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index a155e1f24..1b5a4eeff 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -286,2 +286,7 @@",
                "         </exclusion>",
                "+        <!-- TIKA-2504 exclude to avoid vulnerability in plexus-utils -->",
                "+        <exclusion>",
                "+          <groupId>org.apache.commons</groupId>",
                "+          <artifactId>commons-vfs2</artifactId>",
                "+        </exclusion>",
                "       </exclusions>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2504": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "SEC_KEYWORDS_IN_MESSAGE",
                    "message": "The commit message contains some security-related keywords: vulnerability",
                    "relevance": 4
                },
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: vulnerability",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2504",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "18deefa3132c58f3ab485fb4a54d1f7adee1cfdd",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510591862,
            "hunks": 2,
            "message": "Upgrade to Jackson 2.9.2 (TIKA-2501).",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index c0c2b6c8d..7a188bb2a 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -541,3 +541,3 @@",
                "       <artifactId>jackson-core</artifactId>",
                "-      <version>2.8.1</version>",
                "+      <version>2.9.2</version>",
                "     </dependency>",
                "diff --git a/tika-translate/pom.xml b/tika-translate/pom.xml",
                "index d4a2e1cf2..c4e4a9ac2 100644",
                "--- a/tika-translate/pom.xml",
                "+++ b/tika-translate/pom.xml",
                "@@ -65,3 +65,3 @@",
                "       <artifactId>jackson-jaxrs-json-provider</artifactId>",
                "-      <version>2.8.1</version>",
                "+      <version>2.9.2</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml",
                "tika-translate/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2501": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2501",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "780ab0c71b7bce24a3c2bb96b995964395fffece",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510595339,
            "hunks": 1,
            "message": "* Upgrade to OpenNLP 1.8.3 (TIKA-2502).",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 7a188bb2a..45d34a54b 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -313,3 +313,3 @@",
                "       <artifactId>opennlp-tools</artifactId>",
                "-      <version>1.6.0</version>",
                "+      <version>1.8.3</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2502": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2502",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "ff5d065f902e66944f1b91a950c0ba288aa615e9",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510675066,
            "hunks": 1,
            "message": "TIKA-2034 upgrade xmpcore",
            "diff": [
                "diff --git a/tika-xmp/pom.xml b/tika-xmp/pom.xml",
                "index 8447783bf..bee0479fc 100644",
                "--- a/tika-xmp/pom.xml",
                "+++ b/tika-xmp/pom.xml",
                "@@ -86,3 +86,3 @@",
                "       <artifactId>xmpcore</artifactId>",
                "-      <version>5.1.2</version>",
                "+      <version>5.1.3</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-xmp/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2034": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2034",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "d64a32c63f376b9e003a4512adfec05414d4dfe6",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1493393359,
            "hunks": 16,
            "message": "Fix for TIKA-2347 Adds underline extraction from word documents Extracts underline for both doc and docx and assigns tag <u>. Given lowest nesting among style tags. Adds tests using testWORD_various.doc and testWord_various.docx Updates affected output in other WordParserTests.",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/WordExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/WordExtractor.java",
                "index 569c88172..4a80420a8 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/WordExtractor.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/WordExtractor.java",
                "@@ -85,2 +85,3 @@ public class WordExtractor extends AbstractPOIFSExtractor {",
                "     private boolean curItalic;",
                "+    private boolean curUnderline;",
                "@@ -376,16 +377,4 @@ public class WordExtractor extends AbstractPOIFSExtractor {",
                "-        // Close any still open style tags",
                "-        if (curStrikeThrough) {",
                "-            xhtml.endElement(\"s\");",
                "-            curStrikeThrough = false;",
                "-        }",
                "-        if (curItalic) {",
                "-            xhtml.endElement(\"i\");",
                "-            curItalic = false;",
                "-        }",
                "-        if (curBold) {",
                "-            xhtml.endElement(\"b\");",
                "-            curBold = false;",
                "-        }",
                "-",
                "+        closeStyleElements(false, xhtml);",
                "+        ",
                "         xhtml.endElement(tas.getTag());",
                "@@ -403,3 +392,7 @@ public class WordExtractor extends AbstractPOIFSExtractor {",
                "             if (cr.isBold() != curBold) {",
                "-                // Enforce nesting -- must close s and i tags",
                "+                // Enforce nesting -- must close u, s and i tags",
                "+                if (curUnderline) {",
                "+                    xhtml.endElement(\"u\");",
                "+                    curUnderline = false;",
                "+                }",
                "                 if (curStrikeThrough) {",
                "@@ -421,3 +414,7 @@ public class WordExtractor extends AbstractPOIFSExtractor {",
                "             if (cr.isItalic() != curItalic) {",
                "-                // Enforce nesting -- must close s tag",
                "+                // Enforce nesting -- must close u and s tag",
                "+            \tif (curUnderline) {",
                "+            \t\txhtml.endElement(\"u\");",
                "+            \t\tcurUnderline = false;",
                "+            \t}",
                "                 if (curStrikeThrough) {",
                "@@ -435,2 +432,7 @@ public class WordExtractor extends AbstractPOIFSExtractor {",
                "             if (cr.isStrikeThrough() != curStrikeThrough) {",
                "+                // Enforce nesting -- must close u tag",
                "+                if (curUnderline) {",
                "+                    xhtml.endElement(\"u\");",
                "+                    curUnderline = false;",
                "+                }",
                "                 if (cr.isStrikeThrough()) {",
                "@@ -442,2 +444,12 @@ public class WordExtractor extends AbstractPOIFSExtractor {",
                "             }",
                "+            ",
                "+            boolean isUnderline = cr.getUnderlineCode() != 0;",
                "+            if (isUnderline != curUnderline) {",
                "+                if (isUnderline) {",
                "+                    xhtml.startElement(\"u\");",
                "+                } else {",
                "+                    xhtml.endElement(\"u\");",
                "+                }",
                "+                curUnderline = isUnderline;",
                "+            }",
                "         }",
                "@@ -552,2 +564,6 @@ public class WordExtractor extends AbstractPOIFSExtractor {",
                "         }",
                "+        if (curUnderline) {",
                "+        \txhtml.endElement(\"u\");",
                "+        \tcurUnderline = false;",
                "+        }",
                "         if (curStrikeThrough) {",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java",
                "index 55a38fd08..3c700a732 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java",
                "@@ -37,2 +37,3 @@ import org.apache.poi.xwpf.usermodel.IRunElement;",
                " import org.apache.poi.xwpf.usermodel.ISDTContent;",
                "+import org.apache.poi.xwpf.usermodel.UnderlinePatterns;",
                " import org.apache.poi.xwpf.usermodel.XWPFDocument;",
                "@@ -264,3 +265,3 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "-        TmpFormatting fmtg = new TmpFormatting(false, false);",
                "+        TmpFormatting fmtg = new TmpFormatting(false, false, false);",
                "@@ -368,2 +369,6 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         }",
                "+        if (fmtg.isUnderline()) {",
                "+        \txhtml.endElement(\"u\");",
                "+        \tfmtg.setUnderline(false);",
                "+        }",
                "         return fmtg;",
                "@@ -376,2 +381,6 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         if (run.isBold() != tfmtg.isBold()) {",
                "+            if (tfmtg.isUnderline()) {",
                "+                xhtml.endElement(\"u\");",
                "+                tfmtg.setUnderline(false);",
                "+            }",
                "             if (tfmtg.isItalic()) {",
                "@@ -389,2 +398,6 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         if (run.isItalic() != tfmtg.isItalic()) {",
                "+            if (tfmtg.isUnderline()) {",
                "+                xhtml.endElement(\"u\");",
                "+                tfmtg.setUnderline(false);",
                "+            }",
                "             if (run.isItalic()) {",
                "@@ -396,2 +409,12 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         }",
                "+        ",
                "+        boolean isUnderline = run.getUnderline() != UnderlinePatterns.NONE;",
                "+        if (isUnderline != tfmtg.isUnderline()) {",
                "+            if (isUnderline) {",
                "+                xhtml.startElement(\"u\");",
                "+            } else {",
                "+                xhtml.endElement(\"u\");",
                "+            }",
                "+            tfmtg.setUnderline(isUnderline);",
                "+        }",
                "@@ -528,6 +551,8 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         private boolean italic = false;",
                "+        private boolean underline = false;",
                "-        private TmpFormatting(boolean bold, boolean italic) {",
                "+        private TmpFormatting(boolean bold, boolean italic, boolean underline) {",
                "             this.bold = bold;",
                "             this.italic = italic;",
                "+            this.underline = underline;",
                "         }",
                "@@ -549,2 +574,11 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         }",
                "+        ",
                "+",
                "+        public boolean isUnderline() {",
                "+            return underline;",
                "+        }",
                "+",
                "+        public void setUnderline(boolean underline) {",
                "+            this.underline = underline;",
                "+        }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/WordExtractor.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2347": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: line, affect",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2347",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "1b48d73e41f6041c31ff396194ee37b5afceebae",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510598366,
            "hunks": 1,
            "message": "TIKA-2486 upgrade metadata-extractor to avoid CVE in xmp-core to 2.10.1",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index e8899c387..81f89778d 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -233,3 +233,3 @@",
                "       <artifactId>metadata-extractor</artifactId>",
                "-      <version>2.9.1</version>",
                "+      <version>2.10.1</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2486": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2486",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "700b38acb6443c30b4b05312a2010826fc618477",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1513872429,
            "hunks": 2,
            "message": "TIKA-1141 Few more well-known JS library headers",
            "diff": [
                "diff --git a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "index 88b9000e0..4bbaff168 100644",
                "--- a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "+++ b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "@@ -327,4 +327,9 @@",
                "       <match value=\"/*  Prototype JavaScript \" type=\"string\" offset=\"0\"/>",
                "-      <match value=\"var Prototype={ \" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"var Prototype={\" type=\"string\" offset=\"0\"/>",
                "       <match value=\"function $w(t){\" type=\"string\" offset=\"0\"/>",
                "+      <!-- React -->",
                "+      <match value=\"/** @license React\" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"/**\" type=\"string\" offset=\"0\">",
                "+         <match value=\"* React \" offset=\"4:8\"/>",
                "+      </match>",
                "     </magic>"
            ],
            "changed_files": [
                "tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1141": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: header",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1141",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "ef3fc7bd4de8856038bf31eb0a3dddb343f52d28",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511875061,
            "hunks": 25,
            "message": "TIKA-2512 add underline/strikethrough extraction for docx and pptx in SAX-based parsers",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java",
                "index ef3b3dc0e..95cbc5b34 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java",
                "@@ -23,2 +23,3 @@ import java.util.Date;",
                "+import org.apache.poi.xwpf.usermodel.UnderlinePatterns;",
                " import org.apache.tika.parser.microsoft.OfficeParserConfig;",
                "@@ -47,2 +48,4 @@ public class OOXMLTikaBodyPartHandler implements OOXMLWordAndPowerPointTextHandl",
                "     private boolean isBold = false;",
                "+    private boolean isUnderline = false;",
                "+    private boolean isStrikeThrough = false;",
                "     private boolean wroteHyperlinkStart = false;",
                "@@ -80,4 +83,13 @@ public class OOXMLTikaBodyPartHandler implements OOXMLWordAndPowerPointTextHandl",
                "         try {",
                "+",
                "             // True if we are currently in the named style tag:",
                "-            if (runProperties.getBold() != isBold) {",
                "+            if (runProperties.isBold() != isBold) {",
                "+                if (isStrikeThrough) {",
                "+                    xhtml.endElement(\"strike\");",
                "+                    isStrikeThrough = false;",
                "+                }",
                "+                if (isUnderline) {",
                "+                    xhtml.endElement(\"u\");",
                "+                    isUnderline = false;;",
                "+                }",
                "                 if (isItalics) {",
                "@@ -86,19 +98,48 @@ public class OOXMLTikaBodyPartHandler implements OOXMLWordAndPowerPointTextHandl",
                "                 }",
                "-                if (runProperties.getBold()) {",
                "+                if (runProperties.isBold()) {",
                "                     xhtml.startElement(\"b\");",
                "-                    isBold = true;",
                "                 } else {",
                "                     xhtml.endElement(\"b\");",
                "-                    isBold = false;",
                "                 }",
                "+                isBold = runProperties.isBold();",
                "             }",
                "-            if (runProperties.getItalics() != isItalics) {",
                "-                if (runProperties.getItalics()) {",
                "+            if (runProperties.isItalics() != isItalics) {",
                "+                if (isStrikeThrough) {",
                "+                    xhtml.endElement(\"strike\");",
                "+                    isStrikeThrough = false;",
                "+                }",
                "+                if (isUnderline) {",
                "+                    xhtml.endElement(\"u\");",
                "+                    isUnderline = false;",
                "+                }",
                "+                if (runProperties.isItalics()) {",
                "                     xhtml.startElement(\"i\");",
                "-                    isItalics = true;",
                "                 } else {",
                "                     xhtml.endElement(\"i\");",
                "-                    isItalics = false;",
                "                 }",
                "+                isItalics = runProperties.isItalics();",
                "+            }",
                "+",
                "+            if (runProperties.isStrikeThrough() != isStrikeThrough) {",
                "+                if (isUnderline) {",
                "+                    xhtml.endElement(\"u\");",
                "+                    isUnderline = false;",
                "+                }",
                "+                if (runProperties.isStrikeThrough()) {",
                "+                    xhtml.startElement(\"strike\");",
                "+                } else {",
                "+                    xhtml.endElement(\"strike\");",
                "+                }",
                "+                isStrikeThrough = runProperties.isStrikeThrough();",
                "+            }",
                "+",
                "+            boolean runIsUnderlined = runProperties.getUnderline() != UnderlinePatterns.NONE;",
                "+            if (runIsUnderlined != isUnderline) {",
                "+                if (runIsUnderlined) {",
                "+                    xhtml.startElement(\"u\");",
                "+                } else {",
                "+                    xhtml.endElement(\"u\");",
                "+                }",
                "+                isUnderline = runIsUnderlined;",
                "             }",
                "@@ -373,2 +414,13 @@ public class OOXMLTikaBodyPartHandler implements OOXMLWordAndPowerPointTextHandl",
                "     private void closeStyleTags() throws SAXException {",
                "+",
                "+        if (isStrikeThrough) {",
                "+            xhtml.endElement(\"strike\");",
                "+            isStrikeThrough = false;",
                "+        }",
                "+",
                "+        if (isUnderline) {",
                "+            xhtml.endElement(\"u\");",
                "+            isUnderline = false;",
                "+        }",
                "+",
                "         if (isItalics) {",
                "@@ -377,2 +429,3 @@ public class OOXMLTikaBodyPartHandler implements OOXMLWordAndPowerPointTextHandl",
                "         }",
                "+",
                "         if (isBold) {",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLWordAndPowerPointTextHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLWordAndPowerPointTextHandler.java",
                "index f12da587a..f0ba26533 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLWordAndPowerPointTextHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLWordAndPowerPointTextHandler.java",
                "@@ -23,2 +23,3 @@ import java.util.Map;",
                "+import org.apache.poi.xwpf.usermodel.UnderlinePatterns;",
                " import org.apache.tika.parser.microsoft.OfficeParserConfig;",
                "@@ -74,2 +75,4 @@ public class OOXMLWordAndPowerPointTextHandler extends DefaultHandler {",
                "     private final static String I = \"i\";",
                "+    private final static String U = \"u\";",
                "+    private final static String STRIKE = \"strike\";",
                "     private final static String NUM_PR = \"numPr\";",
                "@@ -90,2 +93,3 @@ public class OOXMLWordAndPowerPointTextHandler extends DefaultHandler {",
                "     private final static String RT = \"rt\"; //phonetic run",
                "+    private static final String VAL = \"val\";",
                "@@ -249,2 +253,10 @@ public class OOXMLWordAndPowerPointTextHandler extends DefaultHandler {",
                "             }",
                "+        } else if (STRIKE.equals(localName)) {",
                "+            if (inR && inRPr) {",
                "+                currRunProperties.setStrike(true);",
                "+            }",
                "+        } else if (U.equals(localName)) {",
                "+            if (inR && inRPr) {",
                "+                currRunProperties.setUnderline(getStringVal(atts));",
                "+            }",
                "         } else if (TR.equals(localName)) {",
                "@@ -356,4 +368,12 @@ public class OOXMLWordAndPowerPointTextHandler extends DefaultHandler {",
                "+    private String getStringVal(Attributes atts) {",
                "+        String valString = atts.getValue(W_NS, VAL);",
                "+        if (valString != null) {",
                "+            return valString;",
                "+        }",
                "+        return \"\";",
                "+    }",
                "+",
                "     private int getIntVal(Attributes atts) {",
                "-        String valString = atts.getValue(W_NS, \"val\");",
                "+        String valString = atts.getValue(W_NS, VAL);",
                "         if (valString != null) {",
                "@@ -456,2 +476,4 @@ public class OOXMLWordAndPowerPointTextHandler extends DefaultHandler {",
                "         currRunProperties.setItalics(false);",
                "+        currRunProperties.setStrike(false);",
                "+        currRunProperties.setUnderline(UnderlinePatterns.NONE.name());",
                "     }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/RunProperties.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/RunProperties.java",
                "index 9fbfcd885..aa126af43 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/RunProperties.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/RunProperties.java",
                "@@ -19,2 +19,5 @@ package org.apache.tika.parser.microsoft.ooxml;",
                "+import org.apache.poi.xwpf.usermodel.UnderlinePatterns;",
                "+import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTUnderline;",
                "+",
                " /**",
                "@@ -27,4 +30,7 @@ public class RunProperties {",
                "     boolean bold = false;",
                "+    boolean strikeThrough = false;",
                "+",
                "+    UnderlinePatterns underline = UnderlinePatterns.NONE;",
                "-    public boolean getItalics() {",
                "+    public boolean isItalics() {",
                "         return italics;",
                "@@ -32,3 +38,3 @@ public class RunProperties {",
                "-    public boolean getBold() {",
                "+    public boolean isBold() {",
                "         return bold;",
                "@@ -43,2 +49,25 @@ public class RunProperties {",
                "     }",
                "+",
                "+    public boolean isStrikeThrough() {",
                "+        return strikeThrough;",
                "+    }",
                "+",
                "+    public void setStrike(boolean strikeThrough) {",
                "+        this.strikeThrough = strikeThrough;",
                "+    }",
                "+",
                "+    public UnderlinePatterns getUnderline() {",
                "+        return underline;",
                "+    }",
                "+",
                "+    public void setUnderline(String underlineString) {",
                "+        if (underlineString == null || underlineString.equals(\"\")) {",
                "+            underline = UnderlinePatterns.SINGLE;",
                "+        } else if (UnderlinePatterns.NONE.name().equals(underlineString)) {",
                "+            underline = UnderlinePatterns.NONE;",
                "+        } else {",
                "+            //TODO -- fill out rest",
                "+            underline = UnderlinePatterns.SINGLE;",
                "+        }",
                "+    }",
                " }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLWordAndPowerPointTextHandler.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/RunProperties.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2512": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: line",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2512",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "b19c2d7d769fda84378108d26023852ee6abdb6c",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510608377,
            "hunks": 1,
            "message": "TIKA-2502 -- rollback until we can figure out how to get the upgrade working with our OSGi bundle.",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 81f89778d..a155e1f24 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -313,3 +313,3 @@",
                "       <artifactId>opennlp-tools</artifactId>",
                "-      <version>1.8.3</version>",
                "+      <version>1.6.0</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2502": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2502",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "b6bdb672a9528a5676759cb160f1e47b42235bd5",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510960303,
            "hunks": 8,
            "message": "TIKA-2502 - Upgrade opennlp-tools to 1.8.3  maven-bundle-plugin to 3.3.0",
            "diff": [
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index cc6ed0d30..dd0b12e9e 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -56,3 +56,2 @@",
                "       <version>${project.version}</version>",
                "-      <scope>provided</scope>",
                "     </dependency>",
                "@@ -128,25 +127,58 @@",
                "             </Bundle-Activator>",
                "-            <Embed-Dependency>",
                "-              tika-parsers;inline=true,",
                "-              commons-compress, xz, commons-codec, commons-csv,",
                "-              commons-io, commons-exec, commons-collections4, junrar,",
                "-              pdfbox,pdfbox-tools,pdfbox-debugger,fontbox,jempbox,bcmail-jdk15on,bcprov-jdk15on,bcpkix-jdk15on,",
                "-              poi,poi-scratchpad,poi-ooxml,poi-ooxml-schemas,",
                "-              curvesapi,",
                "-              xmlbeans,",
                "-              jackcess,",
                "-              commons-lang,",
                "-              tagsoup,",
                "-              asm,",
                "-              juniversalchardet,",
                "-              vorbis-java-core, vorbis-java-tika,",
                "-              isoparser,",
                "-              metadata-extractor, xmpcore, json-simple,",
                "-              boilerpipe, rome, rome-utils, sentiment-analysis-parser;type=jar;inline=false, opennlp-tools,",
                "-              geoapi, sis-metadata, sis-netcdf, sis-utility,",
                "-              sis-storage, apache-mime4j-core, apache-mime4j-dom,",
                "-              jsr-275, jhighlight, java-libpst,",
                "-              netcdf4, grib, cdm, httpservices, jcip-annotations,",
                "-              jmatio, guava, age-predictor-api;type=jar;inline=false",
                "-            </Embed-Dependency>",
                "+            <Embed-Dependency>*;scope=compile;artifactId=tika-parsers|",
                "+              commons-compress|",
                "+              xz|",
                "+              commons-codec|",
                "+              commons-csv|",
                "+              commons-io|",
                "+              commons-exec|",
                "+              commons-collections4|",
                "+              junrar|",
                "+              pdfbox|",
                "+              pdfbox-tools|",
                "+              pdfbox-debugger|",
                "+              fontbox|",
                "+              jempbox|",
                "+              bcmail-jdk15on|",
                "+              bcprov-jdk15on|",
                "+              bcpkix-jdk15on|",
                "+              poi|poi-scratchpad|",
                "+              poi-ooxml|",
                "+              poi-ooxml-schemas|",
                "+              curvesapi|",
                "+              xmlbeans|",
                "+              jackcess|",
                "+              commons-lang|",
                "+              tagsoup|",
                "+              asm|",
                "+              juniversalchardet|",
                "+              vorbis-java-core|",
                "+              vorbis-java-tika|",
                "+              isoparser|",
                "+              metadata-extractor|",
                "+              xmpcore|",
                "+              json-simple|",
                "+              boilerpipe|",
                "+              rome|",
                "+              rome-utils|",
                "+              sentiment-analysis-parser|",
                "+              opennlp-tools|",
                "+              geoapi|",
                "+              sis-metadata|",
                "+              sis-netcdf|",
                "+              sis-utility|",
                "+              sis-storage|",
                "+              apache-mime4j-core|",
                "+              apache-mime4j-dom|",
                "+              jsr-275|",
                "+              jhighlight|",
                "+              java-libpst|",
                "+              netcdf4|",
                "+              grib|",
                "+              cdm|",
                "+              httpservices|",
                "+              jcip-annotations|",
                "+              jmatio|",
                "+              guava|",
                "+              age-predictor-api</Embed-Dependency>",
                "             <Embed-Transitive>true</Embed-Transitive>",
                "@@ -171,3 +203,2 @@",
                " \t      !org.apache.spark.sql.*,",
                "-              *,",
                " \t          org.apache.tika.mime,",
                "@@ -188,3 +219,3 @@",
                "               edu.wisc.ssec.mcidas.adde;resolution:=optional,",
                "-\t      edu.usc.irds.agepredictor.spark.authorage;resolution:=optional,",
                "+\t          edu.usc.irds.agepredictor.spark.authorage;resolution:=optional,",
                "               javax.activation;resolution:=optional,",
                "@@ -205,3 +236,3 @@",
                "               opennlp.tools.namefind;resolution:=optional,",
                "-\t      opennlp.tools.authorage;resolution:=optional,",
                "+\t          opennlp.tools.authorage;resolution:=optional,",
                "               net.didion.jwnl;resolution:=optional,",
                "@@ -372,3 +403,4 @@",
                "               org.apache.commons.logging;resolution:=optional,",
                "-              org.apache.log4j;resolution:=optional",
                "+              org.apache.log4j;resolution:=optional,",
                "+              *",
                "             </Import-Package>",
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index 290fcb396..cfbe17fc5 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -351,3 +351,3 @@",
                "         <artifactId>maven-bundle-plugin</artifactId>",
                "-        <version>2.3.4</version>",
                "+        <version>3.3.0</version>",
                "       </plugin>",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 1b5a4eeff..6e8c29a4d 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -318,3 +318,3 @@",
                "       <artifactId>opennlp-tools</artifactId>",
                "-      <version>1.6.0</version>",
                "+      <version>1.8.3</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-bundle/pom.xml",
                "tika-parent/pom.xml",
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2502": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2502",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "9e1cd3023b234b9ec1c9b3c75419de59d28d5df6",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516724502,
            "hunks": 2,
            "message": "upgrade geo-apis and sis (TIKA-2535).",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 38794032d..a214f39a3 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -47,3 +47,3 @@",
                "     <netcdf-java.version>4.5.5</netcdf-java.version>",
                "-    <sis.version>0.6</sis.version>",
                "+    <sis.version>0.8</sis.version>",
                "     <!-- used by POI, PDFBox and Jackcess ...try to sync -->",
                "@@ -483,3 +483,3 @@",
                "       <artifactId>geoapi</artifactId>",
                "-      <version>3.0.0</version>",
                "+      <version>3.0.1</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2535": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "tika-1.28.2-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2535",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "93411f42cc52b2432586d90c22e769a5c3cb15bb",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1509716251,
            "hunks": 1,
            "message": "TIKA-2489 -- upgrade to PDFBox 2.0.8",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 2f3e2a9bb..78825b385 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -44,3 +44,3 @@",
                "     <vorbis.version>0.8</vorbis.version>",
                "-    <pdfbox.version>2.0.7</pdfbox.version>",
                "+    <pdfbox.version>2.0.8</pdfbox.version>",
                "     <jempbox.version>1.8.13</jempbox.version>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2489": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2489",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "e83844cd346ab387b68c97fd38fd18dda80e6c99",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512480764,
            "hunks": 1,
            "message": "TIKA-2516 upgrade to cxf 3.0.16",
            "diff": [
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index 2229d3e6f..0be183516 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -310,3 +310,3 @@",
                "     <commons.io.version>2.5</commons.io.version>",
                "-    <cxf.version>3.0.13</cxf.version>",
                "+    <cxf.version>3.0.16</cxf.version>",
                "     <slf4j.version>1.7.24</slf4j.version>"
            ],
            "changed_files": [
                "tika-parent/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2516": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2516",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "6b2b626f61cf95c7a92fe0687e50855a2cc0d42b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512482924,
            "hunks": 3,
            "message": "TIKA-2503 upgrade to httpcomponents 4.5.4",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 20fbb6e70..f30de1ca8 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -51,2 +51,3 @@",
                "     <commonsexec.version>1.3</commonsexec.version>",
                "+    <httpcomponents.version>4.5.4</httpcomponents.version>",
                "   </properties>",
                "@@ -443,3 +444,3 @@",
                "       <artifactId>httpclient</artifactId>",
                "-      <version>4.5.3</version>",
                "+      <version>${httpcomponents.version}</version>",
                "       <exclusions>",
                "@@ -454,3 +455,3 @@",
                "       <artifactId>httpmime</artifactId>",
                "-      <version>4.5.3</version>",
                "+      <version>${httpcomponents.version}</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2503": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: upgrade",
                    "relevance": 4
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2503",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "91ef9a972783b8638c2f31f904d5a0b9fdfa6074",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511283844,
            "hunks": 0,
            "message": "Merge pull request #208 from ThejanW/master Fix for TIKA-2400 Standardizing current Object Recognition REST parsers",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2400": ""
            },
            "ghissue_refs": {
                "208": ""
            },
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2400",
                    "relevance": 2
                },
                {
                    "id": "GITHUB_ISSUE_IN_MESSAGE",
                    "message": "The commit message references some github issue: 208",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "78c8d74a34ccf8ef5d49ba7a242687e1423ca952",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1513177911,
            "hunks": 17,
            "message": "TIKA-2524 -- add an XPS parser",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/MetadataExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/MetadataExtractor.java",
                "index 21c62524f..dbbb83957 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/MetadataExtractor.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/MetadataExtractor.java",
                "@@ -38,2 +38,3 @@ import org.apache.tika.metadata.TikaCoreProperties;",
                " import org.apache.tika.parser.microsoft.SummaryExtractor;",
                "+import org.apache.tika.parser.microsoft.ooxml.xps.XPSTextExtractor;",
                " import org.apache.tika.parser.microsoft.ooxml.xslf.XSLFEventBasedPowerPointExtractor;",
                "@@ -63,3 +64,4 @@ public class MetadataExtractor {",
                "                         extractor instanceof XWPFEventBasedWordExtractor ||",
                "-                        extractor instanceof XSLFEventBasedPowerPointExtractor) &&",
                "+                        extractor instanceof XSLFEventBasedPowerPointExtractor ||",
                "+                        extractor instanceof XPSTextExtractor) &&",
                "                         extractor.getPackage() != null)) {",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLExtractorFactory.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLExtractorFactory.java",
                "index b6f7bf5be..5230d6517 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLExtractorFactory.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLExtractorFactory.java",
                "@@ -47,2 +47,4 @@ import org.apache.tika.parser.ParseContext;",
                " import org.apache.tika.parser.microsoft.OfficeParserConfig;",
                "+import org.apache.tika.parser.microsoft.ooxml.xps.XPSExtractorDecorator;",
                "+import org.apache.tika.parser.microsoft.ooxml.xps.XPSTextExtractor;",
                " import org.apache.tika.parser.microsoft.ooxml.xslf.XSLFEventBasedPowerPointExtractor;",
                "@@ -68,3 +70,3 @@ public class OOXMLExtractorFactory {",
                "         try {",
                "-            OOXMLExtractor extractor;",
                "+            OOXMLExtractor extractor = null;",
                "             OPCPackage pkg;",
                "@@ -85,2 +87,6 @@ public class OOXMLExtractorFactory {",
                "             MediaType type = ZipContainerDetector.detectOfficeOpenXML(pkg);",
                "+            if (type == null) {",
                "+                type = ZipContainerDetector.detectXPSOPC(pkg);",
                "+            }",
                "+",
                "             if (type == null || OOXMLParser.UNSUPPORTED_OOXML_TYPES.contains(type)) {",
                "@@ -91,3 +97,2 @@ public class OOXMLExtractorFactory {",
                "             metadata.set(Metadata.CONTENT_TYPE, type.toString());",
                "-",
                "             // Have the appropriate OOXML text extractor picked",
                "@@ -103,2 +108,6 @@ public class OOXMLExtractorFactory {",
                "             }",
                "+            if (type.equals(OOXMLParser.XPS)) {",
                "+                poiExtractor = new XPSTextExtractor(pkg);",
                "+            }",
                "+",
                "             if (poiExtractor == null) {",
                "@@ -121,2 +130,4 @@ public class OOXMLExtractorFactory {",
                "                 metadata.add(\"X-Parsed-By\", XSLFEventBasedPowerPointExtractor.class.getCanonicalName());",
                "+            } else if (poiExtractor instanceof XPSTextExtractor) {",
                "+                extractor = new XPSExtractorDecorator(context, poiExtractor);",
                "             } else if (document == null) {",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLParser.java",
                "index fbc0f93a4..81ec4b68f 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLParser.java",
                "@@ -43,2 +43,4 @@ public class OOXMLParser extends AbstractOfficeParser {",
                "+    protected static final MediaType XPS = MediaType.application(\"vnd.ms-xpsdocument\");",
                "+",
                "     protected static final Set<MediaType> SUPPORTED_TYPES =",
                "@@ -86,5 +88,7 @@ public class OOXMLParser extends AbstractOfficeParser {",
                "     protected static final Set<MediaType> UNSUPPORTED_OOXML_TYPES =",
                "-            Collections.singleton(",
                "+            Collections.EMPTY_SET;",
                "+        //TODO: should we do a singleton for dwfx+xps?",
                "+            /*Collections.singleton(",
                "                     MediaType.application(\"vnd.ms-xpsdocument\")",
                "-            );",
                "+            );*/",
                "     /**",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSExtractorDecorator.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSExtractorDecorator.java",
                "new file mode 100644",
                "index 000000000..689db28dc",
                "--- /dev/null",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSExtractorDecorator.java",
                "@@ -0,0 +1,262 @@",
                "+/*",
                "+ * Licensed to the Apache Software Foundation (ASF) under one or more",
                "+ * contributor license agreements.  See the NOTICE file distributed with",
                "+ * this work for additional information regarding copyright ownership.",
                "+ * The ASF licenses this file to You under the Apache License, Version 2.0",
                "+ * (the \"License\"); you may not use this file except in compliance with",
                "+ * the License.  You may obtain a copy of the License at",
                "+ *",
                "+ *     http://www.apache.org/licenses/LICENSE-2.0",
                "+ *",
                "+ * Unless required by applicable law or agreed to in writing, software",
                "+ * distributed under the License is distributed on an \"AS IS\" BASIS,",
                "+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "+ * See the License for the specific language governing permissions and",
                "+ * limitations under the License.",
                "+ */",
                "+",
                "+package org.apache.tika.parser.microsoft.ooxml.xps;",
                "+",
                "+import org.apache.commons.io.IOUtils;",
                "+import org.apache.commons.io.input.CloseShieldInputStream;",
                "+import org.apache.poi.POIXMLDocument;",
                "+import org.apache.poi.POIXMLTextExtractor;",
                "+import org.apache.poi.openxml4j.opc.PackagePart;",
                "+import org.apache.poi.openxml4j.opc.PackageRelationship;",
                "+import org.apache.poi.openxml4j.opc.PackageRelationshipCollection;",
                "+import org.apache.poi.openxml4j.opc.ZipPackage;",
                "+import org.apache.poi.openxml4j.util.ZipEntrySource;",
                "+import org.apache.tika.exception.TikaException;",
                "+import org.apache.tika.extractor.EmbeddedDocumentUtil;",
                "+import org.apache.tika.metadata.Metadata;",
                "+import org.apache.tika.metadata.TikaCoreProperties;",
                "+import org.apache.tika.parser.ParseContext;",
                "+import org.apache.tika.parser.microsoft.ooxml.AbstractOOXMLExtractor;",
                "+import org.apache.tika.sax.EmbeddedContentHandler;",
                "+import org.apache.tika.sax.OfflineContentHandler;",
                "+import org.apache.tika.sax.XHTMLContentHandler;",
                "+import org.apache.tika.utils.ExceptionUtils;",
                "+import org.xml.sax.Attributes;",
                "+import org.xml.sax.SAXException;",
                "+import org.xml.sax.helpers.DefaultHandler;",
                "+",
                "+import java.io.IOException;",
                "+import java.io.InputStream;",
                "+import java.util.Collections;",
                "+import java.util.Enumeration;",
                "+import java.util.HashMap;",
                "+import java.util.List;",
                "+import java.util.Map;",
                "+import java.util.zip.ZipEntry;",
                "+",
                "+public class XPSExtractorDecorator extends AbstractOOXMLExtractor {",
                "+",
                "+    private static String XPS_DOCUMENT = \"http://schemas.microsoft.com/xps/2005/06/fixedrepresentation\";",
                "+",
                "+    private final ParseContext context;",
                "+    private final ZipPackage pkg;",
                "+    Map<String, Metadata> embeddedImages = new HashMap<>();",
                "+",
                "+    public XPSExtractorDecorator(ParseContext context, POIXMLTextExtractor extractor) throws TikaException {",
                "+        super(context, extractor);",
                "+        this.context = context;",
                "+        if (extractor.getPackage() instanceof ZipPackage) {",
                "+            this.pkg = (ZipPackage) extractor.getPackage();",
                "+        } else {",
                "+            throw new TikaException(\"OPCPackage must be a ZipPackage\");",
                "+        }",
                "+    }",
                "+",
                "+    @Override",
                "+    public POIXMLDocument getDocument() {",
                "+        return null;",
                "+    }",
                "+",
                "+",
                "+    @Override",
                "+    protected void buildXHTML(XHTMLContentHandler xhtml) throws SAXException, IOException {",
                "+",
                "+        PackageRelationshipCollection prc = pkg.getRelationshipsByType(XPS_DOCUMENT);",
                "+        for (int i = 0; i < prc.size(); i++) {",
                "+            PackageRelationship pr = prc.getRelationship(i);",
                "+",
                "+            //there should only be one.",
                "+            //in the test file, this points to FixedDocSeq.fdseq",
                "+            try {",
                "+                handleDocuments(pr, xhtml);",
                "+            } catch (TikaException e) {",
                "+                throw new SAXException(e);",
                "+            }",
                "+        }",
                "+",
                "+        //now handle embedded images",
                "+        if (embeddedImages.size() > 0) {",
                "+            EmbeddedDocumentUtil embeddedDocumentUtil = new EmbeddedDocumentUtil(context);",
                "+            for (Map.Entry<String, Metadata> embeddedImage : embeddedImages.entrySet()) {",
                "+                String zipPath = embeddedImage.getKey();",
                "+                Metadata metadata = embeddedImage.getValue();",
                "+                    if (embeddedDocumentUtil.shouldParseEmbedded(metadata)) {",
                "+                        handleEmbeddedImage(",
                "+                                zipPath,",
                "+                                metadata,",
                "+                                embeddedDocumentUtil,",
                "+                                xhtml);",
                "+                    }",
                "+            }",
                "+        }",
                "+",
                "+    }",
                "+",
                "+    private void handleEmbeddedImage(String zipPath, Metadata metadata,",
                "+                                      EmbeddedDocumentUtil embeddedDocumentUtil,",
                "+                                     XHTMLContentHandler xhtml) throws SAXException, IOException {",
                "+        InputStream stream = null;",
                "+        try {",
                "+            stream = getZipStream(zipPath, pkg);",
                "+        } catch (IOException|TikaException e) {",
                "+            //store this exception in the parent's metadata",
                "+            EmbeddedDocumentUtil.recordEmbeddedStreamException(e, metadata);",
                "+            return;",
                "+        }",
                "+",
                "+        try {",
                "+            embeddedDocumentUtil.parseEmbedded(stream, xhtml, metadata, true);",
                "+        } finally {",
                "+            IOUtils.closeQuietly(stream);",
                "+        }",
                "+    }",
                "+",
                "+    private void handleDocuments(PackageRelationship packageRelationship,",
                "+                                 XHTMLContentHandler xhtml) throws IOException, SAXException, TikaException {",
                "+",
                "+        try (InputStream stream = pkg.getPart(packageRelationship).getInputStream()) {",
                "+            context.getSAXParser().parse(",
                "+                    new CloseShieldInputStream(stream),",
                "+                    new OfflineContentHandler(new EmbeddedContentHandler(",
                "+                            new FixedDocSeqHandler(xhtml))));",
                "+        }",
                "+    }",
                "+",
                "+    @Override",
                "+    protected List<PackagePart> getMainDocumentParts() throws TikaException {",
                "+        return Collections.EMPTY_LIST;",
                "+    }",
                "+",
                "+    private class FixedDocSeqHandler extends DefaultHandler {",
                "+        private final static String DOCUMENT_REFERENCE = \"DocumentReference\";",
                "+        private final static String SOURCE = \"Source\";",
                "+",
                "+        private final XHTMLContentHandler xhtml;",
                "+",
                "+        private FixedDocSeqHandler(XHTMLContentHandler xhtml) {",
                "+            this.xhtml = xhtml;",
                "+        }",
                "+",
                "+        @Override",
                "+        public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {",
                "+            if (!DOCUMENT_REFERENCE.equals(localName)) {",
                "+                return;",
                "+            }",
                "+            for (int i = 0; i < atts.getLength(); i++) {",
                "+                String lName = atts.getLocalName(i);",
                "+                if (SOURCE.equals(lName)) {",
                "+                    handleDocumentRef(atts.getValue(i));",
                "+                }",
                "+            }",
                "+        }",
                "+",
                "+        private void handleDocumentRef(String docRef) throws SAXException {",
                "+            //docRef is a path to a FixedDocumentSequence document,",
                "+            // e.g. /Documents/1/FixedDoc.fdoc",
                "+",
                "+            //relative root is /Documents/1 ..need this Pages...",
                "+            String relativeRoot = null;",
                "+            int i = docRef.lastIndexOf(\"/\");",
                "+            if (i > 0) {",
                "+                relativeRoot = docRef.substring(0, i);",
                "+            } else {",
                "+                relativeRoot = \"\";",
                "+            }",
                "+            String zipPath = (docRef.startsWith(\"/\") ? docRef.substring(1) : docRef);",
                "+            if (pkg instanceof ZipPackage) {",
                "+                try (InputStream stream = getZipStream(zipPath, pkg)) {",
                "+                    context.getSAXParser().parse(",
                "+                            new CloseShieldInputStream(stream),",
                "+                            new OfflineContentHandler(new EmbeddedContentHandler(",
                "+                                    new PageContentPartHandler(relativeRoot, xhtml))));",
                "+",
                "+                } catch (IOException | TikaException e) {",
                "+                    throw new SAXException(new TikaException(\"IOException trying to read: \" + docRef));",
                "+                }",
                "+            } else {",
                "+                throw new SAXException(new TikaException(\"Package must be ZipPackage\"));",
                "+            }",
                "+        }",
                "+",
                "+        private class PageContentPartHandler extends DefaultHandler {",
                "+            private static final String PAGE_CONTENT = \"PageContent\";",
                "+            private static final String SOURCE = \"Source\";",
                "+",
                "+            private final String relativeRoot;",
                "+            private final XHTMLContentHandler xhtml;",
                "+",
                "+            private PageContentPartHandler(String relativeRoot, XHTMLContentHandler xhtml) {",
                "+                this.relativeRoot = relativeRoot;",
                "+                this.xhtml = xhtml;",
                "+            }",
                "+",
                "+            @Override",
                "+            public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {",
                "+                if (!PAGE_CONTENT.equals(localName)) {",
                "+                    return;",
                "+                }",
                "+                String pagePath = null;",
                "+                for (int i = 0; i < atts.getLength(); i++) {",
                "+                    if (SOURCE.equals(atts.getLocalName(i))) {",
                "+                        pagePath = atts.getValue(i);",
                "+                        break;",
                "+                    }",
                "+                }",
                "+",
                "+                if (pagePath != null) {",
                "+                    if (!pagePath.startsWith(\"/\")) {",
                "+                        pagePath = relativeRoot + \"/\" + pagePath;",
                "+                    }",
                "+                    //trim initial /",
                "+                    if (pagePath.startsWith(\"/\")) {",
                "+                        pagePath = pagePath.substring(1);",
                "+                    }",
                "+                    try (InputStream stream = getZipStream(pagePath, pkg)) {",
                "+                        context.getSAXParser().parse(",
                "+                                new CloseShieldInputStream(stream),",
                "+                                new OfflineContentHandler(",
                "+                                        new XPSPageContentHandler(xhtml, embeddedImages)",
                "+                                )",
                "+                        );",
                "+                    } catch (TikaException | IOException e) {",
                "+                        throw new SAXException(e);",
                "+                    }",
                "+                }",
                "+",
                "+            }",
                "+        }",
                "+    }",
                "+",
                "+    private static InputStream getZipStream(String zipPath, ZipPackage zipPackage) throws IOException, TikaException {",
                "+        String targPath = (zipPath.length() > 1 && zipPath.startsWith(\"/\") ? zipPath.substring(1) : zipPath);",
                "+        ZipEntrySource zipEntrySource = zipPackage.getZipArchive();",
                "+        Enumeration<? extends ZipEntry> zipEntryEnumeration = zipEntrySource.getEntries();",
                "+        ZipEntry zipEntry = null;",
                "+        while (zipEntryEnumeration.hasMoreElements()) {",
                "+            ZipEntry ze = zipEntryEnumeration.nextElement();",
                "+            if (ze.getName().equals(targPath)) {",
                "+                zipEntry = ze;",
                "+                break;",
                "+            }",
                "+        }",
                "+        if (zipEntry == null) {",
                "+            throw new TikaException(\"Couldn't find required zip entry: \" + zipPath);",
                "+        }",
                "+        return zipEntrySource.getInputStream(zipEntry);",
                "+    }",
                "+}",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSPageContentHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSPageContentHandler.java",
                "new file mode 100644",
                "index 000000000..d18825dd4",
                "--- /dev/null",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSPageContentHandler.java",
                "@@ -0,0 +1,377 @@",
                "+/*",
                "+ * Licensed to the Apache Software Foundation (ASF) under one or more",
                "+ * contributor license agreements.  See the NOTICE file distributed with",
                "+ * this work for additional information regarding copyright ownership.",
                "+ * The ASF licenses this file to You under the Apache License, Version 2.0",
                "+ * (the \"License\"); you may not use this file except in compliance with",
                "+ * the License.  You may obtain a copy of the License at",
                "+ *",
                "+ *     http://www.apache.org/licenses/LICENSE-2.0",
                "+ *",
                "+ * Unless required by applicable law or agreed to in writing, software",
                "+ * distributed under the License is distributed on an \"AS IS\" BASIS,",
                "+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "+ * See the License for the specific language governing permissions and",
                "+ * limitations under the License.",
                "+ */",
                "+package org.apache.tika.parser.microsoft.ooxml.xps;",
                "+",
                "+import org.apache.tika.metadata.Metadata;",
                "+import org.apache.tika.metadata.TikaCoreProperties;",
                "+import org.apache.tika.sax.XHTMLContentHandler;",
                "+import org.xml.sax.Attributes;",
                "+import org.xml.sax.SAXException;",
                "+import org.xml.sax.helpers.DefaultHandler;",
                "+",
                "+import java.util.ArrayList;",
                "+import java.util.Collections;",
                "+import java.util.Comparator;",
                "+import java.util.LinkedHashMap;",
                "+import java.util.LinkedHashSet;",
                "+import java.util.List;",
                "+import java.util.Map;",
                "+import java.util.Set;",
                "+import java.util.Stack;",
                "+",
                "+",
                "+/**",
                "+ * Handles an individual page.  For now, this marks up",
                "+ * canvas entities in a &lt;div&gt; tag.  Based on the spec,",
                "+ * it currently relies on order within the xml for order of output",
                "+ * of text to xhtml.  We could do more complex processing of coordinates",
                "+ * for bidi-languages, but the spec implies that we should be able",
                "+ * to rely on storage order.",
                "+ * <p/>",
                "+ * As with our PDFParser, this currently dumps urls at the bottom of the page",
                "+ * and does not attempt to calculate the correct anchor text.",
                "+ * <p/>",
                "+ * TODO: integrate table markup",
                "+ */",
                "+class XPSPageContentHandler extends DefaultHandler {",
                "+",
                "+    private static final String GLYPHS = \"Glyphs\";",
                "+    private static final String CANVAS = \"Canvas\";",
                "+    private static final String CLIP = \"Clip\";",
                "+    private static final String NULL_CLIP = \"NULL_CLIP\";",
                "+    private static final String UNICODE_STRING = \"UnicodeString\";",
                "+    private static final String ORIGIN_X = \"OriginX\";",
                "+    private static final String ORIGIN_Y = \"OriginY\";",
                "+    private static final String BIDI_LEVEL = \"BidiLevel\";",
                "+    private static final String INDICES = \"Indices\";",
                "+    private static final String NAME = \"Name\";",
                "+    private static final String PATH = \"Path\";",
                "+    private static final String NAVIGATE_URI = \"FixedPage.NavigateUri\";",
                "+    private static final String IMAGE_SOURCE = \"ImageSource\";",
                "+    private static final String IMAGE_BRUSH = \"ImageBrush\";",
                "+    private static final String AUTOMATION_PROPERITES_HELP_TEXT = \"AutomationProperties.HelpText\";",
                "+",
                "+    private static final String URL_DIV = \"urls\";",
                "+    private static final String DIV = \"div\";",
                "+    private static final String CLASS = \"class\";",
                "+    private static final String PAGE = \"page\";",
                "+    private static final String CANVAS_SAX = \"canvas\";",
                "+    private static final String P = \"p\";",
                "+    private static final String HREF = \"href\";",
                "+    private static final String A = \"a\";",
                "+",
                "+",
                "+    private final XHTMLContentHandler xhml;",
                "+",
                "+    //path in zip file for an image rendered on this page",
                "+    private String imageSourcePathInZip = null;",
                "+    //embedded images sometimes include full path info of original image",
                "+    private String originalLocationOnDrive = null;",
                "+",
                "+    //buffer for the glyph runs within a given canvas",
                "+    //in insertion order",
                "+    private Map<String, List<GlyphRun>> canvases = new LinkedHashMap<>();",
                "+",
                "+    private Set<String> urls = new LinkedHashSet();",
                "+    private Stack<String> canvasStack = new Stack<>();",
                "+    private final Map<String, Metadata> embeddedInfos;",
                "+    //sort based on y coordinate of first element in each row",
                "+    //this requires every row to have at least one element",
                "+    private static Comparator<? super List<GlyphRun>> ROW_SORTER = new Comparator<List<GlyphRun>>() {",
                "+        @Override",
                "+        public int compare(List<GlyphRun> o1, List<GlyphRun> o2) {",
                "+            if (o1.get(0).originY < o2.get(0).originY) {",
                "+                return -1;",
                "+            } else if (o1.get(0).originY > o2.get(0).originY) {",
                "+                return 1;",
                "+            }",
                "+            return 0;",
                "+        }",
                "+    };",
                "+",
                "+    public XPSPageContentHandler(XHTMLContentHandler xhtml, Map<String, Metadata> embeddedInfos) {",
                "+        this.xhml = xhtml;",
                "+        this.embeddedInfos = embeddedInfos;",
                "+    }",
                "+",
                "+    @Override",
                "+    public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {",
                "+        if (CANVAS.equals(localName)) {",
                "+            String clip = getVal(CLIP, atts);",
                "+            if (clip == null) {",
                "+                canvasStack.push(NULL_CLIP);",
                "+            } else {",
                "+                canvasStack.push(clip);",
                "+            }",
                "+            return;",
                "+        } else if (PATH.equals(localName)) {",
                "+            //for now just grab them and dump them at the end of the page.",
                "+            String url = getVal(NAVIGATE_URI, atts);",
                "+            if (url != null) {",
                "+                urls.add(url);",
                "+            }",
                "+            originalLocationOnDrive = getVal(AUTOMATION_PROPERITES_HELP_TEXT, atts);",
                "+        } else if (IMAGE_BRUSH.equals(localName)) {",
                "+            imageSourcePathInZip = getVal(IMAGE_SOURCE, atts);",
                "+        }",
                "+",
                "+        if (!GLYPHS.equals(localName)) {",
                "+            return;",
                "+        }",
                "+        String name = null;",
                "+        Float originX = null;",
                "+        Float originY = null;",
                "+        String unicodeString = null;",
                "+        Integer bidilevel = 1;",
                "+        String indicesString = null;",
                "+",
                "+        for (int i = 0; i < atts.getLength(); i++) {",
                "+            String lName = atts.getLocalName(i);",
                "+            String value = atts.getValue(i);",
                "+            value = (value == null) ? \"\" : value.trim();",
                "+",
                "+            if (ORIGIN_X.equals(lName) && value.length() > 0) {",
                "+                try {",
                "+                    originX = Float.parseFloat(atts.getValue(i));",
                "+                } catch (NumberFormatException e) {",
                "+                    throw new SAXException(e);",
                "+                }",
                "+            } else if (ORIGIN_Y.equals(lName) && value.length() > 0) {",
                "+                try {",
                "+                    originY = Float.parseFloat(atts.getValue(i));",
                "+                } catch (NumberFormatException e) {",
                "+                    throw new SAXException(e);",
                "+                }",
                "+            } else if (UNICODE_STRING.equals(lName)) {",
                "+                unicodeString = atts.getValue(i);",
                "+            } else if (BIDI_LEVEL.equals(lName) && value.length() > 0) {",
                "+                try {",
                "+                    bidilevel = Integer.parseInt(atts.getValue(i));",
                "+                } catch (NumberFormatException e) {",
                "+                    throw new SAXException(e);",
                "+                }",
                "+            } else if (INDICES.equals(lName)) {",
                "+                indicesString = atts.getValue(i);",
                "+            } else if (NAME.equals(lName)) {",
                "+                name = value;",
                "+            }",
                "+        }",
                "+        if (unicodeString != null) {",
                "+            originX = (originX == null) ? Integer.MIN_VALUE : originX;",
                "+            originY = (originY == null) ? Integer.MAX_VALUE : originY;",
                "+            String currentCanvasClip = (canvasStack.size() > 0) ? canvasStack.peek() : NULL_CLIP;",
                "+            List<GlyphRun> runs = canvases.get(currentCanvasClip);",
                "+            if (runs == null) {",
                "+                runs = new ArrayList<>();",
                "+            }",
                "+            runs.add(new GlyphRun(name, originY, originX, unicodeString, bidilevel, indicesString));",
                "+            canvases.put(currentCanvasClip, runs);",
                "+        }",
                "+",
                "+    }",
                "+",
                "+    @Override",
                "+    public void endElement(String uri, String localName, String qName) throws SAXException {",
                "+        if (CANVAS.equals(localName)) {",
                "+            if (! canvasStack.isEmpty()) {",
                "+                canvasStack.pop();",
                "+            }",
                "+        } else if (PATH.equals(localName)) {",
                "+            //this assumes that there cannot be a path within a path",
                "+            //not sure if this is true or if we need to track path depth",
                "+            if (imageSourcePathInZip != null) {",
                "+                Metadata m = embeddedInfos.get(imageSourcePathInZip);",
                "+                if (m == null) {",
                "+                    m = new Metadata();",
                "+                }",
                "+                if (originalLocationOnDrive != null) {",
                "+                    String val = m.get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME);",
                "+                    if (val == null) {",
                "+                        m.set(TikaCoreProperties.ORIGINAL_RESOURCE_NAME, originalLocationOnDrive);",
                "+                    }",
                "+                }",
                "+                m.set(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE,",
                "+                        TikaCoreProperties.EmbeddedResourceType.INLINE.toString());",
                "+                embeddedInfos.put(imageSourcePathInZip, m);",
                "+            }",
                "+            //reset",
                "+            imageSourcePathInZip = null;",
                "+            originalLocationOnDrive = null;",
                "+        }",
                "+    }",
                "+    @Override",
                "+    public void startDocument() throws SAXException {",
                "+        xhml.startElement(DIV, CLASS, PAGE);",
                "+    }",
                "+",
                "+    @Override",
                "+    public void endDocument() throws SAXException {",
                "+        writePage();",
                "+        xhml.endElement(DIV);",
                "+    }",
                "+",
                "+",
                "+    private final void writePage() throws SAXException {",
                "+        if (canvases.size() == 0) {",
                "+            return;",
                "+        }",
                "+",
                "+        for (Map.Entry<String, List<GlyphRun>> e : canvases.entrySet()) {",
                "+            String clip = e.getKey();",
                "+            List<GlyphRun> runs = e.getValue();",
                "+            if (runs.size() == 0) {",
                "+                continue;",
                "+            }",
                "+            xhml.startElement(DIV, CLASS, CANVAS_SAX);",
                "+            //a list of rows sorted by the y of the first element in each row",
                "+            List<List<GlyphRun>> rows = buildRows(runs);",
                "+            for (List<GlyphRun> row : rows) {",
                "+                writeRow(row);",
                "+            }",
                "+            xhml.endElement(DIV);",
                "+        }",
                "+        //for now just dump the urls at the end of the page",
                "+        //At some point, we could link them back up to their",
                "+        //true anchor text.",
                "+        if (urls.size() > 0) {",
                "+            xhml.startElement(DIV, CLASS, URL_DIV);",
                "+            for (String u : urls) {",
                "+                xhml.startElement(A, HREF, u);",
                "+                xhml.characters(u);",
                "+                xhml.endElement(A);",
                "+            }",
                "+            xhml.endElement(DIV);",
                "+        }",
                "+        canvases.clear();",
                "+    }",
                "+",
                "+    private void writeRow(List<GlyphRun> row) throws SAXException {",
                "+/*",
                "+        int rtl = 0;",
                "+        int ltr = 0;",
                "+        //if the row is entirely rtl, sort all as rtl",
                "+        //otherwise sort ltr",
                "+        for (GlyphRun r : row) {",
                "+            //ignore directionality of pure spaces",
                "+            if (r.unicodeString == null || r.unicodeString.trim().length() == 0) {",
                "+                continue;",
                "+            }",
                "+            if (r.direction == GlyphRun.DIRECTION.RTL) {",
                "+                rtl++;",
                "+            } else {",
                "+                ltr++;",
                "+            }",
                "+        }",
                "+        if (rtl > 0 && ltr == 0) {",
                "+            Collections.sort(row, GlyphRun.RTL_COMPARATOR);",
                "+        } else {",
                "+            Collections.sort(row, GlyphRun.LTR_COMPARATOR);",
                "+        }*/",
                "+",
                "+        xhml.startElement(P);",
                "+        for (GlyphRun run : row) {",
                "+            //figure out if you need to add a space",
                "+            xhml.characters(run.unicodeString);",
                "+        }",
                "+        xhml.endElement(P);",
                "+    }",
                "+",
                "+    //returns a List of rows (where a row is a list of glyphruns)",
                "+    //the List is sorted in increasing order of the first y of each row",
                "+    private List<List<GlyphRun>> buildRows(List<GlyphRun> glyphRuns) {",
                "+        List<List<GlyphRun>> rows = new ArrayList<>();",
                "+        float maxY = -1.0f;",
                "+        for (GlyphRun glyphRun : glyphRuns) {",
                "+            if (rows.size() == 0) {",
                "+                List<GlyphRun> row = new ArrayList<>();",
                "+                row.add(glyphRun);",
                "+                rows.add(row);",
                "+                continue;",
                "+            } else {",
                "+                boolean addedNewRow = false;",
                "+                //can rely on the last row having the highest y",
                "+                List<GlyphRun> row = rows.get(rows.size()-1);",
                "+                //0.5 is a purely heuristic/magical number that should be derived",
                "+                //from the data, not made up. TODO: fix this",
                "+                if (Math.abs(glyphRun.originY -row.get(0).originY) < 0.5) {",
                "+                    row.add(glyphRun);",
                "+                } else {",
                "+                    row = new ArrayList<>();",
                "+                    row.add(glyphRun);",
                "+                    rows.add(row);",
                "+                    addedNewRow = true;",
                "+                }",
                "+                //sort rows so that they are in ascending order of y",
                "+                //in most xps files in our test corpus, this is never triggered",
                "+                //because the runs are already ordered correctly",
                "+                if (maxY > -1.0f && addedNewRow && glyphRun.originY < maxY) {",
                "+                    Collections.sort(rows, ROW_SORTER);",
                "+                }",
                "+                if (glyphRun.originY > maxY) {",
                "+                    maxY = glyphRun.originY;",
                "+                }",
                "+            }",
                "+        }",
                "+        return rows;",
                "+    }",
                "+",
                "+    private static String getVal(String localName, Attributes atts) {",
                "+        for (int i = 0; i < atts.getLength(); i++) {",
                "+            if (localName.equals(atts.getLocalName(i))) {",
                "+                return atts.getValue(i);",
                "+            }",
                "+        }",
                "+        return null;",
                "+    }",
                "+",
                "+    final static class GlyphRun {",
                "+",
                "+        private enum DIRECTION {",
                "+            LTR,",
                "+            RTL",
                "+        }",
                "+",
                "+        //TODO: use name in conjunction with Frag information",
                "+        //to do a better job of extracting paragraph and table structure",
                "+        private final String name;",
                "+        private final float originY;",
                "+        private final float originX;//not currently used, but could be used for bidi text calculations",
                "+        private final String unicodeString;",
                "+        private final String indicesString;//not currently used, but could be used for width calculations",
                "+",
                "+        //not used yet",
                "+        private final DIRECTION direction;",
                "+",
                "+        private GlyphRun(String name, float originY, float originX, String unicodeString, Integer bidiLevel, String indicesString) {",
                "+            this.name = name;",
                "+            this.unicodeString = unicodeString;",
                "+            this.originY = originY;",
                "+            this.originX = originX;",
                "+            if (bidiLevel == null) {",
                "+                direction = DIRECTION.LTR;",
                "+            } else {",
                "+                if (bidiLevel % 2 == 0) {",
                "+                    direction = DIRECTION.LTR;",
                "+                } else {",
                "+                    direction = DIRECTION.RTL;",
                "+                }",
                "+            }",
                "+            this.indicesString = indicesString;",
                "+        }",
                "+    }",
                "+",
                "+}",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSTextExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSTextExtractor.java",
                "new file mode 100644",
                "index 000000000..30aaf0f3f",
                "--- /dev/null",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSTextExtractor.java",
                "@@ -0,0 +1,66 @@",
                "+/*",
                "+ * Licensed to the Apache Software Foundation (ASF) under one or more",
                "+ * contributor license agreements.  See the NOTICE file distributed with",
                "+ * this work for additional information regarding copyright ownership.",
                "+ * The ASF licenses this file to You under the Apache License, Version 2.0",
                "+ * (the \"License\"); you may not use this file except in compliance with",
                "+ * the License.  You may obtain a copy of the License at",
                "+ *",
                "+ *     http://www.apache.org/licenses/LICENSE-2.0",
                "+ *",
                "+ * Unless required by applicable law or agreed to in writing, software",
                "+ * distributed under the License is distributed on an \"AS IS\" BASIS,",
                "+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "+ * See the License for the specific language governing permissions and",
                "+ * limitations under the License.",
                "+ */",
                "+",
                "+package org.apache.tika.parser.microsoft.ooxml.xps;",
                "+",
                "+import org.apache.poi.POIXMLDocument;",
                "+import org.apache.poi.POIXMLProperties;",
                "+import org.apache.poi.POIXMLTextExtractor;",
                "+import org.apache.poi.openxml4j.exceptions.OpenXML4JException;",
                "+import org.apache.poi.openxml4j.opc.OPCPackage;",
                "+import org.apache.xmlbeans.XmlException;",
                "+",
                "+import java.io.IOException;",
                "+",
                "+/**",
                "+ * Currently, mostly a pass-through class to hold pkg and properties",
                "+ * and keep the general framework similar to our other POI-integrated",
                "+ * extractors.",
                "+ */",
                "+public class XPSTextExtractor extends POIXMLTextExtractor {",
                "+",
                "+    private final OPCPackage pkg;",
                "+    private final POIXMLProperties properties;",
                "+",
                "+    public XPSTextExtractor(OPCPackage pkg) throws OpenXML4JException, XmlException, IOException {",
                "+        super((POIXMLDocument)null);",
                "+        this.pkg = pkg;",
                "+        this.properties = new POIXMLProperties(pkg);",
                "+",
                "+    }",
                "+",
                "+    @Override",
                "+    public OPCPackage getPackage() {",
                "+        return pkg;",
                "+    }",
                "+",
                "+    @Override",
                "+    public String getText() {",
                "+        return null;",
                "+    }",
                "+    public POIXMLProperties.CoreProperties getCoreProperties() {",
                "+        return this.properties.getCoreProperties();",
                "+    }",
                "+",
                "+    public POIXMLProperties.ExtendedProperties getExtendedProperties() {",
                "+        return this.properties.getExtendedProperties();",
                "+    }",
                "+",
                "+    public POIXMLProperties.CustomProperties getCustomProperties() {",
                "+        return this.properties.getCustomProperties();",
                "+    }",
                "+}",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java",
                "index 9a5befa7f..4195fc7ea 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java",
                "@@ -66,2 +66,5 @@ public class ZipContainerDetector implements Detector {",
                "             \"http://purl.oclc.org/ooxml/officeDocument/relationships/officeDocument\";",
                "+",
                "+    private static final String XPS_DOCUMENT =",
                "+            \"http://schemas.microsoft.com/xps/2005/06/fixedrepresentation\";",
                "@@ -247,2 +250,5 @@ public class ZipContainerDetector implements Detector {",
                "+        if (coreType.contains(\".xps\")) {",
                "+            return MediaType.application(\"vnd.ms-package.xps\");",
                "+        }",
                "         // Turn that into the type of the overall document",
                "@@ -265,3 +271,3 @@ public class ZipContainerDetector implements Detector {",
                "      */",
                "-    private static MediaType detectXPSOPC(OPCPackage pkg) {",
                "+    public static MediaType detectXPSOPC(OPCPackage pkg) {",
                "         PackageRelationshipCollection xps = "
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/MetadataExtractor.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLExtractorFactory.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLParser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSExtractorDecorator.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSPageContentHandler.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/xps/XPSTextExtractor.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2524": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [
                [
                    "no-tag",
                    "533354d1a0e7e0b3b4ced7b7958f6e34041bf502"
                ]
            ],
            "tags": [
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "tika-1.28.2-rc1"
            ],
            "matched_rules": [
                {
                    "id": "COMMIT_HAS_TWINS",
                    "message": "This commit has one or more twins.",
                    "relevance": 2
                },
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2524",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "b071ab15e6f85ac200c01e7159634f054cdc932e",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512757244,
            "hunks": 1,
            "message": "add missing license headers.  THANK YOU RAT!",
            "diff": [
                "diff --git a/tika-core/src/main/java/org/apache/tika/exception/ZeroByteFileException.java b/tika-core/src/main/java/org/apache/tika/exception/ZeroByteFileException.java",
                "index b497f1d48..65e57e8c8 100644",
                "--- a/tika-core/src/main/java/org/apache/tika/exception/ZeroByteFileException.java",
                "+++ b/tika-core/src/main/java/org/apache/tika/exception/ZeroByteFileException.java",
                "@@ -1 +1,18 @@",
                "+/*",
                "+ * Licensed to the Apache Software Foundation (ASF) under one or more",
                "+ * contributor license agreements.  See the NOTICE file distributed with",
                "+ * this work for additional information regarding copyright ownership.",
                "+ * The ASF licenses this file to You under the Apache License, Version 2.0",
                "+ * (the \"License\"); you may not use this file except in compliance with",
                "+ * the License.  You may obtain a copy of the License at",
                "+ *",
                "+ *      http://www.apache.org/licenses/LICENSE-2.0",
                "+ *",
                "+ * Unless required by applicable law or agreed to in writing, software",
                "+ * distributed under the License is distributed on an \"AS IS\" BASIS,",
                "+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "+ * See the License for the specific language governing permissions and",
                "+ * limitations under the License.",
                "+ */",
                "+",
                " package org.apache.tika.exception;"
            ],
            "changed_files": [
                "tika-core/src/main/java/org/apache/tika/exception/ZeroByteFileException.java"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "ADV_KEYWORDS_IN_MSG",
                    "message": "The commit message and the advisory description contain the following keywords: header",
                    "relevance": 4
                }
            ]
        },
        {
            "commit_id": "94850f2e7c7d3df6a06a924fc6d643c0f6181643",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507727927,
            "hunks": 6,
            "message": "TIKA-2475 mods and some new tests/cleanup for CharsetDetector. This closes #210.",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "index cee709049..172cb46a1 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "@@ -10,2 +10,4 @@ package org.apache.tika.parser.txt;",
                "+import org.apache.poi.util.IOUtils;",
                "+",
                " import java.io.IOException;",
                "@@ -192,4 +194,8 @@ public class CharsetDetector {",
                "     public CharsetDetector setText(byte[] in) {",
                "+        return setText(in, in.length);",
                "+    }",
                "+",
                "+    private CharsetDetector setText(byte[] in, int length) {",
                "         fRawInput = in;",
                "-        fRawLength = in.length;",
                "+        fRawLength = length;",
                "@@ -219,15 +225,19 @@ public class CharsetDetector {",
                "         //   in which case we can't touch it.",
                "-        int length = 0;",
                "-        int remainingLength = kBufSize;",
                "-        while (remainingLength > 0) {",
                "-            // read() may give data in smallish chunks, esp. for remote sources.  Hence, this loop.",
                "-            int bytesRead = fInputStream.read(inputBytes, length, remainingLength);",
                "-            if (bytesRead <= 0) {",
                "-                break;",
                "+        long bytesRead = -1;",
                "+        try {",
                "+            bytesRead = IOUtils.readFully(fInputStream, inputBytes);",
                "+            if (bytesRead >= Integer.MAX_VALUE) {",
                "+                throw new IOException(\"Can't have read > Integer.MAX_VALUE bytes\");",
                "             }",
                "-            remainingLength -= bytesRead;",
                "+        } finally {",
                "+            fInputStream.reset();",
                "         }",
                "-        fInputStream.reset();",
                "-        return setText(inputBytes);",
                "+        if (bytesRead < 1) {",
                "+            return setText(new byte[0]);",
                "+        } else if ( kBufSize > bytesRead) {",
                "+            return setText(inputBytes, (int)bytesRead);",
                "+        } else {",
                "+            return setText(inputBytes);",
                "+        }",
                "     }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2475": ""
            },
            "ghissue_refs": {
                "210": ""
            },
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2475",
                    "relevance": 2
                },
                {
                    "id": "GITHUB_ISSUE_IN_MESSAGE",
                    "message": "The commit message references some github issue: 210",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "0b9aa9b5efde795f6b863c987abff5be07530a41",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1515968999,
            "hunks": 3,
            "message": "TIKA-2509: Updated to use configured ImageMagick path",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index 1bf229bbc..15d3c58fe 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -156,3 +156,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "         // Fetch where the config says to find ImageMagick Program",
                "-        String ImageMagick = config.getImageMagickPath() + getImageMagickProg();",
                "+        String ImageMagick = getImageMagickPath(config);",
                "@@ -172,2 +172,6 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "+    private String getImageMagickPath(TesseractOCRConfig config) {",
                "+        return config.getImageMagickPath() + getImageMagickProg();",
                "+    }",
                "+",
                "     static boolean hasPython() {",
                "@@ -341,3 +345,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "         // process the image - parameter values can be set in TesseractOCRConfig.properties",
                "-    \tString line = \"convert -density \" + config.getDensity() + \" -depth \" + config.getDepth() + ",
                "+    \tString line = getImageMagickPath(config) + \" -density \" + config.getDensity() + \" -depth \" + config.getDepth() +",
                "     \t\t\t\" -colorspace \" + config.getColorspace() +  \" -filter \" + config.getFilter() + "
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2509": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2509",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "fe97b16c5e93f16eb4ee00671d2b76e4e5a3bb6d",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516738870,
            "hunks": 4,
            "message": "TIKA-2535 -- but get it right... in tika-bundle and tika-java7",
            "diff": [
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index e5a77f681..924123e92 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -170,5 +170,5 @@",
                "               sis-storage|",
                "+              unit-api|",
                "               apache-mime4j-core|",
                "               apache-mime4j-dom|",
                "-              jsr-275|",
                "               jhighlight|",
                "@@ -256,3 +256,8 @@",
                "               org.apache.sis.distance;resolution:=optional,",
                "+              org.apache.sis.feature;resolution:=optional,",
                "               org.apache.sis.geometry;resolution:=optional,",
                "+              org.apache.sis.internal.feature;resolution:=optional,",
                "+              org.apache.sis.internal.referencing;resolution:=optional,",
                "+              org.apache.sis.parameter;resolution:=optional,",
                "+              org.apache.sis.referencing;resolution:=optional,",
                "               org.apache.tools.ant;resolution:=optional,"
            ],
            "changed_files": [
                "tika-bundle/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2535": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "tika-1.28.2-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2535",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "27a9c4069b6c1965d04a2a97d3c9a7ec131ff7e5",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1517423588,
            "hunks": 15,
            "message": "TIKA-2547 -- RFC822 with multipart/mixed, first text element should be treated      as the main body of the email, not an attachment.",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "index ee3d2e4b5..c2ae6153c 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "@@ -35,2 +35,3 @@ import org.apache.james.mime4j.stream.BodyDescriptor;",
                " import org.apache.james.mime4j.stream.Field;",
                "+import org.apache.tika.detect.Detector;",
                " import org.apache.tika.exception.TikaException;",
                "@@ -149,2 +150,3 @@ class MailContentHandler implements ContentHandler {",
                "     private final EmbeddedDocumentExtractor extractor;",
                "+    private final Detector detector;",
                "@@ -169,2 +171,3 @@ class MailContentHandler implements ContentHandler {",
                "         this.extractor = EmbeddedDocumentUtil.getEmbeddedDocumentExtractor(context);",
                "+        this.detector = new EmbeddedDocumentUtil(context).getDetector();",
                "     }",
                "@@ -186,3 +189,3 @@ class MailContentHandler implements ContentHandler {",
                "             submd.set(Message.MULTIPART_BOUNDARY, parts.peek().getBoundary());",
                "-        }   ",
                "+        }",
                "         if (body instanceof MaximalBodyDescriptor) {",
                "@@ -191,7 +194,7 @@ class MailContentHandler implements ContentHandler {",
                "             if (contentDispositionType != null && !contentDispositionType.isEmpty()) {",
                "-                StringBuilder contentDisposition = new StringBuilder( contentDispositionType );",
                "+                StringBuilder contentDisposition = new StringBuilder(contentDispositionType);",
                "                 Map<String, String> contentDispositionParameters = maximalBody.getContentDispositionParameters();",
                "-                for ( Entry<String, String> param : contentDispositionParameters.entrySet() ) {",
                "+                for (Entry<String, String> param : contentDispositionParameters.entrySet()) {",
                "                     contentDisposition.append(\"; \")",
                "-                                      .append(param.getKey()).append(\"=\\\"\").append(param.getValue()).append('\"');",
                "+                            .append(param.getKey()).append(\"=\\\"\").append(param.getValue()).append('\"');",
                "                 }",
                "@@ -199,7 +202,7 @@ class MailContentHandler implements ContentHandler {",
                "                 String contentDispositionFileName = maximalBody.getContentDispositionFilename();",
                "-                if ( contentDispositionFileName != null ) {",
                "-                    submd.set( TikaCoreProperties.RESOURCE_NAME_KEY, contentDispositionFileName );",
                "+                if (contentDispositionFileName != null) {",
                "+                    submd.set(TikaCoreProperties.RESOURCE_NAME_KEY, contentDispositionFileName);",
                "                 }",
                "-                submd.set( Metadata.CONTENT_DISPOSITION, contentDisposition.toString() );",
                "+                submd.set(Metadata.CONTENT_DISPOSITION, contentDisposition.toString());",
                "             }",
                "@@ -208,3 +211,3 @@ class MailContentHandler implements ContentHandler {",
                "         //add the bodypart to the latest that was added",
                "-        if (! extractAllAlternatives && alternativePartBuffer.size() > 0) {",
                "+        if (!extractAllAlternatives && alternativePartBuffer.size() > 0) {",
                "             ByteArrayOutputStream bos = new ByteArrayOutputStream();",
                "@@ -212,2 +215,18 @@ class MailContentHandler implements ContentHandler {",
                "             alternativePartBuffer.peek().children.add(new BodyContents(submd, bos.toByteArray()));",
                "+        } else if (!extractAllAlternatives && parts.size() == 1) {",
                "+            //if you're at the first level of embedding",
                "+            //and you're not in an alternative part block",
                "+            //and you're text/html, put that in the body of the email",
                "+            //otherwise treat as a regular attachment",
                "+            ByteArrayOutputStream bos = new ByteArrayOutputStream();",
                "+            IOUtils.copy(is, bos);",
                "+            byte[] bytes = bos.toByteArray();",
                "+            if (isTextOrHtml(submd, bytes)) {",
                "+                handleInlineBodyPart(new BodyContents(submd, bos.toByteArray()));",
                "+            } else {",
                "+                //else handle as you would any other embedded content",
                "+                try (TikaInputStream tis = TikaInputStream.get(bytes)) {",
                "+                    handleEmbedded(tis, submd);",
                "+                }",
                "+            }",
                "         } else {",
                "@@ -220,2 +239,18 @@ class MailContentHandler implements ContentHandler {",
                "+    private boolean isTextOrHtml(Metadata submd, byte[] bytes) {",
                "+        String mediaTypeString = submd.get(Metadata.CONTENT_TYPE);",
                "+        if (mediaTypeString != null && mediaTypeString.startsWith(\"text\")) {",
                "+            return true;",
                "+        }",
                "+        try (TikaInputStream tis = TikaInputStream.get(bytes)) {",
                "+            MediaType mediaType = detector.detect(tis, submd);",
                "+            if (mediaType != null && mediaType.toString().startsWith(\"text\")) {",
                "+                return true;",
                "+            }",
                "+        } catch (IOException e) {",
                "+",
                "+        }",
                "+        return false;",
                "+    }",
                "+",
                "     private void handleEmbedded(TikaInputStream tis, Metadata metadata) throws MimeException, IOException {",
                "@@ -520,3 +555,3 @@ class MailContentHandler implements ContentHandler {",
                "         if (part instanceof BodyContents) {",
                "-            handlePart((BodyContents)part);",
                "+            handleInlineBodyPart((BodyContents)part);",
                "             return;",
                "@@ -543,3 +578,3 @@ class MailContentHandler implements ContentHandler {",
                "-    private void handlePart(BodyContents part) throws MimeException, IOException {",
                "+    private void handleInlineBodyPart(BodyContents part) throws MimeException, IOException {",
                "         String contentType = part.metadata.get(Metadata.CONTENT_TYPE);",
                "@@ -559,2 +594,3 @@ class MailContentHandler implements ContentHandler {",
                "         if (parser == null) {",
                "+            //back off and treat it as an embedded chunk",
                "             try (TikaInputStream tis = TikaInputStream.get(part.bytes)) {"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2547": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2547",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "1047f64c7c814fac40b9b8669fb70577f96cc3e3",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1509191451,
            "hunks": 7,
            "message": "TIKA 2400 : Changing environment of python scripts to python2",
            "diff": [
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "index 50d1de837..9dc13e4b6 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "index 32fbf6a71..97f1f2afd 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "index c075f4b7f..a542e7b9a 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "index 554fa8783..566b034cb 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "index cd33fc0a5..b6644160f 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "index c28e241d4..09d830c0d 100755",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "index 7aefc46fe..a4c208bf9 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "@@ -1,17 +1,16 @@",
                "-#!/usr/bin/env python3",
                "-#",
                "-# Licensed to the Apache Software Foundation (ASF) under one or more",
                "-# contributor license agreements.  See the NOTICE file distributed with",
                "-# this work for additional information regarding copyright ownership.",
                "-# The ASF licenses this file to You under the Apache License, Version 2.0",
                "-# (the \"License\"); you may not use this file except in compliance with",
                "-# the License.  You may obtain a copy of the License at",
                "-#",
                "-#     http://www.apache.org/licenses/LICENSE-2.0",
                "-#",
                "-# Unless required by applicable law or agreed to in writing, software",
                "-# distributed under the License is distributed on an \"AS IS\" BASIS,",
                "-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "-# See the License for the specific language governing permissions and",
                "-# limitations under the License.",
                "+#!/usr/bin/env python",
                "+#  Licensed to the Apache Software Foundation (ASF) under one",
                "+#  or more contributor license agreements.  See the NOTICE file",
                "+#  distributed with this work for additional information",
                "+#  regarding copyright ownership.  The ASF licenses this file",
                "+#  to you under the Apache License, Version 2.0 (the",
                "+#  \"License\"); you may not use this file except in compliance",
                "+#  with the License.  You may obtain a copy of the License at",
                "+#    http://www.apache.org/licenses/LICENSE-2.0",
                "+#  Unless required by applicable law or agreed to in writing,",
                "+#  software distributed under the License is distributed on an",
                "+#  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY",
                "+#  KIND, either express or implied.  See the License for the",
                "+#  specific language governing permissions and limitations",
                "+#  under the License."
            ],
            "changed_files": [
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [
                [
                    "no-tag",
                    "690c74435bde80d8c69af220f5ba3c1d4d4f5407"
                ]
            ],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "COMMIT_HAS_TWINS",
                    "message": "This commit has one or more twins.",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "1ba30ef32fee372566790650e9ab8a36bc9ab807",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516891584,
            "hunks": 4,
            "message": "TIKA-2554 Separate out Config formats from text/plain to a specific subtype",
            "diff": [
                "diff --git a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "index 0a31c65a6..e35c13305 100644",
                "--- a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "+++ b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "@@ -5874,2 +5874,10 @@",
                "+  <mime-type type=\"text/x-config\">",
                "+    <glob pattern=\"*.config\"/>",
                "+    <glob pattern=\"*.conf\"/>",
                "+    <glob pattern=\"*.cfg\"/>",
                "+    <glob pattern=\"*.xconf\"/>",
                "+    <sub-class-of type=\"text/plain\"/>",
                "+  </mime-type>",
                "+",
                "   <mime-type type=\"text/css\">",
                "@@ -5982,4 +5990,2 @@",
                "     <glob pattern=\"*.text\"/>",
                "-    <glob pattern=\"*.conf\"/>",
                "-    <glob pattern=\"*.cfg\"/>",
                "     <glob pattern=\"*.def\"/>",
                "@@ -5998,3 +6004,2 @@",
                "     <glob pattern=\"*.classpath\"/>",
                "-    <glob pattern=\"*.config\"/>",
                "     <glob pattern=\"*.cwiki\"/>",
                "@@ -6034,3 +6039,2 @@",
                "     <glob pattern=\"*.xcat\"/>",
                "-    <glob pattern=\"*.xconf\"/>",
                "     <glob pattern=\"*.xegrm\"/>"
            ],
            "changed_files": [
                "tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2554": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2554",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "db75e85fc9cf0d5f2c25f7eae2ff8deb59611b00",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516891348,
            "hunks": 2,
            "message": "TIKA-2554 Separate out Makefile from text/plain to a specific subtype",
            "diff": [
                "diff --git a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "index 98c77eedd..0a31c65a6 100644",
                "--- a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "+++ b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "@@ -5947,2 +5947,18 @@",
                "+  <mime-type type=\"text/x-makefile\">",
                "+    <_comment>Makefile build file</_comment>",
                "+    <magic priority=\"20\">",
                "+      <!-- Only magic for default autoconf/automake produced ones -->",
                "+      <match value=\"# Makefile.in generated by\" type=\"string\" offset=\"0\"/>",
                "+      <!-- Not exhaustive, and most people don't set this! -->",
                "+      <match value=\"#!make\" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"#!/usr/bin/make\" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"#!/usr/local/bin/make\" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"#!/usr/bin/env make\" type=\"string\" offset=\"0\"/>",
                "+    </magic>",
                "+    <glob pattern=\"Makefile\"/>",
                "+    <glob pattern=\"GNUMakefile\"/>",
                "+    <sub-class-of type=\"text/plain\"/>",
                "+  </mime-type>",
                "+",
                "   <mime-type type=\"text/parityfec\"/>",
                "@@ -5975,3 +5991,2 @@",
                "     <glob pattern=\"KEYS\"/>",
                "-    <glob pattern=\"Makefile\"/>",
                "     <glob pattern=\"README\"/>"
            ],
            "changed_files": [
                "tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2554": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2554",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "b1d80bd7a649e90b225b2769c8affc4809a9cb9b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507641567,
            "hunks": 5,
            "message": "[TIKA-2472] Reimplementing Metadata.hashCode using the AbstractMap code but with Arrays.hashCode as suggested by Ken",
            "diff": [
                "diff --git a/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java b/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "index 217eb013f..03f9cfc05 100644",
                "--- a/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "+++ b/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "@@ -24,2 +24,3 @@ import java.text.DateFormatSymbols;",
                " import java.text.SimpleDateFormat;",
                "+import java.util.Arrays;",
                " import java.util.Calendar;",
                "@@ -28,4 +29,7 @@ import java.util.Enumeration;",
                " import java.util.HashMap;",
                "+import java.util.Iterator;",
                " import java.util.Locale;",
                " import java.util.Map;",
                "+import java.util.Map.Entry;",
                "+import java.util.Objects;",
                " import java.util.Properties;",
                "@@ -485,6 +489,16 @@ public class Metadata implements CreativeCommons, Geographic, HttpHeaders,",
                "     public int hashCode() {",
                "-        return metadata.hashCode();",
                "+        int h = 0;",
                "+        for (Iterator<Entry<String,String[]>> i = metadata.entrySet().iterator();",
                "+             i.hasNext();) {",
                "+            h += getMetadataEntryHashCode(i.next());",
                "+        }",
                "+        return h;",
                "     }",
                "-    public boolean equals(Object o) {",
                "+    private int getMetadataEntryHashCode(Entry<String, String[]> e) {",
                "+    \treturn Objects.hashCode(e.getKey()) ",
                "+            ^ (e.getValue() == null ? 0 : Arrays.hashCode(e.getValue()));",
                "+\t}",
                "+",
                "+\tpublic boolean equals(Object o) {"
            ],
            "changed_files": [
                "tika-core/src/main/java/org/apache/tika/metadata/Metadata.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2472": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2472",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "214b8923fdf0dae1e6866d5b75f4780306842c0d",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1515969072,
            "hunks": 1,
            "message": "TIKA-2509: Updated to ignore python warnings during rotation script",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index 15d3c58fe..08847fd74 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -325,3 +325,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "-    \tString cmd = \"python \" + rotationScript.getAbsolutePath() + \" -f \" + streamingObject.getAbsolutePath();",
                "+    \tString cmd = \"python -W ignore \" + rotationScript.getAbsolutePath() + \" -f \" + streamingObject.getAbsolutePath();",
                "     \tString angle = \"0\"; "
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2509": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2509",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "1f28f464e91300cfd50f881ac37fd6d467d5dc7a",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508803665,
            "hunks": 0,
            "message": "Merge branch 'TIKA-1788' of https://github.com/AarjavP/tika into aarjavp-TIKA-1788",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1788": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1788",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "50295be0e1cd434228ac588a0299718c512436e8",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512105251,
            "hunks": 5,
            "message": "TIKA-2385: Removed deprecated call",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index 2fba798fc..1bf229bbc 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -24,4 +24,2 @@ import java.awt.Image;",
                " import java.awt.image.BufferedImage;",
                "-import java.io.BufferedReader;",
                "-import java.io.BufferedWriter;",
                " import java.io.ByteArrayOutputStream;",
                "@@ -30,3 +28,2 @@ import java.io.FileInputStream;",
                " import java.io.FileOutputStream;",
                "-import java.io.FileWriter;",
                " import java.io.IOException;",
                "@@ -34,3 +31,5 @@ import java.io.InputStream;",
                " import java.io.InputStreamReader;",
                "+import java.io.OutputStreamWriter;",
                " import java.io.Reader;",
                "+import java.nio.charset.Charset;",
                " import java.nio.file.Files;",
                "@@ -181,3 +180,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "             String prg = \"import numpy, matplotlib, skimage\";",
                "-            BufferedWriter out = new BufferedWriter(new FileWriter(importCheck));",
                "+            OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream(importCheck), Charset.forName(\"UTF-8\"));",
                "             out.write(prg);"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2385": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2385",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "54bce0877c565721ec679b54711b0690012d0a3f",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1517408969,
            "hunks": 7,
            "message": "TIKA-2556: Swap out com.tdunning:json for com.github.openjson:openjson to avoid jar conflicts.",
            "diff": [
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index 924123e92..6ba9338d0 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -208,2 +208,3 @@",
                "               com.adobe.xmp.properties;resolution:=optional,",
                "+              com.github.openjson;resolution:=optional,",
                "               com.google.protobuf;resolution:=optional,",
                "@@ -302,3 +303,2 @@",
                "               org.json.simple;resolution:=optional,",
                "-              org.json;resolution:=optional,",
                "               org.openxmlformats.schemas.officeDocument.x2006.math;resolution:=optional,",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index a214f39a3..14f46b431 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -339,3 +339,3 @@",
                "-    <dependency>",
                "+<!--    <dependency>",
                "       <groupId>com.tdunning</groupId>",
                "@@ -343,2 +343,7 @@",
                "       <version>1.8</version>",
                "+    </dependency> -->",
                "+    <dependency>",
                "+      <groupId>com.github.openjson</groupId>",
                "+      <artifactId>openjson</artifactId>",
                "+      <version>1.0.10</version>",
                "     </dependency>",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "index 6e9e85441..05ef89f61 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "@@ -31,4 +31,4 @@ import org.apache.tika.io.IOUtils;",
                " import org.apache.tika.parser.ner.NERecogniser;",
                "-import org.json.JSONException;",
                "-import org.json.JSONObject;",
                "+import com.github.openjson.JSONException;",
                "+import com.github.openjson.JSONObject;",
                " import org.slf4j.Logger;",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "index c83ea1eb0..41e2d0072 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "@@ -48,4 +48,4 @@ import org.apache.tika.parser.recognition.ObjectRecogniser;",
                " import org.apache.tika.parser.recognition.RecognisedObject;",
                "-import org.json.JSONArray;",
                "-import org.json.JSONObject;",
                "+import com.github.openjson.JSONArray;",
                "+import com.github.openjson.JSONObject;",
                " import org.slf4j.Logger;",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java",
                "index 2e7b1f156..6b1ad8655 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java",
                "@@ -49,4 +49,4 @@ import org.apache.tika.parser.ParseContext;",
                " import org.apache.tika.parser.recognition.RecognisedObject;",
                "-import org.json.JSONArray;",
                "-import org.json.JSONObject;",
                "+import com.github.openjson.JSONArray;",
                "+import com.github.openjson.JSONObject;",
                " import org.slf4j.Logger;"
            ],
            "changed_files": [
                "tika-bundle/pom.xml",
                "tika-parsers/pom.xml",
                "tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2556": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "tika-1.28.2-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2556",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "40e99f986f9cd8ab390f189a484c42e81994a911",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507725869,
            "hunks": 0,
            "message": "Merge branch 'TIKA-2475' of https://github.com/seanstory/tika into seanstory-TIKA-2475",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2475": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2475",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "c009dc71cc8428e0a752100af7e9d18d7e5e3096",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1509630070,
            "hunks": 19,
            "message": "TIKA-2485 -- Allow configuration of markLimit in EncodingDetectors via tika-config.xml",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/html/HtmlEncodingDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/html/HtmlEncodingDetector.java",
                "index 1ebe07653..559ec4d82 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/html/HtmlEncodingDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/html/HtmlEncodingDetector.java",
                "@@ -25,2 +25,3 @@ import java.util.regex.Pattern;",
                "+import org.apache.tika.config.Field;",
                " import org.apache.tika.detect.EncodingDetector;",
                "@@ -41,3 +42,3 @@ public class HtmlEncodingDetector implements EncodingDetector {",
                "     // TIKA-357 - use bigger buffer for meta tag sniffing (was 4K)",
                "-    private static final int META_TAG_BUFFER_SIZE = 8192;",
                "+    private static final int DEFAULT_MARK_LIMIT = 8192;",
                "@@ -64,2 +65,5 @@ public class HtmlEncodingDetector implements EncodingDetector {",
                "+    @Field",
                "+    private int markLimit = DEFAULT_MARK_LIMIT;",
                "+",
                "     public Charset detect(InputStream input, Metadata metadata)",
                "@@ -71,4 +75,4 @@ public class HtmlEncodingDetector implements EncodingDetector {",
                "         // Read enough of the text stream to capture possible meta tags",
                "-        input.mark(META_TAG_BUFFER_SIZE);",
                "-        byte[] buffer = new byte[META_TAG_BUFFER_SIZE];",
                "+        input.mark(markLimit);",
                "+        byte[] buffer = new byte[markLimit];",
                "         int n = 0;",
                "@@ -122,2 +126,16 @@ public class HtmlEncodingDetector implements EncodingDetector {",
                "+    /**",
                "+     * How far into the stream to read for charset detection.",
                "+     * Default is 8192.",
                "+     *",
                "+     * @param markLimit",
                "+     */",
                "+    @Field",
                "+    public void setMarkLimit(int markLimit) {",
                "+        this.markLimit = markLimit;",
                "+    }",
                "+",
                "+    public int getMarkLimit() {",
                "+        return markLimit;",
                "+    }",
                " }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "index 172cb46a1..b1906e92e 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "@@ -55,4 +55,6 @@ public class CharsetDetector {",
                "-    private static final int kBufSize = 12000;//This is a Tika modification; ICU's is 8000",
                "     private static final int MAX_CONFIDENCE = 100;",
                "+",
                "+    static final int DEFAULT_MARK_LIMIT = 12000; //This is a Tika modification; ICU's is 8000",
                "+",
                "     /*",
                "@@ -114,4 +116,5 @@ public class CharsetDetector {",
                "      */",
                "-    byte[] fInputBytes =       // The text to be checked.  Markup will have been",
                "-            new byte[kBufSize];  //   removed if appropriate.",
                "+    final byte[] fInputBytes;  // The text to be checked.  Markup will have been",
                "+                               // removed if appropriate.",
                "+",
                "     int fInputLen;          // Length of the byte data in fInputBytes.",
                "@@ -135,2 +138,4 @@ public class CharsetDetector {",
                "+    private final int kBufSize;",
                "+",
                "     /**",
                "@@ -141,2 +146,8 @@ public class CharsetDetector {",
                "     public CharsetDetector() {",
                "+        this(DEFAULT_MARK_LIMIT);",
                "+    }",
                "+",
                "+    public CharsetDetector(int markLimit) {",
                "+        kBufSize = markLimit;",
                "+        fInputBytes = new byte[kBufSize];",
                "     }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/txt/Icu4jEncodingDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/txt/Icu4jEncodingDetector.java",
                "index b811a1da8..4a2c56b98 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/txt/Icu4jEncodingDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/txt/Icu4jEncodingDetector.java",
                "@@ -33,2 +33,5 @@ public class Icu4jEncodingDetector implements EncodingDetector {",
                "+    @Field",
                "+    private int markLimit = CharsetDetector.DEFAULT_MARK_LIMIT;",
                "+",
                "     public Charset detect(InputStream input, Metadata metadata)",
                "@@ -39,3 +42,3 @@ public class Icu4jEncodingDetector implements EncodingDetector {",
                "-        CharsetDetector detector = new CharsetDetector();",
                "+        CharsetDetector detector = new CharsetDetector(markLimit);",
                "@@ -96,2 +99,17 @@ public class Icu4jEncodingDetector implements EncodingDetector {",
                "     }",
                "+",
                "+    /**",
                "+     * How far into the stream to read for charset detection.",
                "+     * Default is 12000.",
                "+     *",
                "+     * @param markLimit",
                "+     */",
                "+    @Field",
                "+    public void setMarkLimit(int markLimit) {",
                "+        this.markLimit = markLimit;",
                "+    }",
                "+",
                "+    public int getMarkLimit() {",
                "+        return markLimit;",
                "+    }",
                " }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/txt/UniversalEncodingDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/txt/UniversalEncodingDetector.java",
                "index fc3fb0437..1b9108a22 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/txt/UniversalEncodingDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/txt/UniversalEncodingDetector.java",
                "@@ -22,2 +22,3 @@ import java.nio.charset.Charset;",
                "+import org.apache.tika.config.Field;",
                " import org.apache.tika.detect.EncodingDetector;",
                "@@ -29,3 +30,5 @@ public class UniversalEncodingDetector implements EncodingDetector {",
                "-    private static final int LOOKAHEAD = 16 * BUFSIZE;",
                "+    private static final int DEFAULT_MARK_LIMIT = 16 * BUFSIZE;",
                "+",
                "+    private int markLimit = DEFAULT_MARK_LIMIT;",
                "@@ -37,3 +40,3 @@ public class UniversalEncodingDetector implements EncodingDetector {",
                "-        input.mark(LOOKAHEAD);",
                "+        input.mark(markLimit);",
                "         try {",
                "@@ -45,6 +48,6 @@ public class UniversalEncodingDetector implements EncodingDetector {",
                "             int m = input.read(b);",
                "-            while (m != -1 && n < LOOKAHEAD && !listener.isDone()) {",
                "+            while (m != -1 && n < markLimit && !listener.isDone()) {",
                "                 n += m;",
                "                 listener.handleData(b, 0, m);",
                "-                m = input.read(b, 0, Math.min(b.length, LOOKAHEAD - n));",
                "+                m = input.read(b, 0, Math.min(b.length,markLimit - n));",
                "             }",
                "@@ -59,2 +62,16 @@ public class UniversalEncodingDetector implements EncodingDetector {",
                "+    /**",
                "+     * How far into the stream to read for charset detection.",
                "+     * Default is 8192.",
                "+     *",
                "+     * @param markLimit",
                "+     */",
                "+    @Field",
                "+    public void setMarkLimit(int markLimit) {",
                "+        this.markLimit = markLimit;",
                "+    }",
                "+",
                "+    public int getMarkLimit() {",
                "+        return markLimit;",
                "+    }",
                " }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/html/HtmlEncodingDetector.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/txt/Icu4jEncodingDetector.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/txt/UniversalEncodingDetector.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2485": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2485",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "2922511b5d1662654921a2e02599324aae4a84f4",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1515971254,
            "hunks": 4,
            "message": "TIKA-2509: Updated TesseractOCRParser to use configured ImageMagick path",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index 1bf229bbc..08847fd74 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -156,3 +156,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "         // Fetch where the config says to find ImageMagick Program",
                "-        String ImageMagick = config.getImageMagickPath() + getImageMagickProg();",
                "+        String ImageMagick = getImageMagickPath(config);",
                "@@ -172,2 +172,6 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "+    private String getImageMagickPath(TesseractOCRConfig config) {",
                "+        return config.getImageMagickPath() + getImageMagickProg();",
                "+    }",
                "+",
                "     static boolean hasPython() {",
                "@@ -321,3 +325,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "-    \tString cmd = \"python \" + rotationScript.getAbsolutePath() + \" -f \" + streamingObject.getAbsolutePath();",
                "+    \tString cmd = \"python -W ignore \" + rotationScript.getAbsolutePath() + \" -f \" + streamingObject.getAbsolutePath();",
                "     \tString angle = \"0\"; ",
                "@@ -341,3 +345,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "         // process the image - parameter values can be set in TesseractOCRConfig.properties",
                "-    \tString line = \"convert -density \" + config.getDensity() + \" -depth \" + config.getDepth() + ",
                "+    \tString line = getImageMagickPath(config) + \" -density \" + config.getDensity() + \" -depth \" + config.getDepth() +",
                "     \t\t\t\" -colorspace \" + config.getColorspace() +  \" -filter \" + config.getFilter() + "
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2509": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "tika-1.28.2-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2509",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "04b0837700e7d0ecc337a50ca99d2a063978a58b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510155500,
            "hunks": 1,
            "message": "TIKA-2492 -- exclude pdfbox debugger from tika-bundle",
            "diff": [
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index f3a3834eb..cc6ed0d30 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -222,2 +222,3 @@",
                "               org.apache.jcp.xml.dsig.internal.dom;resolution:=optional,",
                "+              org.apache.pdfbox.debugger;resolution:=optional,",
                "               org.apache.sis;resolution:=optional,"
            ],
            "changed_files": [
                "tika-bundle/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2492": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2492",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "0452f9888388fbbdf9d3a466820bc6c99893f88f",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1517408969,
            "hunks": 7,
            "message": "TIKA-2556 -- Swap out com.tdunning:json for com.github.openjson:openjson to avoid jar conflicts",
            "diff": [
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index 27f070ce8..a15aad11b 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -208,2 +208,3 @@",
                "               com.adobe.xmp.properties;resolution:=optional,",
                "+              com.github.openjson;resolution:=optional,",
                "               com.google.protobuf;resolution:=optional,",
                "@@ -302,3 +303,2 @@",
                "               org.json.simple;resolution:=optional,",
                "-              org.json;resolution:=optional,",
                "               org.openxmlformats.schemas.officeDocument.x2006.math;resolution:=optional,",
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 81a5765db..5d85b70db 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -339,3 +339,3 @@",
                "-    <dependency>",
                "+<!--    <dependency>",
                "       <groupId>com.tdunning</groupId>",
                "@@ -343,2 +343,7 @@",
                "       <version>1.8</version>",
                "+    </dependency> -->",
                "+    <dependency>",
                "+      <groupId>com.github.openjson</groupId>",
                "+      <artifactId>openjson</artifactId>",
                "+      <version>1.0.10</version>",
                "     </dependency>",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "index 6e9e85441..05ef89f61 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "@@ -31,4 +31,4 @@ import org.apache.tika.io.IOUtils;",
                " import org.apache.tika.parser.ner.NERecogniser;",
                "-import org.json.JSONException;",
                "-import org.json.JSONObject;",
                "+import com.github.openjson.JSONException;",
                "+import com.github.openjson.JSONObject;",
                " import org.slf4j.Logger;",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "index c83ea1eb0..41e2d0072 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "@@ -48,4 +48,4 @@ import org.apache.tika.parser.recognition.ObjectRecogniser;",
                " import org.apache.tika.parser.recognition.RecognisedObject;",
                "-import org.json.JSONArray;",
                "-import org.json.JSONObject;",
                "+import com.github.openjson.JSONArray;",
                "+import com.github.openjson.JSONObject;",
                " import org.slf4j.Logger;",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java",
                "index 2e7b1f156..6b1ad8655 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java",
                "@@ -49,4 +49,4 @@ import org.apache.tika.parser.ParseContext;",
                " import org.apache.tika.parser.recognition.RecognisedObject;",
                "-import org.json.JSONArray;",
                "-import org.json.JSONObject;",
                "+import com.github.openjson.JSONArray;",
                "+import com.github.openjson.JSONObject;",
                " import org.slf4j.Logger;"
            ],
            "changed_files": [
                "tika-bundle/pom.xml",
                "tika-parsers/pom.xml",
                "tika-parsers/src/main/java/org/apache/tika/parser/ner/corenlp/CoreNLPNERecogniser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTRecogniser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/recognition/tf/TensorflowRESTVideoRecogniser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2556": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2556",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "dfb71874d5159f1d82502533ed71cb1ac187e831",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510001892,
            "hunks": 1,
            "message": "TIKA-2492 -- exclude pdfbox debugger",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 78825b385..4654b73f2 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -155,2 +155,6 @@",
                "         </exclusion>",
                "+        <exclusion>",
                "+        <groupId>org.apache.pdfbox</groupId>",
                "+        <artifactId>pdfbox-debugger</artifactId>",
                "+        </exclusion>",
                "       </exclusions>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2492": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2492",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "9653e77d935bb00b7a38be483991e8e185f751ff",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507835698,
            "hunks": 2,
            "message": "[TIKA-1788] Provide Content-Disposition metadata in embedded files",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "index 864890d78..7476347d5 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "@@ -29,2 +29,4 @@ import java.util.Date;",
                " import java.util.Locale;",
                "+import java.util.Map;",
                "+import java.util.Map.Entry;",
                " import java.util.TimeZone;",
                "@@ -156,5 +158,17 @@ class MailContentHandler implements ContentHandler {",
                "             MaximalBodyDescriptor maximalBody = (MaximalBodyDescriptor) body;",
                "-            String contentDispositionFileName = maximalBody.getContentDispositionFilename();",
                "-            if (contentDispositionFileName != null) {",
                "-                submd.set(Metadata.RESOURCE_NAME_KEY, contentDispositionFileName);",
                "+            String contentDispositionType = maximalBody.getContentDispositionType();",
                "+            if (contentDispositionType != null && !contentDispositionType.isEmpty()) {",
                "+                StringBuilder contentDisposition = new StringBuilder( contentDispositionType );",
                "+                Map<String, String> contentDispositionParameters = maximalBody.getContentDispositionParameters();",
                "+                for ( Entry<String, String> param : contentDispositionParameters.entrySet() ) {",
                "+                    contentDisposition.append(\"; \")",
                "+                                      .append(param.getKey()).append(\"=\\\"\").append(param.getValue()).append('\"');",
                "+                }",
                "+",
                "+                String contentDispositionFileName = maximalBody.getContentDispositionFilename();",
                "+                if ( contentDispositionFileName != null ) {",
                "+                    submd.set( Metadata.RESOURCE_NAME_KEY, contentDispositionFileName );",
                "+                }",
                "+",
                "+                submd.set( Metadata.CONTENT_DISPOSITION, contentDisposition.toString() );",
                "             }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1788": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1788",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "6fc2b7e7ffdd9ab4ffd4780ac24e9018292f066c",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508803688,
            "hunks": 0,
            "message": "Merge branch 'aarjavp-TIKA-1788'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1788": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1788",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "f0b6a17e5ae8b47a5b19c068e853d156775754de",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510597384,
            "hunks": 2,
            "message": "TIKA-2503.  Need to confirm this doesn't break anything",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 45d34a54b..e8899c387 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -424,4 +424,31 @@",
                "         </exclusion>",
                "+        <!-- exclude because of vulnerability TIKA-2499 -->",
                "+        <exclusion>",
                "+          <groupId>org.apache.httpcomponents</groupId>",
                "+          <artifactId>httpclient</artifactId>",
                "+        </exclusion>",
                "+        <exclusion>",
                "+          <groupId>org.apache.httpcomponents</groupId>",
                "+          <artifactId>httpmime</artifactId>",
                "+        </exclusion>",
                "       </exclusions>",
                "     </dependency>",
                "+    <!-- add back in for edu.ucar for httpservices -->",
                "+    <dependency>",
                "+      <groupId>org.apache.httpcomponents</groupId>",
                "+      <artifactId>httpclient</artifactId>",
                "+      <version>4.5.3</version>",
                "+      <exclusions>",
                "+        <exclusion>",
                "+          <groupId>commons-logging</groupId>",
                "+          <artifactId>commons-logging</artifactId>",
                "+        </exclusion>",
                "+      </exclusions>",
                "+    </dependency>",
                "+    <dependency>",
                "+      <groupId>org.apache.httpcomponents</groupId>",
                "+      <artifactId>httpmime</artifactId>",
                "+      <version>4.5.3</version>",
                "+    </dependency>",
                "+",
                "     <!-- Apache Commons CSV -->"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2503": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2503",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "ce4d94888557a08f0535038e1586f235af0065b3",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511812428,
            "hunks": 13,
            "message": "TIKA-2511 Cache TikaConfig in EmbeddedDocumentUtil for faster processing of files with lots of embedded files.",
            "diff": [
                "diff --git a/tika-core/src/main/java/org/apache/tika/extractor/EmbeddedDocumentUtil.java b/tika-core/src/main/java/org/apache/tika/extractor/EmbeddedDocumentUtil.java",
                "index 5e1f054d7..c03a8718b 100644",
                "--- a/tika-core/src/main/java/org/apache/tika/extractor/EmbeddedDocumentUtil.java",
                "+++ b/tika-core/src/main/java/org/apache/tika/extractor/EmbeddedDocumentUtil.java",
                "@@ -53,2 +53,3 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "+",
                "     private final ParseContext context;",
                "@@ -101,9 +102,12 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "     public Detector getDetector() {",
                "-        //be as lazy as possible and cache the detector",
                "-        if (detector == null) {",
                "-            detector = context.get(Detector.class);",
                "-            if (detector == null) {",
                "-                detector = getTikaConfig().getDetector();",
                "-            }",
                "+        //be as lazy as possible and cache",
                "+        Detector localDetector = context.get(Detector.class);",
                "+        if (localDetector != null) {",
                "+            return localDetector;",
                "         }",
                "+        if (detector != null) {",
                "+            return detector;",
                "+        }",
                "+",
                "+        detector = getTikaConfig().getDetector();",
                "         return detector;",
                "@@ -112,9 +116,11 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "     public MimeTypes getMimeTypes() {",
                "+        MimeTypes localMimeTypes = context.get(MimeTypes.class);",
                "         //be as lazy as possible and cache the mimeTypes",
                "-        if (mimeTypes == null) {",
                "-            mimeTypes = context.get(MimeTypes.class);",
                "-            if (mimeTypes == null) {",
                "-                mimeTypes = getTikaConfig().getMimeRepository();",
                "-            }",
                "+        if (localMimeTypes != null) {",
                "+            return localMimeTypes;",
                "+        }",
                "+        if (mimeTypes != null) {",
                "+            return mimeTypes;",
                "         }",
                "+        mimeTypes = getTikaConfig().getMimeRepository();",
                "         return mimeTypes;",
                "@@ -122,2 +128,8 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "+    /**",
                "+     * @return Returns a {@link TikaConfig} -- trying to find it first in the ParseContext",
                "+     * that was included during initialization, and then creating a new one from",
                "+     * via {@link TikaConfig#getDefaultConfig()} if it can't find one in the",
                "+     * ParseContext. This caches the default config so that it only has to be created once.",
                "+     */",
                "     public TikaConfig getTikaConfig() {",
                "@@ -135,5 +147,7 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "         String mimeString = metadata.get(Metadata.CONTENT_TYPE);",
                "-        TikaConfig config = getConfig();",
                "+",
                "+        //use the buffered mimetypes as default",
                "+        MimeTypes localMimeTypes = getMimeTypes();",
                "+",
                "         MimeType mimeType = null;",
                "-        MimeTypes types = config.getMimeRepository();",
                "         boolean detected = false;",
                "@@ -141,3 +155,3 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "             try {",
                "-                mimeType = types.forName(mimeString);",
                "+                mimeType = localMimeTypes.forName(mimeString);",
                "             } catch (MimeTypeException e) {",
                "@@ -147,6 +161,5 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "         if (mimeType == null) {",
                "-            Detector detector = config.getDetector();",
                "             try {",
                "-                MediaType mediaType = detector.detect(is, metadata);",
                "-                mimeType = types.forName(mediaType.toString());",
                "+                MediaType mediaType = getDetector().detect(is, metadata);",
                "+                mimeType = localMimeTypes.forName(mediaType.toString());",
                "                 detected = true;",
                "@@ -169,2 +182,11 @@ public class EmbeddedDocumentUtil implements Serializable {",
                "+    /**",
                "+     * @return Returns a {@link TikaConfig} -- trying to find it first in the ParseContext",
                "+     * that was included in the initialization, and then creating a new one from",
                "+     * via {@link TikaConfig#getDefaultConfig()} if it can't find one in the",
                "+     * ParseContext.",
                "+     *",
                "+     * @deprecated as of 1.17, use {@link #getTikaConfig()} instead",
                "+     */",
                "+    @Deprecated",
                "     public TikaConfig getConfig() {"
            ],
            "changed_files": [
                "tika-core/src/main/java/org/apache/tika/extractor/EmbeddedDocumentUtil.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2511": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2511",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "369a04ee2be4b28c2bed1f1119e8cb5805dbd9c8",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507718784,
            "hunks": 1,
            "message": "[TIKA-2476] Making sure the trailing space is not added",
            "diff": [
                "diff --git a/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java b/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "index 843aaab0f..18c0cf0b3 100644",
                "--- a/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "+++ b/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "@@ -540,3 +540,6 @@ public class Metadata implements CreativeCommons, Geographic, HttpHeaders,",
                "             for (int j = 0; j < values.length; j++) {",
                "-                buf.append(names[i]).append(\"=\").append(values[j]).append(\" \");",
                "+            \tif (buf.length() > 0) {",
                "+            \t\tbuf.append(\" \");",
                "+            \t}",
                "+                buf.append(names[i]).append(\"=\").append(values[j]);",
                "             }"
            ],
            "changed_files": [
                "tika-core/src/main/java/org/apache/tika/metadata/Metadata.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2476": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2476",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "537cfca9eae17a0270388810a557a8dc7faa0c30",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512085381,
            "hunks": 1,
            "message": "Merge branch 'TIKA-2835' of https://github.com/pmweiss/tika into TIKA-2385 Added check for Python dependencies to provide full check before attempting to run",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index 2f85bc08e..0b173931e 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -172,17 +172,16 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "     static boolean hasPython() {",
                "-    \t// check if python is installed and if the rotation program path has been specified correctly",
                "-        ",
                "-    \tboolean hasPython = false;",
                "-    \t",
                "-\t\ttry {",
                "-\t\t\tProcess proc = Runtime.getRuntime().exec(\"python -h\");",
                "-\t\t\tBufferedReader stdInput = new BufferedReader(new InputStreamReader(proc.getInputStream(), \"UTF-8\"));",
                "-\t\t\tif(stdInput.read() != -1) {",
                "-\t\t\t\thasPython = true;",
                "-\t\t\t}",
                "-\t\t} catch (IOException e) {",
                "-",
                "-\t\t} ",
                "+    \t// check if python is installed, it has the required dependencies for the rotation program to run",
                "+        boolean hasPython = false;",
                "+        DefaultExecutor executor = new DefaultExecutor();",
                "+        CommandLine cmdLine = CommandLine.parse(\"python -c \\\"import numpy, matplotlib, skimage;\\\"\");",
                "+        try {",
                "+            int returnCode = executor.execute(cmdLine);",
                "+            if (returnCode != -1) {",
                "+                hasPython = true;",
                "+            }",
                "-\t\treturn hasPython;\t",
                "+        } catch(Exception e) {",
                "+            // Do nothing",
                "+        }",
                "+        return hasPython;",
                "     }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2835": "",
                "TIKA-2385": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2835, TIKA-2385",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "ad23d84f88abe6e540e989c988142f1ca0c876a7",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507733934,
            "hunks": 6,
            "message": "TIKA-2469 -- narrow mime detection for ms-owner files and add detection for nls files.",
            "diff": [
                "diff --git a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "index dd5d0664f..3d4284de1 100644",
                "--- a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "+++ b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "@@ -3610,4 +3610,15 @@",
                "     <_comment>PRONOM fmt-473</_comment>",
                "+    <_comment>First byte and 53rd byte are the same -- the length of the name.</_comment>",
                "+    <_comment>Based on TIKA-2469, we've added a heuristic/wild guess that the first 10 chars</_comment>",
                "+    <_comment>after the length byte should be \\x00 or a non-control character.</_comment>",
                "     <magic priority=\"80\">",
                "-      <match value=\"(?s)^([\\\\x05-\\\\x0F]).{53}\\\\1\\x00\" type=\"regex\" offset=\"0\"/>",
                "+      <match value=\"(?s)^([\\\\x05-\\\\x0F])[\\\\x00\\\\x20-\\\\x7E]{10}.{43}\\\\1\\x00\" type=\"regex\" offset=\"0\"/>",
                "+    </magic>",
                "+  </mime-type>",
                "+  <mime-type type=\"application/x-ms-nls\">",
                "+    <_comment>Microsoft National Language Support</_comment>",
                "+    <_comment>Should take precedence over x-ms-owner</_comment>",
                "+    <magic priority=\"70\">",
                "+      <match value=\"(?s)^\\\\x0D.{51}\\\\x0C\\\\x00\\\\x0D\\\\x00\\\\x0E\" type=\"regex\" offset=\"0\"/>",
                "+      <match value=\"(?s)^\\\\x44\\\\x43.\\\\x01\" type=\"regex\" offset=\"0\"/>",
                "     </magic>",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/MSOwnerFileParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/MSOwnerFileParser.java",
                "index c7019f2a5..df0cc7396 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/MSOwnerFileParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/MSOwnerFileParser.java",
                "@@ -19,2 +19,3 @@ package org.apache.tika.parser.microsoft;",
                " import org.apache.commons.io.IOUtils;",
                "+import org.apache.tika.Tika;",
                " import org.apache.tika.exception.TikaException;",
                "@@ -67,2 +68,9 @@ public class MSOwnerFileParser extends AbstractParser {",
                "         int asciiNameLength = (int)asciiNameBytes[0];//don't need to convert to unsigned int because it can't be that long",
                "+        //sanity check name length",
                "+        if (asciiNameLength < 0) {",
                "+            throw new TikaException(\"ascii name length must be >= 0\");",
                "+        } else if (asciiNameLength > ASCII_CHUNK_LENGTH) {",
                "+            throw new TikaException(\"ascii name length must be < 55\");",
                "+        }",
                "+",
                "         String asciiName = new String(asciiNameBytes, 1, asciiNameLength, StandardCharsets.US_ASCII);",
                "@@ -71,3 +79,3 @@ public class MSOwnerFileParser extends AbstractParser {",
                "         int unicodeCharLength = stream.read();",
                "-        if (unicodeCharLength > 0) {",
                "+        if (asciiNameLength == unicodeCharLength) {",
                "             stream.read();//zero after the char length",
                "@@ -77,2 +85,4 @@ public class MSOwnerFileParser extends AbstractParser {",
                "             metadata.set(TikaCoreProperties.MODIFIER, unicodeName);",
                "+        } else {",
                "+            throw new TikaException(\"Ascii name length should be the same as the unicode length\");",
                "         }"
            ],
            "changed_files": [
                "tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/MSOwnerFileParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2469": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2469",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "ff481b25dd7f141f55907ce194b9bc2c77fc7069",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1509625943,
            "hunks": 49,
            "message": "TIKA-2478 -- rfc822 parser should handle alternative parts as the Outlook parser does.  Added parameter to allow for legacy behavior in RFC822Parser and a parameter to \"include all alternatives\" to the OutlookParser.",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "index b3d8644d0..40db8f37d 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "@@ -18,19 +18,2 @@ package org.apache.tika.parser.mail;",
                "-import static org.apache.tika.utils.DateUtils.MIDDAY;",
                "-import static org.apache.tika.utils.DateUtils.UTC;",
                "-",
                "-import java.io.IOException;",
                "-import java.io.InputStream;",
                "-import java.text.DateFormat;",
                "-import java.text.DateFormatSymbols;",
                "-import java.text.ParseException;",
                "-import java.text.SimpleDateFormat;",
                "-import java.util.Date;",
                "-import java.util.Locale;",
                "-import java.util.Map;",
                "-import java.util.Map.Entry;",
                "-import java.util.TimeZone;",
                "-import java.util.regex.Matcher;",
                "-import java.util.regex.Pattern;",
                "-",
                " import org.apache.james.mime4j.MimeException;",
                "@@ -52,4 +35,6 @@ import org.apache.james.mime4j.stream.BodyDescriptor;",
                " import org.apache.james.mime4j.stream.Field;",
                "+import org.apache.tika.exception.TikaException;",
                " import org.apache.tika.extractor.EmbeddedDocumentExtractor;",
                " import org.apache.tika.extractor.EmbeddedDocumentUtil;",
                "+import org.apache.tika.io.IOUtils;",
                " import org.apache.tika.io.TikaInputStream;",
                "@@ -60,2 +45,8 @@ import org.apache.tika.mime.MediaType;",
                " import org.apache.tika.parser.ParseContext;",
                "+import org.apache.tika.parser.Parser;",
                "+import org.apache.tika.parser.html.HtmlParser;",
                "+import org.apache.tika.parser.rtf.RTFParser;",
                "+import org.apache.tika.parser.txt.TXTParser;",
                "+import org.apache.tika.sax.BodyContentHandler;",
                "+import org.apache.tika.sax.EmbeddedContentHandler;",
                " import org.apache.tika.sax.XHTMLContentHandler;",
                "@@ -63,2 +54,24 @@ import org.xml.sax.SAXException;",
                "+import java.io.ByteArrayInputStream;",
                "+import java.io.ByteArrayOutputStream;",
                "+import java.io.IOException;",
                "+import java.io.InputStream;",
                "+import java.text.DateFormat;",
                "+import java.text.DateFormatSymbols;",
                "+import java.text.ParseException;",
                "+import java.text.SimpleDateFormat;",
                "+import java.util.ArrayList;",
                "+import java.util.Date;",
                "+import java.util.List;",
                "+import java.util.Locale;",
                "+import java.util.Map;",
                "+import java.util.Map.Entry;",
                "+import java.util.Stack;",
                "+import java.util.TimeZone;",
                "+import java.util.regex.Matcher;",
                "+import java.util.regex.Pattern;",
                "+",
                "+import static org.apache.tika.utils.DateUtils.MIDDAY;",
                "+import static org.apache.tika.utils.DateUtils.UTC;",
                "+",
                " /**",
                "@@ -70,2 +83,4 @@ class MailContentHandler implements ContentHandler {",
                "+    private static final String MULTIPART_ALTERNATIVE = \"multipart/alternative\";",
                "+",
                "     //TIKA-1970 Mac Mail's format",
                "@@ -127,15 +142,23 @@ class MailContentHandler implements ContentHandler {",
                "+",
                "+    private final XHTMLContentHandler handler;",
                "+    private final Metadata metadata;",
                "+    private final ParseContext parseContext;",
                "     private boolean strictParsing = false;",
                "+    private final boolean extractAllAlternatives;",
                "+    private final EmbeddedDocumentExtractor extractor;",
                "-    private XHTMLContentHandler handler;",
                "-    private Metadata metadata;",
                "-    private EmbeddedDocumentExtractor extractor;",
                "+    //this is used to buffer a multipart body that",
                "+    //keeps track of multipart/alternative and its children",
                "+    private Stack<Part> alternativePartBuffer = new Stack<>();",
                "-    private boolean inPart = false;",
                "-    private BodyDescriptor part = null;",
                "+    private Stack<BodyDescriptor> parts = new Stack<>();",
                "-    MailContentHandler(XHTMLContentHandler xhtml, Metadata metadata, ParseContext context, boolean strictParsing) {",
                "+    MailContentHandler(XHTMLContentHandler xhtml, Metadata metadata,",
                "+                       ParseContext context, boolean strictParsing, boolean extractAllAlternatives) {",
                "         this.handler = xhtml;",
                "         this.metadata = metadata;",
                "+        this.parseContext = context;",
                "         this.strictParsing = strictParsing;",
                "+        this.extractAllAlternatives = extractAllAlternatives;",
                "@@ -148,2 +171,3 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void body(BodyDescriptor body, InputStream is) throws MimeException,",
                "@@ -159,5 +183,5 @@ class MailContentHandler implements ContentHandler {",
                "         // TIKA-2455: flag the containing type.",
                "-        if (inPart) {",
                "-            submd.set(Message.MULTIPART_SUBTYPE, part.getSubType());",
                "-            submd.set(Message.MULTIPART_BOUNDARY, part.getBoundary());",
                "+        if (parts.size() > 0) {",
                "+            submd.set(Message.MULTIPART_SUBTYPE, parts.peek().getSubType());",
                "+            submd.set(Message.MULTIPART_BOUNDARY, parts.peek().getBoundary());",
                "         }   ",
                "@@ -182,9 +206,37 @@ class MailContentHandler implements ContentHandler {",
                "         }",
                "+        //if we're in a multipart/alternative or any one of its children",
                "+        //add the bodypart to the latest that was added",
                "+        if (! extractAllAlternatives && alternativePartBuffer.size() > 0) {",
                "+            ByteArrayOutputStream bos = new ByteArrayOutputStream();",
                "+            IOUtils.copy(is, bos);",
                "+            alternativePartBuffer.peek().children.add(new BodyContents(submd, bos.toByteArray()));",
                "+        } else {",
                "+            //else handle as you would any other embedded content",
                "+            try (TikaInputStream tis = TikaInputStream.get(is)) {",
                "+                handleEmbedded(tis, submd);",
                "+            }",
                "+        }",
                "+    }",
                "+",
                "+    private void handleEmbedded(TikaInputStream tis, Metadata metadata) throws MimeException, IOException {",
                "+",
                "+        String disposition = metadata.get(Metadata.CONTENT_DISPOSITION);",
                "+        boolean isInline = false;",
                "+        if (disposition != null) {",
                "+            if (disposition.toLowerCase(Locale.US).contains(\"inline\")) {",
                "+                metadata.set(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE,",
                "+                        TikaCoreProperties.EmbeddedResourceType.INLINE.toString());",
                "+                isInline = true;",
                "+            }",
                "+        }",
                "+        if (! isInline) {",
                "+            metadata.set(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE,",
                "+                    TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString());",
                "+        }",
                "         try {",
                "-            if (extractor.shouldParseEmbedded(submd)) {",
                "+            if (extractor.shouldParseEmbedded(metadata)) {",
                "                 // Wrap the InputStream before passing on, as the James provided",
                "                 //  one misses many features we might want eg mark/reset",
                "-                TikaInputStream tis = TikaInputStream.get(is);",
                "-                extractor.parseEmbedded(tis, handler, submd, false);",
                "+                extractor.parseEmbedded(tis, handler, metadata, false);",
                "             }",
                "@@ -193,5 +245,12 @@ class MailContentHandler implements ContentHandler {",
                "         }",
                "+",
                "     }",
                "+    @Override",
                "     public void endBodyPart() throws MimeException {",
                "+        //if we're buffering for a multipart/alternative",
                "+        //don't write </p></div>",
                "+        if (alternativePartBuffer.size() > 0) {",
                "+            return;",
                "+        }",
                "         try {",
                "@@ -204,2 +263,3 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void endHeader() throws MimeException {",
                "@@ -207,2 +267,3 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void startMessage() throws MimeException {",
                "@@ -215,2 +276,3 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void endMessage() throws MimeException {",
                "@@ -223,7 +285,25 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void endMultipart() throws MimeException {",
                "-        inPart = false;",
                "-        part = null;",
                "+",
                "+        if (alternativePartBuffer.size() == 1) {",
                "+            Part alternativeRoot = alternativePartBuffer.pop();",
                "+            try {",
                "+                handleBestParts(alternativeRoot);",
                "+            } catch (IOException e) {",
                "+                throw new MimeException(e);",
                "+            }",
                "+        } else if (alternativePartBuffer.size() > 1) {",
                "+            alternativePartBuffer.pop();",
                "+        }",
                "+        //test that parts has something",
                "+        //if it doesn't, there's a problem with the file",
                "+        //e.g. more endMultiPart than startMultipart",
                "+        //we're currently silently swallowing this",
                "+        if (parts.size() > 0) {",
                "+            parts.pop();",
                "+        }",
                "     }",
                "+    @Override",
                "     public void epilogue(InputStream is) throws MimeException, IOException {",
                "@@ -239,5 +319,5 @@ class MailContentHandler implements ContentHandler {",
                "     public void field(Field field) throws MimeException {",
                "-        // inPart indicates whether these metadata correspond to the",
                "-        // whole message or its parts",
                "-        if (inPart) {",
                "+        // if we're in a part, skip.",
                "+        // We want to gather only the metadata for the whole msg.",
                "+        if (parts.size() > 0) {",
                "             return;",
                "@@ -371,2 +451,3 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void preamble(InputStream is) throws MimeException, IOException {",
                "@@ -374,2 +455,3 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void raw(InputStream is) throws MimeException, IOException {",
                "@@ -377,3 +459,9 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void startBodyPart() throws MimeException {",
                "+        //if we're buffering for a multipart/alternative",
                "+        //don't write <div><p>",
                "+        if (alternativePartBuffer.size() > 0) {",
                "+            return;",
                "+        }",
                "         try {",
                "@@ -386,2 +474,3 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void startHeader() throws MimeException {",
                "@@ -391,5 +480,23 @@ class MailContentHandler implements ContentHandler {",
                "+    @Override",
                "     public void startMultipart(BodyDescriptor descr) throws MimeException {",
                "-        inPart = true;",
                "-        part = descr;",
                "+        parts.push(descr);",
                "+",
                "+        if (! extractAllAlternatives) {",
                "+            if (alternativePartBuffer.size() == 0",
                "+                    && MULTIPART_ALTERNATIVE.equalsIgnoreCase(descr.getMimeType())) {",
                "+                Part part = new Part(descr);",
                "+                alternativePartBuffer.push(part);",
                "+            } else if (alternativePartBuffer.size() > 0) {",
                "+                //add the part to the stack",
                "+                Part parent = alternativePartBuffer.peek();",
                "+                Part part = new Part(descr);",
                "+                alternativePartBuffer.push(part);",
                "+",
                "+",
                "+                if (parent != null) {",
                "+                    parent.children.add(part);",
                "+                }",
                "+            }",
                "+        }",
                "     }",
                "@@ -405,2 +512,104 @@ class MailContentHandler implements ContentHandler {",
                "+    private void handleBestParts(Part part) throws MimeException, IOException {",
                "+        if (part == null) {",
                "+            return;",
                "+        }",
                "+",
                "+        if (part instanceof BodyContents) {",
                "+            handlePart((BodyContents)part);",
                "+            return;",
                "+        }",
                "+",
                "+",
                "+        if (MULTIPART_ALTERNATIVE.equalsIgnoreCase(part.bodyDescriptor.getMimeType())) {",
                "+            int bestPartScore = -1;",
                "+            Part bestPart = null;",
                "+            for (Part alternative : part.children) {",
                "+                int score = score(alternative);",
                "+                if (score > bestPartScore) {",
                "+                    bestPart = alternative;",
                "+                    bestPartScore = score;",
                "+                }",
                "+            }",
                "+            handleBestParts(bestPart);",
                "+        } else {",
                "+            for (Part child : part.children) {",
                "+                handleBestParts(child);",
                "+            }",
                "+        }",
                "+    }",
                "+",
                "+    private void handlePart(BodyContents part) throws MimeException, IOException {",
                "+        String contentType = part.metadata.get(Metadata.CONTENT_TYPE);",
                "+        Parser parser = null;",
                "+        if (MediaType.TEXT_HTML.toString().equalsIgnoreCase(contentType)) {",
                "+            parser =",
                "+                    EmbeddedDocumentUtil.tryToFindExistingLeafParser(HtmlParser.class, parseContext);",
                "+        } else if (\"application/rtf\".equalsIgnoreCase(contentType)) {",
                "+            parser =",
                "+                    EmbeddedDocumentUtil.tryToFindExistingLeafParser(RTFParser.class, parseContext);",
                "+        } else if (MediaType.TEXT_PLAIN.toString().equalsIgnoreCase(contentType)) {",
                "+            parser =",
                "+                    EmbeddedDocumentUtil.tryToFindExistingLeafParser(TXTParser.class, parseContext);",
                "+        }",
                "+",
                "+",
                "+        if (parser == null) {",
                "+            try (TikaInputStream tis = TikaInputStream.get(part.bytes)) {",
                "+                handleEmbedded(tis, part.metadata);",
                "+            }",
                "+        } else {",
                "+",
                "+            //parse inline",
                "+            try {",
                "+                parser.parse(",
                "+                        new ByteArrayInputStream(part.bytes),",
                "+                        new EmbeddedContentHandler(new BodyContentHandler(handler)),",
                "+                        new Metadata(), parseContext",
                "+                );",
                "+            } catch (SAXException | TikaException e) {",
                "+                throw new MimeException(e);",
                "+            }",
                "+        }",
                "+    }",
                "+",
                "+    private int score(Part part) {",
                "+        if (part == null) {",
                "+            return 0;",
                "+        }",
                "+        if (part instanceof BodyContents) {",
                "+            String contentType = ((BodyContents)part).metadata.get(Metadata.CONTENT_TYPE);",
                "+            if (contentType == null) {",
                "+                return 0;",
                "+            } else if (contentType.equalsIgnoreCase(MediaType.TEXT_PLAIN.toString())) {",
                "+                return 1;",
                "+            } else if (contentType.equalsIgnoreCase(\"application/rtf\")) {",
                "+                //TODO -- is this the right definition in rfc822 for rich text?!",
                "+                return 2;",
                "+            } else if (contentType.equalsIgnoreCase(MediaType.TEXT_HTML.toString())) {",
                "+                return 3;",
                "+            }",
                "+        }",
                "+        return 4;",
                "+    }",
                "+",
                "+    private static class Part {",
                "+        private final BodyDescriptor bodyDescriptor;",
                "+        private final List<Part> children = new ArrayList<>();",
                "+",
                "+        public Part(BodyDescriptor bodyDescriptor) {",
                "+            this.bodyDescriptor = bodyDescriptor;",
                "+        }",
                "+    }",
                "+",
                "+    private static class BodyContents extends Part {",
                "+        private final Metadata metadata;",
                "+        private final byte[] bytes;",
                "+",
                "+        private BodyContents(Metadata metadata, byte[] bytes) {",
                "+            super(null);",
                "+            this.metadata = metadata;",
                "+            this.bytes = bytes;",
                "+        }",
                "+    }",
                " }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java b/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java",
                "index 03bce971d..06a094ff3 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java",
                "@@ -27,2 +27,3 @@ import org.apache.james.mime4j.parser.MimeStreamParser;",
                " import org.apache.james.mime4j.stream.MimeConfig;",
                "+import org.apache.tika.config.Field;",
                " import org.apache.tika.exception.TikaException;",
                "@@ -41,3 +42,3 @@ import org.xml.sax.SAXException;",
                "  * <p/>",
                "- * A {@link MimeEntityConfig} object can be passed in the parsing context",
                "+ * A {@link MimeConfig} object can be passed in the parsing context",
                "  * to better control the parsing process.",
                "@@ -55,2 +56,5 @@ public class RFC822Parser extends AbstractParser {",
                "+    @Field",
                "+    private boolean extractAllAlternatives = false;",
                "+",
                "     public Set<MediaType> getSupportedTypes(ParseContext context) {",
                "@@ -74,3 +78,4 @@ public class RFC822Parser extends AbstractParser {",
                "         MailContentHandler mch = new MailContentHandler(",
                "-                xhtml, metadata, context, config.isStrictParsing());",
                "+                xhtml, metadata, context, config.isStrictParsing(),",
                "+                extractAllAlternatives);",
                "         parser.setContentHandler(mch);",
                "@@ -97,2 +102,17 @@ public class RFC822Parser extends AbstractParser {",
                "+    /**",
                "+     * Until version 1.17, Tika handled all body parts as embedded objects (see TIKA-2478).",
                "+     * In 1.17, we modified the parser to select only the best alternative body",
                "+     * parts for multipart/alternative sections, and we inline the content",
                "+     * as we do for .msg files.",
                "+     *",
                "+     * The legacy behavior can be set by setting {@link #extractAllAlternatives}",
                "+     * to <code>true</code>.  As of 1.17, the default value is <code>false</code>",
                "+     *",
                "+     * @param extractAllAlternatives whether or not to extract all alternative parts",
                "+     * @since 1.17",
                "+     */",
                "+    public void setExtractAllAlternatives(boolean extractAllAlternatives) {",
                "+        this.extractAllAlternatives = extractAllAlternatives;",
                "+    }",
                " }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/AbstractOfficeParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/AbstractOfficeParser.java",
                "index ba0ded4a0..53f7dd1b6 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/AbstractOfficeParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/AbstractOfficeParser.java",
                "@@ -115,2 +115,21 @@ public abstract class AbstractOfficeParser extends AbstractParser {",
                "+    /**",
                "+     * Some .msg files can contain body content in html, rtf and/or text.",
                "+     * The default behavior is to pick the first non-null value and include only that.",
                "+     * If you'd like to extract all non-null body content, which is likely duplicative,",
                "+     * set this value to true.",
                "+     *",
                "+     * @param extractAllAlternativesFromMSG whether or not to extract all alternative parts from msg files",
                "+     * @since 1.17",
                "+     */",
                "+    @Field",
                "+    public void setExtractAllAlternativesFromMSG(boolean extractAllAlternativesFromMSG) {",
                "+        defaultOfficeParserConfig.setExtractAllAlternativesFromMSG(extractAllAlternativesFromMSG);",
                "+    }",
                "+",
                "+",
                "+    public boolean getExtractAllAlternativesFromMSG() {",
                "+        return defaultOfficeParserConfig.getExtractAllAlternativesFromMSG();",
                "+    }",
                "+",
                " }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OfficeParserConfig.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OfficeParserConfig.java",
                "index 36da3049d..34b865e67 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OfficeParserConfig.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OfficeParserConfig.java",
                "@@ -19,2 +19,4 @@ package org.apache.tika.parser.microsoft;",
                "+import org.apache.tika.config.Field;",
                "+",
                " import java.io.Serializable;",
                "@@ -33,2 +35,3 @@ public class OfficeParserConfig implements Serializable {",
                "     private boolean useSAXPptxExtractor = false;",
                "+    private boolean extractAllAlternativesFromMSG;",
                "@@ -172,2 +175,21 @@ public class OfficeParserConfig implements Serializable {",
                "     }",
                "+",
                "+",
                "+    /**",
                "+     * Some .msg files can contain body content in html, rtf and/or text.",
                "+     * The default behavior is to pick the first non-null value and include only that.",
                "+     * If you'd like to extract all non-null body content, which is likely duplicative,",
                "+     * set this value to true.",
                "+     *",
                "+     * @param extractAllAlternativesFromMSG whether or not to extract all alternative parts",
                "+     * @since 1.17",
                "+     */",
                "+    public void setExtractAllAlternativesFromMSG(boolean extractAllAlternativesFromMSG) {",
                "+        this.extractAllAlternativesFromMSG = extractAllAlternativesFromMSG;",
                "+    }",
                "+",
                "+",
                "+    public boolean getExtractAllAlternativesFromMSG() {",
                "+        return extractAllAlternativesFromMSG;",
                "+    }",
                " }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OutlookExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OutlookExtractor.java",
                "index e4b53855f..649de6790 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OutlookExtractor.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OutlookExtractor.java",
                "@@ -55,2 +55,3 @@ import org.apache.poi.poifs.filesystem.NPOIFSFileSystem;",
                " import org.apache.poi.util.CodePageUtil;",
                "+import org.apache.tika.config.Field;",
                " import org.apache.tika.exception.TikaException;",
                "@@ -63,2 +64,3 @@ import org.apache.tika.metadata.Property;",
                " import org.apache.tika.metadata.TikaCoreProperties;",
                "+import org.apache.tika.mime.MediaType;",
                " import org.apache.tika.parser.ParseContext;",
                "@@ -125,2 +127,4 @@ public class OutlookExtractor extends AbstractPOIFSExtractor {",
                "+    private final boolean extractAllAlternatives;",
                "+",
                "     public OutlookExtractor(NPOIFSFileSystem filesystem, ParseContext context) throws TikaException {",
                "@@ -132,2 +136,3 @@ public class OutlookExtractor extends AbstractPOIFSExtractor {",
                "         this.parseContext = context;",
                "+        this.extractAllAlternatives = context.get(OfficeParserConfig.class).getExtractAllAlternativesFromMSG();",
                "         try {",
                "@@ -242,46 +247,3 @@ public class OutlookExtractor extends AbstractPOIFSExtractor {",
                "             }",
                "-",
                "-            boolean doneBody = false;",
                "-            xhtml.startElement(\"div\", \"class\", \"message-body\");",
                "-            if (htmlChunk != null) {",
                "-                byte[] data = null;",
                "-                if (htmlChunk instanceof ByteChunk) {",
                "-                    data = ((ByteChunk) htmlChunk).getValue();",
                "-                } else if (htmlChunk instanceof StringChunk) {",
                "-                    data = ((StringChunk) htmlChunk).getRawValue();",
                "-                }",
                "-                if (data != null) {",
                "-                    Parser htmlParser =",
                "-                            EmbeddedDocumentUtil.tryToFindExistingLeafParser(HtmlParser.class, parseContext);",
                "-                    if (htmlParser == null) {",
                "-                        htmlParser = new HtmlParser();",
                "-                    }",
                "-                    htmlParser.parse(",
                "-                            new ByteArrayInputStream(data),",
                "-                            new EmbeddedContentHandler(new BodyContentHandler(xhtml)),",
                "-                            new Metadata(), parseContext",
                "-                    );",
                "-                    doneBody = true;",
                "-                }",
                "-            }",
                "-            if (rtfChunk != null && !doneBody) {",
                "-                ByteChunk chunk = (ByteChunk) rtfChunk;",
                "-                MAPIRtfAttribute rtf = new MAPIRtfAttribute(",
                "-                        MAPIProperty.RTF_COMPRESSED, Types.BINARY.getId(), chunk.getValue()",
                "-                );",
                "-                Parser rtfParser =",
                "-                        EmbeddedDocumentUtil.tryToFindExistingLeafParser(RTFParser.class, parseContext);",
                "-                if (rtfParser == null) {",
                "-                    rtfParser = new RTFParser();",
                "-                }",
                "-                rtfParser.parse(",
                "-                        new ByteArrayInputStream(rtf.getData()),",
                "-                        new EmbeddedContentHandler(new BodyContentHandler(xhtml)),",
                "-                        new Metadata(), parseContext);",
                "-                doneBody = true;",
                "-            }",
                "-            if (textChunk != null && !doneBody) {",
                "-                xhtml.element(\"p\", ((StringChunk) textChunk).getValue());",
                "-            }",
                "-            xhtml.endElement(\"div\");",
                "+            handleBodyChunks(htmlChunk, rtfChunk, textChunk, xhtml);",
                "@@ -329,2 +291,106 @@ public class OutlookExtractor extends AbstractPOIFSExtractor {",
                "+    private void handleBodyChunks(Chunk htmlChunk, Chunk rtfChunk, Chunk textChunk, XHTMLContentHandler xhtml) throws SAXException, IOException, TikaException {",
                "+",
                "+        if (extractAllAlternatives) {",
                "+            extractAllAlternatives(htmlChunk, rtfChunk, textChunk, xhtml);",
                "+            return;",
                "+        }",
                "+",
                "+        boolean doneBody = false;",
                "+        xhtml.startElement(\"div\", \"class\", \"message-body\");",
                "+        if (htmlChunk != null) {",
                "+            byte[] data = null;",
                "+            if (htmlChunk instanceof ByteChunk) {",
                "+                data = ((ByteChunk) htmlChunk).getValue();",
                "+            } else if (htmlChunk instanceof StringChunk) {",
                "+                data = ((StringChunk) htmlChunk).getRawValue();",
                "+            }",
                "+            if (data != null) {",
                "+                Parser htmlParser =",
                "+                        EmbeddedDocumentUtil.tryToFindExistingLeafParser(HtmlParser.class, parseContext);",
                "+                if (htmlParser == null) {",
                "+                    htmlParser = new HtmlParser();",
                "+                }",
                "+                htmlParser.parse(",
                "+                        new ByteArrayInputStream(data),",
                "+                        new EmbeddedContentHandler(new BodyContentHandler(xhtml)),",
                "+                        new Metadata(), parseContext",
                "+                );",
                "+                doneBody = true;",
                "+            }",
                "+        }",
                "+        if (rtfChunk != null && (extractAllAlternatives || !doneBody)) {",
                "+            ByteChunk chunk = (ByteChunk) rtfChunk;",
                "+            MAPIRtfAttribute rtf = new MAPIRtfAttribute(",
                "+                    MAPIProperty.RTF_COMPRESSED, Types.BINARY.getId(), chunk.getValue()",
                "+            );",
                "+            Parser rtfParser =",
                "+                    EmbeddedDocumentUtil.tryToFindExistingLeafParser(RTFParser.class, parseContext);",
                "+            if (rtfParser == null) {",
                "+                rtfParser = new RTFParser();",
                "+            }",
                "+            rtfParser.parse(",
                "+                    new ByteArrayInputStream(rtf.getData()),",
                "+                    new EmbeddedContentHandler(new BodyContentHandler(xhtml)),",
                "+                    new Metadata(), parseContext);",
                "+            doneBody = true;",
                "+        }",
                "+        if (textChunk != null && (extractAllAlternatives || !doneBody)) {",
                "+            xhtml.element(\"p\", ((StringChunk) textChunk).getValue());",
                "+        }",
                "+        xhtml.endElement(\"div\");",
                "+",
                "+    }",
                "+",
                "+    private void extractAllAlternatives(Chunk htmlChunk, Chunk rtfChunk, Chunk textChunk, XHTMLContentHandler xhtml)",
                "+            throws TikaException, SAXException, IOException {",
                "+        if (htmlChunk != null) {",
                "+            byte[] data = getValue(htmlChunk);",
                "+            if (data != null) {",
                "+                handleEmbeddedResource(",
                "+                        TikaInputStream.get(data),",
                "+                        \"html-body\", null,",
                "+                        MediaType.TEXT_HTML.toString(), xhtml, true",
                "+                );",
                "+            }",
                "+        }",
                "+        if (rtfChunk != null) {",
                "+            ByteChunk chunk = (ByteChunk) rtfChunk;",
                "+            MAPIRtfAttribute rtf = new MAPIRtfAttribute(",
                "+                    MAPIProperty.RTF_COMPRESSED, Types.BINARY.getId(), chunk.getValue()",
                "+            );",
                "+",
                "+            byte[] data = rtf.getData();",
                "+            if (data != null) {",
                "+                handleEmbeddedResource(",
                "+                        TikaInputStream.get(data),",
                "+                        \"rtf-body\", null,",
                "+                        \"application/rtf\", xhtml, true",
                "+                );",
                "+            }",
                "+        }",
                "+        if (textChunk != null) {",
                "+            byte[] data = getValue(textChunk);",
                "+            if (data != null) {",
                "+                handleEmbeddedResource(",
                "+                        TikaInputStream.get(data),",
                "+                        \"text-body\", null,",
                "+                        MediaType.TEXT_PLAIN.toString(), xhtml, true",
                "+                );",
                "+            }",
                "+        }",
                "+",
                "+    }",
                "+",
                "+    //can return null!",
                "+    private byte[] getValue(Chunk chunk) {",
                "+        byte[] data = null;",
                "+        if (chunk instanceof ByteChunk) {",
                "+            data = ((ByteChunk) chunk).getValue();",
                "+        } else if (chunk instanceof StringChunk) {",
                "+            data = ((StringChunk) chunk).getRawValue();",
                "+        }",
                "+        return data;",
                "+    }",
                "+",
                "     private void handleFromTo(Map<String, String[]> headers, Metadata metadata) throws ChunkNotFoundException {",
                "@@ -661,3 +727,2 @@ public class OutlookExtractor extends AbstractPOIFSExtractor {",
                "-",
                "     private static class Recipient {"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/AbstractOfficeParser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OfficeParserConfig.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/OutlookExtractor.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2478": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2478",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "2966cab3d8e4c975ba3b8b04f71d0254eeaf2f8c",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507642670,
            "hunks": 1,
            "message": "[TIKA-2472] Removing a null value check as Arrays.hashCode does it",
            "diff": [
                "diff --git a/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java b/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "index 03f9cfc05..843aaab0f 100644",
                "--- a/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "+++ b/tika-core/src/main/java/org/apache/tika/metadata/Metadata.java",
                "@@ -498,4 +498,3 @@ public class Metadata implements CreativeCommons, Geographic, HttpHeaders,",
                "     private int getMetadataEntryHashCode(Entry<String, String[]> e) {",
                "-    \treturn Objects.hashCode(e.getKey()) ",
                "-            ^ (e.getValue() == null ? 0 : Arrays.hashCode(e.getValue()));",
                "+    \treturn Objects.hashCode(e.getKey()) ^ Arrays.hashCode(e.getValue());",
                " \t}"
            ],
            "changed_files": [
                "tika-core/src/main/java/org/apache/tika/metadata/Metadata.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2472": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2472",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "7a9411f9d06a667114f9ea67ad48f1099be1ec3b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512091434,
            "hunks": 7,
            "message": "TIKA-2385: Added check for Python dependencies",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index 0b173931e..b2ce47f34 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -170,20 +170,22 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "     }",
                "-    ",
                "+",
                "     static boolean hasPython() {",
                "-    \t// check if python is installed, it has the required dependencies for the rotation program to run",
                "+        // check if python is installed, it has the required dependencies for the rotation program to run",
                "         boolean hasPython = false;",
                "-        DefaultExecutor executor = new DefaultExecutor();",
                "-        CommandLine cmdLine = CommandLine.parse(\"python -c \\\"import numpy, matplotlib, skimage;\\\"\");",
                "+",
                "         try {",
                "-            int returnCode = executor.execute(cmdLine);",
                "-            if (returnCode != -1) {",
                "+            String[] commands = {\"python\", \"-c\", \"\\\"import numpy, matplotlib, skimage;\\\"\" };",
                "+",
                "+            Process proc = Runtime.getRuntime().exec(commands);",
                "+            BufferedReader stdInput = new BufferedReader(new InputStreamReader(proc.getInputStream(), \"UTF-8\"));",
                "+            if(stdInput.read() != -1) {",
                "                 hasPython = true;",
                "             }",
                "+        } catch (IOException e) {",
                "-        } catch(Exception e) {",
                "-            // Do nothing",
                "         }",
                "+",
                "         return hasPython;",
                "     }",
                "-    ",
                "+",
                "     public void parse(Image image, ContentHandler handler, Metadata metadata, ParseContext context) throws IOException,"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2385": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2385",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "b3434cd87fc454bfeccf149bc6644590f5678622",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512085419,
            "hunks": 0,
            "message": "Merge branch 'TIKA-2385'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2385": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2385",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "aff782d5e88a3616055451de9526c0a40774bf87",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512095673,
            "hunks": 5,
            "message": "TIKA-2385: Updated check for Python dependencies to use temporary script instead of -c switch",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index b2ce47f34..4d6abc4dd 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -25,2 +25,3 @@ import java.awt.image.BufferedImage;",
                " import java.io.BufferedReader;",
                "+import java.io.BufferedWriter;",
                " import java.io.ByteArrayOutputStream;",
                "@@ -29,2 +30,3 @@ import java.io.FileInputStream;",
                " import java.io.FileOutputStream;",
                "+import java.io.FileWriter;",
                " import java.io.IOException;",
                "@@ -172,3 +174,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "     static boolean hasPython() {",
                "-        // check if python is installed, it has the required dependencies for the rotation program to run",
                "+        // check if python is installed and it has the required dependencies for the rotation program to run",
                "         boolean hasPython = false;",
                "@@ -176,10 +178,17 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "         try {",
                "-            String[] commands = {\"python\", \"-c\", \"\\\"import numpy, matplotlib, skimage;\\\"\" };",
                "-",
                "-            Process proc = Runtime.getRuntime().exec(commands);",
                "-            BufferedReader stdInput = new BufferedReader(new InputStreamReader(proc.getInputStream(), \"UTF-8\"));",
                "-            if(stdInput.read() != -1) {",
                "+            TemporaryResources tmp = new TemporaryResources();",
                "+            File importCheck = tmp.createTemporaryFile();",
                "+            String prg = \"import numpy, mathplotlib, skimage\";",
                "+            BufferedWriter out = new BufferedWriter(new FileWriter(importCheck));",
                "+            out.write(prg);",
                "+            out.close();",
                "+",
                "+            Process p = Runtime.getRuntime().exec(\"python \" + importCheck.getAbsolutePath());",
                "+            if (p.waitFor() == 0) {",
                "                 hasPython = true;",
                "             }",
                "-        } catch (IOException e) {",
                "+",
                "+            tmp.close();",
                "+",
                "+        } catch (Exception e) {"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2385": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2385",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "6bd187a4d1ae9d82afc6943c0a89d23aa9f50ec2",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516724232,
            "hunks": 2,
            "message": "Update geo-apis and sis to avoid license problems (TIKA-2535 and LEGAL-360).",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index c2f0a5a03..81a5765db 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -47,3 +47,3 @@",
                "     <netcdf-java.version>4.5.5</netcdf-java.version>",
                "-    <sis.version>0.6</sis.version>",
                "+    <sis.version>0.8</sis.version>",
                "     <!-- used by POI, PDFBox and Jackcess ...try to sync -->",
                "@@ -483,3 +483,3 @@",
                "       <artifactId>geoapi</artifactId>",
                "-      <version>3.0.0</version>",
                "+      <version>3.0.1</version>",
                "     </dependency>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2535": "",
                "LEGAL-360": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2535, LEGAL-360",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "97699598f000139b1222b785d634b3c8a8e216c7",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1513870292,
            "hunks": 1,
            "message": "TIKA-1141 - There is no unique magic for JavaScript files, no matter how much we might like there to be... However, to avoid mis-detection, for a few common JS libraries with HTML snippets near their start, include magic for these files as JS",
            "diff": [
                "diff --git a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "index 3d4284de1..88b9000e0 100644",
                "--- a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "+++ b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "@@ -310,2 +310,22 @@",
                "     <glob pattern=\"*.js\"/>",
                "+",
                "+    <!-- Note - there is no Unique Magic for JavaScript files! -->",
                "+    <!-- Generally you can only detect JS with the filename -->",
                "+    <!-- However... A few common JS libraries accidentally trigger -->",
                "+    <!--  the HTML priority=20 magic incorrectly. So, for those only, -->",
                "+    <!--  we list \"magic\" for those specific files -->",
                "+    <magic priority=\"50\">",
                "+      <!-- jQuery -->",
                "+      <match value=\"/* jQuery \" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"/*! jQuery \" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"/*!\" type=\"string\" offset=\"0\">",
                "+         <match value=\"* jQuery \" offset=\"4:8\"/>",
                "+      </match>",
                "+      <match value=\"(function(e,undefined){\" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"!function(window,undefined){\" type=\"string\" offset=\"0\"/>",
                "+      <!-- Prototype -->",
                "+      <match value=\"/*  Prototype JavaScript \" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"var Prototype={ \" type=\"string\" offset=\"0\"/>",
                "+      <match value=\"function $w(t){\" type=\"string\" offset=\"0\"/>",
                "+    </magic>",
                "   </mime-type>"
            ],
            "changed_files": [
                "tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1141": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1141",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "d5d739c237c677c49d64b3766700ce506c5982a1",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507725897,
            "hunks": 0,
            "message": "Merge branch 'seanstory-TIKA-2475'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2475": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2475",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "f57e0e78c3882c5003cf15b18375a334944d24dd",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512754747,
            "hunks": 1,
            "message": "TIKA-2521",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java",
                "index 95cbc5b34..70fe7aa09 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java",
                "@@ -180,2 +180,13 @@ public class OOXMLTikaBodyPartHandler implements OOXMLWordAndPowerPointTextHandl",
                "     public void startParagraph(ParagraphProperties paragraphProperties) {",
                "+",
                "+        //if you're in a table cell and your after the first paragraph",
                "+        //make sure to prepend a \\n",
                "+        if (tableCellDepth > 0 && pWithinCell > 0) {",
                "+            try {",
                "+                xhtml.characters(NEWLINE, 0, 1);",
                "+            } catch (SAXException e) {",
                "+                //swallow",
                "+            }",
                "+        }",
                "+",
                "         if (pDepth == 0 && tableDepth == 0 && sdtDepth == 0) {"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/OOXMLTikaBodyPartHandler.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2521": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2521",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "66be8e751d0a5f90ec0645b1585dd68f0b75dcd5",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510004535,
            "hunks": 2,
            "message": "TIKA-2492 -- exclude pdfbox debugger, but get it right this time.",
            "diff": [
                "diff --git a/tika-parsers/pom.xml b/tika-parsers/pom.xml",
                "index 4654b73f2..c0c2b6c8d 100644",
                "--- a/tika-parsers/pom.xml",
                "+++ b/tika-parsers/pom.xml",
                "@@ -155,6 +155,2 @@",
                "         </exclusion>",
                "-        <exclusion>",
                "-        <groupId>org.apache.pdfbox</groupId>",
                "-        <artifactId>pdfbox-debugger</artifactId>",
                "-        </exclusion>",
                "       </exclusions>",
                "@@ -170,2 +166,6 @@",
                "         </exclusion>",
                "+        <exclusion>",
                "+          <groupId>org.apache.pdfbox</groupId>",
                "+          <artifactId>pdfbox-debugger</artifactId>",
                "+        </exclusion>",
                "       </exclusions>"
            ],
            "changed_files": [
                "tika-parsers/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2492": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2492",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "7f6072ca26dccf1d791c426d4c32068535ddae8a",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1515653181,
            "hunks": 0,
            "message": "Merge branch 'BenRomberg-TIKA-1191'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1191": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1191",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "7ca6597c5652ab8850bb8ce3d48d602188f5bdbf",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512085316,
            "hunks": 0,
            "message": "Merge branch 'TIKA-2835' of https://github.com/pmweiss/tika into TIKA-2385 Added check for Python dependencies to provide full check before attempting to run",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2835": "",
                "TIKA-2385": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2835, TIKA-2385",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "93cbed6df993ef01e59c55b86449b664e9052cae",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511485297,
            "hunks": 8,
            "message": "TIKA-2347 - Added extraction of <strike> element in DOCX files",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java",
                "index 3c700a732..25c5a7c9f 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java",
                "@@ -265,3 +265,3 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "-        TmpFormatting fmtg = new TmpFormatting(false, false, false);",
                "+        TmpFormatting fmtg = new TmpFormatting(false, false, false, false);",
                "@@ -373,2 +373,6 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         }",
                "+        if (fmtg.isStrikeThrough()) {",
                "+            xhtml.endElement(\"strike\");",
                "+            fmtg.setStrikeThrough(false);",
                "+        }",
                "         return fmtg;",
                "@@ -381,2 +385,6 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         if (run.isBold() != tfmtg.isBold()) {",
                "+            if (tfmtg.isStrikeThrough()) {",
                "+                xhtml.endElement(\"strike\");",
                "+                tfmtg.setStrikeThrough(false);",
                "+            }",
                "             if (tfmtg.isUnderline()) {",
                "@@ -398,2 +406,6 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         if (run.isItalic() != tfmtg.isItalic()) {",
                "+            if (tfmtg.isStrikeThrough()) {",
                "+                xhtml.endElement(\"strike\");",
                "+                tfmtg.setStrikeThrough(false);",
                "+            }",
                "             if (tfmtg.isUnderline()) {",
                "@@ -409,3 +421,16 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         }",
                "-        ",
                "+",
                "+        if (run.isStrikeThrough() != tfmtg.isStrikeThrough()) {",
                "+            if (tfmtg.isUnderline()) {",
                "+                xhtml.endElement(\"u\");",
                "+                tfmtg.setUnderline(false);",
                "+            }",
                "+            if (run.isStrikeThrough()) {",
                "+                xhtml.startElement(\"strike\");",
                "+            } else {",
                "+                xhtml.endElement(\"strike\");",
                "+            }",
                "+            tfmtg.setStrikeThrough(run.isStrikeThrough());",
                "+        }",
                "+",
                "         boolean isUnderline = run.getUnderline() != UnderlinePatterns.NONE;",
                "@@ -552,4 +577,7 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "         private boolean underline = false;",
                "+        private boolean strikeThrough = false;",
                "-        private TmpFormatting(boolean bold, boolean italic, boolean underline) {",
                "+",
                "+        private TmpFormatting(boolean bold, boolean italic, boolean underline,",
                "+                              boolean strikeThrough) {",
                "             this.bold = bold;",
                "@@ -557,2 +585,3 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "             this.underline = underline;",
                "+            this.strikeThrough = strikeThrough;",
                "         }",
                "@@ -584,2 +613,9 @@ public class XWPFWordExtractorDecorator extends AbstractOOXMLExtractor {",
                "+        public boolean isStrikeThrough() {",
                "+            return strikeThrough;",
                "+        }",
                "+",
                "+        public void setStrikeThrough(boolean strikeThrough) {",
                "+            this.strikeThrough = strikeThrough;",
                "+        }",
                "     }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2347": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2347",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "18aa69a16f09232413e06d04e921427ff4356cec",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507762952,
            "hunks": 4,
            "message": "[TIKA-1788] RFC822Parser: provide email attachment filenames when available",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "index 961ccfba1..864890d78 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "@@ -46,2 +46,3 @@ import org.apache.james.mime4j.dom.field.UnstructuredField;",
                " import org.apache.james.mime4j.field.LenientFieldParser;",
                "+import org.apache.james.mime4j.message.MaximalBodyDescriptor;",
                " import org.apache.james.mime4j.parser.ContentHandler;",
                "@@ -153,2 +154,10 @@ class MailContentHandler implements ContentHandler {",
                "+        if (body instanceof MaximalBodyDescriptor) {",
                "+            MaximalBodyDescriptor maximalBody = (MaximalBodyDescriptor) body;",
                "+            String contentDispositionFileName = maximalBody.getContentDispositionFilename();",
                "+            if (contentDispositionFileName != null) {",
                "+                submd.set(Metadata.RESOURCE_NAME_KEY, contentDispositionFileName);",
                "+            }",
                "+        }",
                "+",
                "         try {",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java b/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java",
                "index ff546f48a..03bce971d 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java",
                "@@ -24,2 +24,3 @@ import java.util.Set;",
                " import org.apache.james.mime4j.MimeException;",
                "+import org.apache.james.mime4j.message.DefaultBodyDescriptorBuilder;",
                " import org.apache.james.mime4j.parser.MimeStreamParser;",
                "@@ -69,3 +70,3 @@ public class RFC822Parser extends AbstractParser {",
                "-        MimeStreamParser parser = new MimeStreamParser(config);",
                "+        MimeStreamParser parser = new MimeStreamParser(config, null, new DefaultBodyDescriptorBuilder());",
                "         XHTMLContentHandler xhtml = new XHTMLContentHandler(handler, metadata);"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/mail/RFC822Parser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1788": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1788",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "06486c8548daf5f9ba588da4e88e3da82a429e70",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510674489,
            "hunks": 10,
            "message": "TIKA-2483 -- revert loading of mime repository in PackageParser from TIKA-2311 to avoid NPE in ForkParser",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java",
                "index d8341af33..32e06c0a7 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java",
                "@@ -43,3 +43,2 @@ import org.apache.commons.compress.archivers.zip.ZipArchiveInputStream;",
                " import org.apache.commons.io.input.CloseShieldInputStream;",
                "-import org.apache.tika.config.TikaConfig;",
                " import org.apache.tika.exception.EncryptedDocumentException;",
                "@@ -53,3 +52,2 @@ import org.apache.tika.metadata.TikaCoreProperties;",
                " import org.apache.tika.mime.MediaType;",
                "-import org.apache.tika.mime.MediaTypeRegistry;",
                " import org.apache.tika.parser.AbstractParser;",
                "@@ -87,2 +85,6 @@ public class PackageParser extends AbstractParser {",
                "+    private static final MediaType TIKA_OOXML = MediaType.application(\"tika-ooxml\");",
                "+    private static final MediaType GTAR = MediaType.application(\"x-gtar\");",
                "+",
                "+",
                "     private static final Set<MediaType> SUPPORTED_TYPES =",
                "@@ -90,7 +92,4 @@ public class PackageParser extends AbstractParser {",
                "-    //this can't be static because of the ForkParser",
                "-    //lazily load this when parse is called if it is null.",
                "-    private MediaTypeRegistry bufferedMediaTypeRegistry;",
                "-",
                "-    private final Object lock = new Object[0];",
                "+    private static final Set<MediaType> DONT_OVERWRITE_CONTENT_TYPE =",
                "+            MediaType.set(TIKA_OOXML, GTAR);",
                "@@ -151,22 +150,2 @@ public class PackageParser extends AbstractParser {",
                "-        //lazily load the MediaTypeRegistry at parse time",
                "-        //only want to call getDefaultConfig() once, and can't",
                "-        //load statically because of the ForkParser",
                "-        TikaConfig config = context.get(TikaConfig.class);",
                "-        MediaTypeRegistry mediaTypeRegistry = null;",
                "-        if (config != null) {",
                "-            mediaTypeRegistry = config.getMediaTypeRegistry();",
                "-        } else {",
                "-            if (bufferedMediaTypeRegistry == null) {",
                "-                //buffer this for next time.",
                "-                synchronized (lock) {",
                "-                    //now that we're locked, check again",
                "-                    if (bufferedMediaTypeRegistry == null) {",
                "-                        bufferedMediaTypeRegistry = TikaConfig.getDefaultConfig().getMediaTypeRegistry();",
                "-                    }",
                "-                }",
                "-            }",
                "-            mediaTypeRegistry = bufferedMediaTypeRegistry;",
                "-        }",
                "-",
                "         // Ensure that the stream supports the mark feature",
                "@@ -218,3 +197,3 @@ public class PackageParser extends AbstractParser {",
                "-        updateMediaType(ais, mediaTypeRegistry, metadata);",
                "+        updateMediaType(ais, metadata);",
                "         // Use the delegate parser to parse the contained document",
                "@@ -250,3 +229,3 @@ public class PackageParser extends AbstractParser {",
                "-    private void updateMediaType(ArchiveInputStream ais, MediaTypeRegistry mediaTypeRegistry, Metadata metadata) {",
                "+    private void updateMediaType(ArchiveInputStream ais, Metadata metadata) {",
                "         MediaType type = getMediaType(ais);",
                "@@ -269,9 +248,6 @@ public class PackageParser extends AbstractParser {",
                "         }",
                "-        //if the existing type is a specialization of the detected type,",
                "-        //leave in the specialization; otherwise set the detected",
                "-        if (! mediaTypeRegistry.isSpecializationOf(incomingMediaType, type)) {",
                "+",
                "+        if (! DONT_OVERWRITE_CONTENT_TYPE.contains(incomingMediaType)) {",
                "             metadata.set(CONTENT_TYPE, type.toString());",
                "-            return;",
                "         }",
                "-",
                "     }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2483": "",
                "TIKA-2311": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2483, TIKA-2311",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "2169cae44277a18430e4de462b4ae5b1dfb8956b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512742073,
            "hunks": 20,
            "message": "Fix thread-safety in ChmExtractor (TIKA-2519).",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "index faadc4d5d..6105436f4 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "@@ -60,2 +60,3 @@ public class ChmExtractor {",
                "     private long lzxBlockLength;",
                "+    private final ChmBlockInfo chmBlockInfo = new ChmBlockInfo();",
                "@@ -268,5 +269,5 @@ public class ChmExtractor {",
                "                 /* Gets a chm hit_cache info */",
                "-                ChmBlockInfo bb = ChmBlockInfo.getChmBlockInfoInstance(",
                "+                ChmBlockInfo.resetChmBlockInfoInstance(",
                "                         directoryListingEntry, (int) getChmLzxcResetTable()",
                "-                                .getBlockLen(), getChmLzxcControlData());",
                "+                                .getBlockLen(), getChmLzxcControlData(), chmBlockInfo);",
                "@@ -283,3 +284,3 @@ public class ChmExtractor {",
                "                             int bn = getLzxBlocksCache().get(i).getBlockNumber();",
                "-                            for (int j = bb.getIniBlock(); j <= bb.getStartBlock(); j++) {",
                "+                            for (int j = chmBlockInfo.getIniBlock(); j <= chmBlockInfo.getStartBlock(); j++) {",
                "                                 if (bn == j) {",
                "@@ -291,3 +292,3 @@ public class ChmExtractor {",
                "                             }",
                "-                            if (start == bb.getStartBlock())",
                "+                            if (start == chmBlockInfo.getStartBlock())",
                "                                 break;",
                "@@ -298,3 +299,3 @@ public class ChmExtractor {",
                "                     if (start<0) {",
                "-                        start = bb.getIniBlock();",
                "+                        start = chmBlockInfo.getIniBlock();",
                "@@ -314,6 +315,6 @@ public class ChmExtractor {",
                "-                    for (i = start; i <= bb.getEndBlock();) {",
                "-                        if (i == bb.getStartBlock() && i == bb.getEndBlock()) {",
                "+                    for (i = start; i <= chmBlockInfo.getEndBlock();) {",
                "+                        if (i == chmBlockInfo.getStartBlock() && i == chmBlockInfo.getEndBlock()) {",
                "                             buffer.write(lzxBlock.getContent(",
                "-                                    bb.getStartOffset(), bb.getEndOffset()));",
                "+                                    chmBlockInfo.getStartOffset(), chmBlockInfo.getEndOffset()));",
                "                             break;",
                "@@ -321,8 +322,8 @@ public class ChmExtractor {",
                "-                        if (i == bb.getStartBlock()) {",
                "+                        if (i == chmBlockInfo.getStartBlock()) {",
                "                             buffer.write(lzxBlock.getContent(",
                "-                                    bb.getStartOffset()));",
                "+                                    chmBlockInfo.getStartOffset()));",
                "                         }",
                "-                        if (i > bb.getStartBlock() && i < bb.getEndBlock()) {",
                "+                        if (i > chmBlockInfo.getStartBlock() && i < chmBlockInfo.getEndBlock()) {",
                "                             buffer.write(lzxBlock.getContent());",
                "@@ -330,5 +331,5 @@ public class ChmExtractor {",
                "-                        if (i == bb.getEndBlock()) {",
                "+                        if (i == chmBlockInfo.getEndBlock()) {",
                "                             buffer.write(lzxBlock.getContent(",
                "-                                    0, bb.getEndOffset()));",
                "+                                    0, chmBlockInfo.getEndOffset()));",
                "                             break;",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java b/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java",
                "index cda829ce5..8bf9d5053 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java",
                "@@ -39,5 +39,3 @@ public class ChmBlockInfo {",
                "-    private static ChmBlockInfo chmBlockInfo = null;",
                "-",
                "-    private ChmBlockInfo() {",
                "+    public ChmBlockInfo() {",
                "@@ -81,2 +79,3 @@ public class ChmBlockInfo {",
                "+    @Deprecated",
                "     public static ChmBlockInfo getChmBlockInfoInstance(",
                "@@ -84,12 +83,18 @@ public class ChmBlockInfo {",
                "             ChmLzxcControlData clcd) {",
                "-        setChmBlockInfo(new ChmBlockInfo());",
                "-        getChmBlockInfo().setStartBlock(dle.getOffset() / bytesPerBlock);",
                "-        getChmBlockInfo().setEndBlock(",
                "+        return resetChmBlockInfoInstance(dle, bytesPerBlock, clcd, new ChmBlockInfo());",
                "+    }",
                "+",
                "+    public static ChmBlockInfo resetChmBlockInfoInstance(",
                "+                DirectoryListingEntry dle, int bytesPerBlock,",
                "+        ChmLzxcControlData clcd, ChmBlockInfo chmBlockInfo) {",
                "+",
                "+        chmBlockInfo.setStartBlock(dle.getOffset() / bytesPerBlock);",
                "+        chmBlockInfo.setEndBlock(",
                "                 (dle.getOffset() + dle.getLength()) / bytesPerBlock);",
                "-        getChmBlockInfo().setStartOffset(dle.getOffset() % bytesPerBlock);",
                "-        getChmBlockInfo().setEndOffset(",
                "+        chmBlockInfo.setStartOffset(dle.getOffset() % bytesPerBlock);",
                "+        chmBlockInfo.setEndOffset(",
                "                 (dle.getOffset() + dle.getLength()) % bytesPerBlock);",
                "         // potential problem with casting long to int",
                "-        getChmBlockInfo().setIniBlock(",
                "-                getChmBlockInfo().startBlock - getChmBlockInfo().startBlock",
                "+        chmBlockInfo.setIniBlock(",
                "+                chmBlockInfo.startBlock - chmBlockInfo.startBlock",
                "                         % (int) clcd.getResetInterval());",
                "@@ -97,3 +102,3 @@ public class ChmBlockInfo {",
                " //                        % (int) clcd.getResetInterval());",
                "-        return getChmBlockInfo();",
                "+        return chmBlockInfo;",
                "     }",
                "@@ -227,9 +232,2 @@ public class ChmBlockInfo {",
                "-    public static void setChmBlockInfo(ChmBlockInfo chmBlockInfo) {",
                "-        ChmBlockInfo.chmBlockInfo = chmBlockInfo;",
                "-    }",
                "-",
                "-    public static ChmBlockInfo getChmBlockInfo() {",
                "-        return chmBlockInfo;",
                "-    }",
                " }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2519": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2519",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "e757a6b825d557fb81ea0ccece2599566c966668",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516740142,
            "hunks": 1,
            "message": "Require Java 8 (TIKA-2553).",
            "diff": [
                "diff --git a/tika-parent/pom.xml b/tika-parent/pom.xml",
                "index 6cba9b50c..d17ffead6 100644",
                "--- a/tika-parent/pom.xml",
                "+++ b/tika-parent/pom.xml",
                "@@ -303,4 +303,4 @@",
                "   <properties>",
                "-    <maven.compiler.source>1.7</maven.compiler.source>",
                "-    <maven.compiler.target>1.7</maven.compiler.target>",
                "+    <maven.compiler.source>1.8</maven.compiler.source>",
                "+    <maven.compiler.target>1.8</maven.compiler.target>",
                "     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>"
            ],
            "changed_files": [
                "tika-parent/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2553": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2553",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "f3acc8f23c2f0b5fb59e3587b605486b74d0c4f8",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512096033,
            "hunks": 1,
            "message": "TIKA-2385: Fixed typo in dependency checker script",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "index 4d6abc4dd..2fba798fc 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java",
                "@@ -180,3 +180,3 @@ public class TesseractOCRParser extends AbstractParser implements Initializable",
                "             File importCheck = tmp.createTemporaryFile();",
                "-            String prg = \"import numpy, mathplotlib, skimage\";",
                "+            String prg = \"import numpy, matplotlib, skimage\";",
                "             BufferedWriter out = new BufferedWriter(new FileWriter(importCheck));"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2385": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2385",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "d4fd659ac5c3070104a85df4a535afe570b08a0e",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511805754,
            "hunks": 2,
            "message": "TIKA-2510 -- Extract media files from ooxml",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java",
                "index 4e1bfd6ef..327422eb8 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java",
                "@@ -80,2 +80,4 @@ public abstract class AbstractOOXMLExtractor implements OOXMLExtractor {",
                "     static final String RELATION_AUDIO = \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/audio\";",
                "+    static final String RELATION_MEDIA = \"http://schemas.microsoft.com/office/2007/relationships/media\";",
                "+    static final String RELATION_VIDEO = \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/video\";",
                "     static final String RELATION_DIAGRAM_DATA = \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/diagramData\";",
                "@@ -249,3 +251,6 @@ public abstract class AbstractOOXMLExtractor implements OOXMLExtractor {",
                "                 handleEmbeddedOLE(target, handler, sourceDesc + rel.getId(), parentMetadata);",
                "-            } else if (RELATION_AUDIO.equals(type)",
                "+            } else if (",
                "+                    RELATION_MEDIA.equals(type)",
                "+                    || RELATION_VIDEO.equals(type)",
                "+                    || RELATION_AUDIO.equals(type)",
                "                     || PackageRelationshipTypes.IMAGE_PART.equals(type)"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2510": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2510",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "e6e3b8817053e981f3843f1d3b7055b4ae30ed73",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516991246,
            "hunks": 0,
            "message": "Merge branch 'TIKA-1974'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1974": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1974",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "a047fa945c033666723cd0f18c536c1d56cac436",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511878801,
            "hunks": 7,
            "message": "TIKA-2510, correct fix. Only add to seen/handledTarget _after_ processing.",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java",
                "index 327422eb8..2560db0d0 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java",
                "@@ -191,3 +191,7 @@ public abstract class AbstractOOXMLExtractor implements OOXMLExtractor {",
                "             throws TikaException, IOException, SAXException {",
                "-        Set<String> seen = new HashSet<>();",
                "+        //keep track of media items that have been handled",
                "+        //there can be multiple relationships pointing to the",
                "+        //same underlying media item.  We only want to process",
                "+        //the underlying media item once.",
                "+        Set<String> handledTarget = new HashSet<>();",
                "         try {",
                "@@ -200,3 +204,3 @@ public abstract class AbstractOOXMLExtractor implements OOXMLExtractor {",
                "                     try {",
                "-                        handleEmbeddedPart(source, rel, handler, metadata, seen);",
                "+                        handleEmbeddedPart(source, rel, handler, metadata, handledTarget);",
                "                     } catch (Exception e) {",
                "@@ -215,3 +219,3 @@ public abstract class AbstractOOXMLExtractor implements OOXMLExtractor {",
                "     private void handleEmbeddedPart(PackagePart source, PackageRelationship rel,",
                "-                                    ContentHandler handler, Metadata parentMetadata, Set<String> seen)",
                "+                                    ContentHandler handler, Metadata parentMetadata, Set<String> handledTarget)",
                "             throws IOException, SAXException, TikaException, InvalidFormatException {",
                "@@ -219,6 +223,5 @@ public abstract class AbstractOOXMLExtractor implements OOXMLExtractor {",
                "         if (targetURI != null) {",
                "-            if (seen.contains(targetURI.toString())) {",
                "+            if (handledTarget.contains(targetURI.toString())) {",
                "                 return;",
                "             }",
                "-            seen.add(targetURI.toString());",
                "         }",
                "@@ -239,26 +242,29 @@ public abstract class AbstractOOXMLExtractor implements OOXMLExtractor {",
                "         }",
                "-            PackagePart target;",
                "+        PackagePart target;",
                "-            try {",
                "-                target = source.getRelatedPart(rel);",
                "-            } catch (IllegalArgumentException ex) {",
                "-                return;",
                "-            }",
                "+        try {",
                "+            target = source.getRelatedPart(rel);",
                "+        } catch (IllegalArgumentException ex) {",
                "+            return;",
                "+        }",
                "-            String type = rel.getRelationshipType();",
                "-            if (POIXMLDocument.OLE_OBJECT_REL_TYPE.equals(type)",
                "-                    && TYPE_OLE_OBJECT.equals(target.getContentType())) {",
                "-                handleEmbeddedOLE(target, handler, sourceDesc + rel.getId(), parentMetadata);",
                "-            } else if (",
                "-                    RELATION_MEDIA.equals(type)",
                "-                    || RELATION_VIDEO.equals(type)",
                "-                    || RELATION_AUDIO.equals(type)",
                "-                    || PackageRelationshipTypes.IMAGE_PART.equals(type)",
                "-                    || POIXMLDocument.PACK_OBJECT_REL_TYPE.equals(type)",
                "-                    || POIXMLDocument.OLE_OBJECT_REL_TYPE.equals(type)) {",
                "-                handleEmbeddedFile(target, handler, sourceDesc + rel.getId());",
                "-            } else if (XSSFRelation.VBA_MACROS.getRelation().equals(type)) {",
                "-                handleMacros(target, handler);",
                "-            }",
                "+        String type = rel.getRelationshipType();",
                "+        if (POIXMLDocument.OLE_OBJECT_REL_TYPE.equals(type)",
                "+                && TYPE_OLE_OBJECT.equals(target.getContentType())) {",
                "+            handleEmbeddedOLE(target, handler, sourceDesc + rel.getId(), parentMetadata);",
                "+            handledTarget.add(targetURI.toString());",
                "+        } else if (",
                "+                RELATION_MEDIA.equals(type)",
                "+                        || RELATION_VIDEO.equals(type)",
                "+                        || RELATION_AUDIO.equals(type)",
                "+                        || PackageRelationshipTypes.IMAGE_PART.equals(type)",
                "+                        || POIXMLDocument.PACK_OBJECT_REL_TYPE.equals(type)",
                "+                        || POIXMLDocument.OLE_OBJECT_REL_TYPE.equals(type)) {",
                "+            handleEmbeddedFile(target, handler, sourceDesc + rel.getId());",
                "+            handledTarget.add(targetURI.toString());",
                "+        } else if (XSSFRelation.VBA_MACROS.getRelation().equals(type)) {",
                "+            handleMacros(target, handler);",
                "+            handledTarget.add(targetURI.toString());",
                "         }",
                "+    }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/AbstractOOXMLExtractor.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2510": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2510",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "68296437b23052ebc4415a9cec9aadc14141f634",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1517423588,
            "hunks": 14,
            "message": "TIKA-2547: RFC822 with multipart/mixed, first text element should be treated as the main body of the email, not an attachment.",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "index 40db8f37d..ddc32b8fd 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "@@ -35,2 +35,3 @@ import org.apache.james.mime4j.stream.BodyDescriptor;",
                " import org.apache.james.mime4j.stream.Field;",
                "+import org.apache.tika.detect.Detector;",
                " import org.apache.tika.exception.TikaException;",
                "@@ -149,2 +150,3 @@ class MailContentHandler implements ContentHandler {",
                "     private final EmbeddedDocumentExtractor extractor;",
                "+    private final Detector detector;",
                "@@ -169,2 +171,3 @@ class MailContentHandler implements ContentHandler {",
                "         this.extractor = EmbeddedDocumentUtil.getEmbeddedDocumentExtractor(context);",
                "+        this.detector = new EmbeddedDocumentUtil(context).getDetector();",
                "     }",
                "@@ -186,3 +189,3 @@ class MailContentHandler implements ContentHandler {",
                "             submd.set(Message.MULTIPART_BOUNDARY, parts.peek().getBoundary());",
                "-        }   ",
                "+        }",
                "         if (body instanceof MaximalBodyDescriptor) {",
                "@@ -191,7 +194,7 @@ class MailContentHandler implements ContentHandler {",
                "             if (contentDispositionType != null && !contentDispositionType.isEmpty()) {",
                "-                StringBuilder contentDisposition = new StringBuilder( contentDispositionType );",
                "+                StringBuilder contentDisposition = new StringBuilder(contentDispositionType);",
                "                 Map<String, String> contentDispositionParameters = maximalBody.getContentDispositionParameters();",
                "-                for ( Entry<String, String> param : contentDispositionParameters.entrySet() ) {",
                "+                for (Entry<String, String> param : contentDispositionParameters.entrySet()) {",
                "                     contentDisposition.append(\"; \")",
                "-                                      .append(param.getKey()).append(\"=\\\"\").append(param.getValue()).append('\"');",
                "+                            .append(param.getKey()).append(\"=\\\"\").append(param.getValue()).append('\"');",
                "                 }",
                "@@ -203,3 +206,3 @@ class MailContentHandler implements ContentHandler {",
                "-                submd.set( Metadata.CONTENT_DISPOSITION, contentDisposition.toString() );",
                "+                submd.set(Metadata.CONTENT_DISPOSITION, contentDisposition.toString());",
                "             }",
                "@@ -208,3 +211,3 @@ class MailContentHandler implements ContentHandler {",
                "         //add the bodypart to the latest that was added",
                "-        if (! extractAllAlternatives && alternativePartBuffer.size() > 0) {",
                "+        if (!extractAllAlternatives && alternativePartBuffer.size() > 0) {",
                "             ByteArrayOutputStream bos = new ByteArrayOutputStream();",
                "@@ -212,2 +215,18 @@ class MailContentHandler implements ContentHandler {",
                "             alternativePartBuffer.peek().children.add(new BodyContents(submd, bos.toByteArray()));",
                "+        } else if (!extractAllAlternatives && parts.size() == 1) {",
                "+            //if you're at the first level of embedding",
                "+            //and you're not in an alternative part block",
                "+            //and you're text/html, put that in the body of the email",
                "+            //otherwise treat as a regular attachment",
                "+            ByteArrayOutputStream bos = new ByteArrayOutputStream();",
                "+            IOUtils.copy(is, bos);",
                "+            byte[] bytes = bos.toByteArray();",
                "+            if (isTextOrHtml(submd, bytes)) {",
                "+                handleInlineBodyPart(new BodyContents(submd, bos.toByteArray()));",
                "+            } else {",
                "+                //else handle as you would any other embedded content",
                "+                try (TikaInputStream tis = TikaInputStream.get(bytes)) {",
                "+                    handleEmbedded(tis, submd);",
                "+                }",
                "+            }",
                "         } else {",
                "@@ -220,2 +239,18 @@ class MailContentHandler implements ContentHandler {",
                "+    private boolean isTextOrHtml(Metadata submd, byte[] bytes) {",
                "+        String mediaTypeString = submd.get(Metadata.CONTENT_TYPE);",
                "+        if (mediaTypeString != null && mediaTypeString.startsWith(\"text\")) {",
                "+            return true;",
                "+        }",
                "+        try (TikaInputStream tis = TikaInputStream.get(bytes)) {",
                "+            MediaType mediaType = detector.detect(tis, submd);",
                "+            if (mediaType != null && mediaType.toString().startsWith(\"text\")) {",
                "+                return true;",
                "+            }",
                "+        } catch (IOException e) {",
                "+",
                "+        }",
                "+        return false;",
                "+    }",
                "+",
                "     private void handleEmbedded(TikaInputStream tis, Metadata metadata) throws MimeException, IOException {",
                "@@ -518,3 +553,3 @@ class MailContentHandler implements ContentHandler {",
                "         if (part instanceof BodyContents) {",
                "-            handlePart((BodyContents)part);",
                "+            handleInlineBodyPart((BodyContents)part);",
                "             return;",
                "@@ -541,3 +576,3 @@ class MailContentHandler implements ContentHandler {",
                "-    private void handlePart(BodyContents part) throws MimeException, IOException {",
                "+    private void handleInlineBodyPart(BodyContents part) throws MimeException, IOException {",
                "         String contentType = part.metadata.get(Metadata.CONTENT_TYPE);",
                "@@ -557,2 +592,3 @@ class MailContentHandler implements ContentHandler {",
                "         if (parser == null) {",
                "+            //back off and treat it as an embedded chunk",
                "             try (TikaInputStream tis = TikaInputStream.get(part.bytes)) {"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2547": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "tika-1.28.2-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2547",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "90d624588483f379180c812b7235bb2222be9c2e",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512751058,
            "hunks": 10,
            "message": "TIKA-2483 -- add in all children of zip and tar to prevent overwriting of child file types by the PackageParser.  Ensure that our semi-manual list is updated when there are changes to TikaConfig.",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java",
                "index 32e06c0a7..6ec201eb0 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java",
                "@@ -18,3 +18,2 @@ package org.apache.tika.parser.pkg;",
                "-import static org.apache.tika.metadata.HttpHeaders.CONTENT_TYPE;",
                "@@ -23,3 +22,5 @@ import java.io.IOException;",
                " import java.io.InputStream;",
                "+import java.util.Collections;",
                " import java.util.Date;",
                "+import java.util.HashSet;",
                " import java.util.Set;",
                "@@ -85,4 +86,5 @@ public class PackageParser extends AbstractParser {",
                "-    private static final MediaType TIKA_OOXML = MediaType.application(\"tika-ooxml\");",
                "+    private static final MediaType TIKA_OOXML = MediaType.application(\"x-tika-ooxml\");",
                "     private static final MediaType GTAR = MediaType.application(\"x-gtar\");",
                "+    private static final MediaType KMZ = MediaType.application(\"vnd.google-earth.kmz\");",
                "@@ -92,4 +94,76 @@ public class PackageParser extends AbstractParser {",
                "-    private static final Set<MediaType> DONT_OVERWRITE_CONTENT_TYPE =",
                "-            MediaType.set(TIKA_OOXML, GTAR);",
                "+    //We used to avoid overwriting file types if the file type",
                "+    //was a specialization of zip/tar.  We determined specialization of zip",
                "+    //via TikaConfig at parse time.",
                "+    //However, TIKA-2483 showed that TikaConfig is not serializable",
                "+    //and this causes an exception in the ForkParser.",
                "+    //The following is an inelegant hack, but until we can serialize TikaConfig,",
                "+    //or dramatically rework the ForkParser to avoid serialization",
                "+    //of parsers, this is what we have.",
                "+    //There is at least a test in PackageParserTest that makes sure that we",
                "+    //keep this list updated.",
                "+    static final Set<MediaType> PACKAGE_SPECIALIZATIONS =",
                "+            loadPackageSpecializations();",
                "+",
                "+    static final Set<MediaType> loadPackageSpecializations() {",
                "+        Set<MediaType> zipSpecializations = new HashSet<>();",
                "+        for (String mediaTypeString : new String[]{",
                "+                //specializations of ZIP",
                "+                \"application/bizagi-modeler\",",
                "+                \"application/epub+zip\",",
                "+                \"application/java-archive\",",
                "+                \"application/vnd.adobe.air-application-installer-package+zip\",",
                "+                \"application/vnd.android.package-archive\",",
                "+                \"application/vnd.apple.iwork\",",
                "+                \"application/vnd.apple.keynote\",",
                "+                \"application/vnd.apple.numbers\",",
                "+                \"application/vnd.apple.pages\",",
                "+                \"application/vnd.etsi.asic-e+zip\",",
                "+                \"application/vnd.etsi.asic-s+zip\",",
                "+                \"application/vnd.google-earth.kmz\",",
                "+                \"application/vnd.mindjet.mindmanager\",",
                "+                \"application/vnd.ms-excel.addin.macroenabled.12\",",
                "+                \"application/vnd.ms-excel.sheet.binary.macroenabled.12\",",
                "+                \"application/vnd.ms-excel.sheet.macroenabled.12\",",
                "+                \"application/vnd.ms-excel.template.macroenabled.12\",",
                "+                \"application/vnd.ms-powerpoint.addin.macroenabled.12\",",
                "+                \"application/vnd.ms-powerpoint.presentation.macroenabled.12\",",
                "+                \"application/vnd.ms-powerpoint.slide.macroenabled.12\",",
                "+                \"application/vnd.ms-powerpoint.slideshow.macroenabled.12\",",
                "+                \"application/vnd.ms-powerpoint.template.macroenabled.12\",",
                "+                \"application/vnd.ms-visio.drawing\",",
                "+                \"application/vnd.ms-visio.drawing.macroenabled.12\",",
                "+                \"application/vnd.ms-visio.stencil\",",
                "+                \"application/vnd.ms-visio.stencil.macroenabled.12\",",
                "+                \"application/vnd.ms-visio.template\",",
                "+                \"application/vnd.ms-visio.template.macroenabled.12\",",
                "+                \"application/vnd.ms-word.document.macroenabled.12\",",
                "+                \"application/vnd.ms-word.template.macroenabled.12\",",
                "+                \"application/vnd.ms-xpsdocument\",",
                "+                \"application/vnd.oasis.opendocument.formula\",",
                "+                \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",",
                "+                \"application/vnd.openxmlformats-officedocument.presentationml.slide\",",
                "+                \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\",",
                "+                \"application/vnd.openxmlformats-officedocument.presentationml.template\",",
                "+                \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",",
                "+                \"application/vnd.openxmlformats-officedocument.spreadsheetml.template\",",
                "+                \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",",
                "+                \"application/vnd.openxmlformats-officedocument.wordprocessingml.template\",",
                "+                \"application/x-ibooks+zip\",",
                "+                \"application/x-itunes-ipa\",",
                "+                \"application/x-tika-iworks-protected\",",
                "+                \"application/x-tika-java-enterprise-archive\",",
                "+                \"application/x-tika-java-web-archive\",",
                "+                \"application/x-tika-ooxml\",",
                "+                \"application/x-tika-ooxml-protected\",",
                "+                \"application/x-tika-visio-ooxml\",",
                "+                \"application/x-xmind\",",
                "+                \"model/vnd.dwfx+xps\",",
                "+",
                "+                \"application/x-gtar\" //specialization of tar",
                "+        }) {",
                "+            zipSpecializations.add(MediaType.parse(mediaTypeString));",
                "+        }",
                "+        return Collections.unmodifiableSet(zipSpecializations);",
                "+    }",
                "@@ -236,5 +310,5 @@ public class PackageParser extends AbstractParser {",
                "         //now see if the user or an earlier step has passed in a content type",
                "-        String incomingContentTypeString = metadata.get(CONTENT_TYPE);",
                "+        String incomingContentTypeString = metadata.get(Metadata.CONTENT_TYPE);",
                "         if (incomingContentTypeString == null) {",
                "-            metadata.set(CONTENT_TYPE, type.toString());",
                "+            metadata.set(Metadata.CONTENT_TYPE, type.toString());",
                "             return;",
                "@@ -245,3 +319,3 @@ public class PackageParser extends AbstractParser {",
                "         if (incomingMediaType == null) {",
                "-            metadata.set(CONTENT_TYPE, type.toString());",
                "+            metadata.set(Metadata.CONTENT_TYPE, type.toString());",
                "             return;",
                "@@ -249,4 +323,4 @@ public class PackageParser extends AbstractParser {",
                "-        if (! DONT_OVERWRITE_CONTENT_TYPE.contains(incomingMediaType)) {",
                "-            metadata.set(CONTENT_TYPE, type.toString());",
                "+        if (! PACKAGE_SPECIALIZATIONS.contains(incomingMediaType)) {",
                "+            metadata.set(Metadata.CONTENT_TYPE, type.toString());",
                "         }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/pkg/PackageParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2483": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2483",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "1f38be359b2735de94e9ae5850a3622e5393f77b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1507668888,
            "hunks": 6,
            "message": "fix for TIKA-2475 contributed by seanstory",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "index 209936019..cee709049 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java",
                "@@ -195,2 +195,3 @@ public class CharsetDetector {",
                "+        MungeInput();",
                "         return this;",
                "@@ -215,6 +216,6 @@ public class CharsetDetector {",
                "         fInputStream.mark(kBufSize);",
                "-        fRawInput = new byte[kBufSize];   // Always make a new buffer because the",
                "+        byte[] inputBytes = new byte[kBufSize];   // Always make a new buffer because the",
                "         //   previous one may have come from the caller,",
                "         //   in which case we can't touch it.",
                "-        fRawLength = 0;",
                "+        int length = 0;",
                "         int remainingLength = kBufSize;",
                "@@ -222,3 +223,3 @@ public class CharsetDetector {",
                "             // read() may give data in smallish chunks, esp. for remote sources.  Hence, this loop.",
                "-            int bytesRead = fInputStream.read(fRawInput, fRawLength, remainingLength);",
                "+            int bytesRead = fInputStream.read(inputBytes, length, remainingLength);",
                "             if (bytesRead <= 0) {",
                "@@ -226,3 +227,2 @@ public class CharsetDetector {",
                "             }",
                "-            fRawLength += bytesRead;",
                "             remainingLength -= bytesRead;",
                "@@ -231,4 +231,3 @@ public class CharsetDetector {",
                "-        MungeInput();                     // Strip html markup, collect byte stats.",
                "-        return this;",
                "+        return setText(inputBytes);",
                "     }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2475": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2475",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "9c2e1b9d839cffbc0820b789ffdd17a9a0b10759",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1510586937,
            "hunks": 8,
            "message": "TIKA-2488 -- catch potential npe in getting attachment's inputstream",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/mbox/OutlookPSTParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/mbox/OutlookPSTParser.java",
                "index 7a6ada88c..61d7bac65 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mbox/OutlookPSTParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mbox/OutlookPSTParser.java",
                "@@ -127,4 +127,10 @@ public class OutlookPSTParser extends AbstractParser {",
                "-                parserMailItem(handler, pstMail, embeddedExtractor);",
                "-                parseMailAttachments(handler, pstMail, embeddedExtractor);",
                "+                final Metadata mailMetadata = new Metadata();",
                "+                //parse attachments first so that stream exceptions",
                "+                //in attachments can make it into mailMetadata.",
                "+                //RecursiveParserWrapper copies the metadata and thereby prevents",
                "+                //modifications to mailMetadata from making it into the",
                "+                //metadata objects cached by the RecursiveParserWrapper",
                "+                parseMailAttachments(handler, pstMail, mailMetadata, embeddedExtractor);",
                "+                parserMailItem(handler, pstMail, mailMetadata, embeddedExtractor);",
                "@@ -146,4 +152,4 @@ public class OutlookPSTParser extends AbstractParser {",
                "-    private void parserMailItem(XHTMLContentHandler handler, PSTMessage pstMail, EmbeddedDocumentExtractor embeddedExtractor) throws SAXException, IOException {",
                "-        Metadata mailMetadata = new Metadata();",
                "+    private void parserMailItem(XHTMLContentHandler handler, PSTMessage pstMail, Metadata mailMetadata,",
                "+                                EmbeddedDocumentExtractor embeddedExtractor) throws SAXException, IOException {",
                "         mailMetadata.set(Metadata.RESOURCE_NAME_KEY, pstMail.getInternetMessageId());",
                "@@ -219,3 +225,5 @@ public class OutlookPSTParser extends AbstractParser {",
                "-    private void parseMailAttachments(XHTMLContentHandler xhtml, PSTMessage email, EmbeddedDocumentExtractor embeddedExtractor)",
                "+    private void parseMailAttachments(XHTMLContentHandler xhtml, PSTMessage email,",
                "+                                     final Metadata mailMetadata,",
                "+                                      EmbeddedDocumentExtractor embeddedExtractor)",
                "             throws TikaException {",
                "@@ -223,3 +231,2 @@ public class OutlookPSTParser extends AbstractParser {",
                "         for (int i = 0; i < numberOfAttachments; i++) {",
                "-            File tempFile = null;",
                "             try {",
                "@@ -243,8 +250,15 @@ public class OutlookPSTParser extends AbstractParser {",
                "                 if (embeddedExtractor.shouldParseEmbedded(attachMeta)) {",
                "-                    TemporaryResources tmp = new TemporaryResources();",
                "+                    TikaInputStream tis = null;",
                "+                    try {",
                "+                        tis = TikaInputStream.get(attach.getFileInputStream());",
                "+                    } catch (NullPointerException e) {//TIKA-2488",
                "+                        EmbeddedDocumentUtil.recordEmbeddedStreamException(e, mailMetadata);",
                "+                        continue;",
                "+                    }",
                "+",
                "                     try {",
                "-                        TikaInputStream tis = TikaInputStream.get(attach.getFileInputStream(), tmp);",
                "                         embeddedExtractor.parseEmbedded(tis, xhtml, attachMeta, true);",
                "                     } finally {",
                "-                        tmp.dispose();",
                "+",
                "+                        tis.close();",
                "                     }",
                "@@ -255,5 +269,2 @@ public class OutlookPSTParser extends AbstractParser {",
                "                 throw new TikaException(\"Unable to unpack document stream\", e);",
                "-            } finally {",
                "-                if (tempFile != null)",
                "-                    tempFile.delete();",
                "             }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/mbox/OutlookPSTParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2488": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2488",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "88a5e5179f4104c8e4f8e33a58753efb06fc3139",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1509737440,
            "hunks": 10,
            "message": "TIKA-2490 and TIKA-2491 -- turn off initializable problem stderr warnings in tika-app, confirm that configuration of initializable problems works from an input file and allow for a tika-config.xml file without specifying a classloader",
            "diff": [
                "diff --git a/tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java b/tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java",
                "index df68210ef..7d87ec968 100644",
                "--- a/tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java",
                "+++ b/tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java",
                "@@ -190,3 +190,2 @@ public class TikaCLI {",
                "             LOG.info(warn);",
                "-            System.err.println(warn);",
                "             context.set(PDFParserConfig.class, pdfParserConfig);",
                "@@ -1094,3 +1093,2 @@ public class TikaCLI {",
                "                 );",
                "-                System.err.println(msg);",
                "                 LOG.warn(msg, e);",
                "diff --git a/tika-core/src/main/java/org/apache/tika/config/TikaConfig.java b/tika-core/src/main/java/org/apache/tika/config/TikaConfig.java",
                "index 951804210..5b1b1ab81 100644",
                "--- a/tika-core/src/main/java/org/apache/tika/config/TikaConfig.java",
                "+++ b/tika-core/src/main/java/org/apache/tika/config/TikaConfig.java",
                "@@ -73,2 +73,4 @@ import org.xml.sax.SAXException;",
                "+import static org.apache.tika.config.ServiceLoader.getContextClassLoader;",
                "+",
                " /**",
                "@@ -125,3 +127,3 @@ public class TikaConfig {",
                "             throws TikaException, IOException, SAXException {",
                "-        this(path, new ServiceLoader());",
                "+        this(XMLReaderUtils.getDocumentBuilder().parse(path.toFile()));",
                "     }",
                "@@ -134,4 +136,5 @@ public class TikaConfig {",
                "             throws TikaException, IOException, SAXException {",
                "-        this(file, new ServiceLoader());",
                "+        this(XMLReaderUtils.getDocumentBuilder().parse(file));",
                "     }",
                "+",
                "     public TikaConfig(File file, ServiceLoader loader)",
                "@@ -243,3 +246,3 @@ public class TikaConfig {",
                "             this.serviceLoader = new ServiceLoader();",
                "-            this.mimeTypes = getDefaultMimeTypes(ServiceLoader.getContextClassLoader());",
                "+            this.mimeTypes = getDefaultMimeTypes(getContextClassLoader());",
                "             this.encodingDetector = getDefaultEncodingDetector(serviceLoader);",
                "@@ -479,2 +482,3 @@ public class TikaConfig {",
                "         ServiceLoader serviceLoader;",
                "+",
                "         if (serviceLoaderElement != null) {",
                "@@ -488,4 +492,7 @@ public class TikaConfig {",
                "             }",
                "-",
                "             InitializableProblemHandler initializableProblemHandler = getInitializableProblemHandler(serviceLoaderElement.getAttribute(\"initializableProblemHandler\"));",
                "+",
                "+            if (loader == null) {",
                "+                loader = ServiceLoader.getContextClassLoader();",
                "+            }",
                "             serviceLoader = new ServiceLoader(loader, loadErrorHandler, initializableProblemHandler, dynamic);"
            ],
            "changed_files": [
                "tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java",
                "tika-core/src/main/java/org/apache/tika/config/TikaConfig.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2490": "",
                "TIKA-2491": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2490, TIKA-2491",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "fb68c39a58819afaf2e80f8a67b90d5817506ea2",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516735833,
            "hunks": 4,
            "message": "TIKA-2535 - fix bundle requirements",
            "diff": [
                "diff --git a/tika-bundle/pom.xml b/tika-bundle/pom.xml",
                "index 2b075cace..27f070ce8 100644",
                "--- a/tika-bundle/pom.xml",
                "+++ b/tika-bundle/pom.xml",
                "@@ -170,5 +170,5 @@",
                "               sis-storage|",
                "+              unit-api|",
                "               apache-mime4j-core|",
                "               apache-mime4j-dom|",
                "-              jsr-275|",
                "               jhighlight|",
                "@@ -256,3 +256,8 @@",
                "               org.apache.sis.distance;resolution:=optional,",
                "+              org.apache.sis.feature;resolution:=optional,",
                "               org.apache.sis.geometry;resolution:=optional,",
                "+              org.apache.sis.internal.feature;resolution:=optional,",
                "+              org.apache.sis.internal.referencing;resolution:=optional,",
                "+              org.apache.sis.parameter;resolution:=optional,",
                "+              org.apache.sis.referencing;resolution:=optional,",
                "               org.apache.tools.ant;resolution:=optional,"
            ],
            "changed_files": [
                "tika-bundle/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2535": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2535",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "6a398bd3f6245543091fd7c0e9e4facb34a26882",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1514842374,
            "hunks": 2,
            "message": "fix for TIKA-1191 contributed by BenRomberg",
            "diff": [
                "diff --git a/tika-core/src/main/java/org/apache/tika/fork/ClassLoaderProxy.java b/tika-core/src/main/java/org/apache/tika/fork/ClassLoaderProxy.java",
                "index 920926d74..01b0ba548 100644",
                "--- a/tika-core/src/main/java/org/apache/tika/fork/ClassLoaderProxy.java",
                "+++ b/tika-core/src/main/java/org/apache/tika/fork/ClassLoaderProxy.java",
                "@@ -114,3 +114,5 @@ class ClassLoaderProxy extends ClassLoader implements ForkProxy {",
                "                 byte[] data = readStream();",
                "-                return defineClass(name, data, 0, data.length);",
                "+                Class<?> clazz = defineClass(name, data, 0, data.length);",
                "+                definePackageIfNecessary(name, clazz);",
                "+                return clazz;",
                "             } else {",
                "@@ -123,2 +125,17 @@ class ClassLoaderProxy extends ClassLoader implements ForkProxy {",
                "+    private void definePackageIfNecessary(String className, Class<?> clazz) {",
                "+        String packageName = toPackageName(className);",
                "+        if (packageName != null && getPackage(packageName) == null) {",
                "+            definePackage(packageName, null, null, null, null, null, null, null);",
                "+        }",
                "+    }",
                "+",
                "+    private String toPackageName(String className) {",
                "+        int packageEndIndex = className.lastIndexOf('.');",
                "+        if (packageEndIndex > 0) {",
                "+            return className.substring(0, packageEndIndex);",
                "+        }",
                "+        return null;",
                "+    }",
                "+",
                "     private byte[] readStream() throws IOException {"
            ],
            "changed_files": [
                "tika-core/src/main/java/org/apache/tika/fork/ClassLoaderProxy.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-1191": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-1191",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "95baca2b58538ec1d75fc5b6c80fd06b7eebb7dc",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512744030,
            "hunks": 8,
            "message": "TIKA-2519 clean up, fix bug in MultiThreadedTikaTest files that failed to prevent files that caused exceptions; revert new ChmBlockInfo() to private",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java b/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "index 6105436f4..3eefa21e2 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "@@ -60,3 +60,3 @@ public class ChmExtractor {",
                "     private long lzxBlockLength;",
                "-    private final ChmBlockInfo chmBlockInfo = new ChmBlockInfo();",
                "+    private ChmBlockInfo chmBlockInfo = null;//this will be instantiated at first call of",
                "@@ -269,3 +269,3 @@ public class ChmExtractor {",
                "                 /* Gets a chm hit_cache info */",
                "-                ChmBlockInfo.resetChmBlockInfoInstance(",
                "+                chmBlockInfo = ChmBlockInfo.getChmBlockInfoInstance(",
                "                         directoryListingEntry, (int) getChmLzxcResetTable()",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java b/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java",
                "index 8bf9d5053..15b1c8d31 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java",
                "@@ -39,3 +39,3 @@ public class ChmBlockInfo {",
                "-    public ChmBlockInfo() {",
                "+    private ChmBlockInfo() {",
                "@@ -43,38 +43,2 @@ public class ChmBlockInfo {",
                "-    /**",
                "-     * Returns an information related to the chmBlockInfo",
                "-     * ",
                "-     * @param dle",
                "-     *            - DirectoryListingEntry",
                "-     * @param bytesPerBlock",
                "-     *            - int, = chmLzxcResetTable.block_length",
                "-     * @param clcd",
                "-     *            - ChmLzxcControlData",
                "-     * @param chmBlockInfo",
                "-     *            - ChmBlockInfo",
                "-     * ",
                "-     * @return ChmBlockInfo",
                "-     * @throws TikaException ",
                "-     */",
                "-    protected ChmBlockInfo getChmBlockInfo(DirectoryListingEntry dle,",
                "-            int bytesPerBlock, ChmLzxcControlData clcd,",
                "-            ChmBlockInfo chmBlockInfo) throws TikaException {",
                "-        if (!validateParameters(dle, bytesPerBlock, clcd, chmBlockInfo))",
                "-            throw new ChmParsingException(\"Please check you parameters\");",
                "-",
                "-        chmBlockInfo.setStartBlock(dle.getOffset() / bytesPerBlock);",
                "-        chmBlockInfo.setEndBlock((dle.getOffset() + dle.getLength())",
                "-                / bytesPerBlock);",
                "-        chmBlockInfo.setStartOffset(dle.getOffset() % bytesPerBlock);",
                "-        chmBlockInfo.setEndOffset((dle.getOffset() + dle.getLength())",
                "-                % bytesPerBlock);",
                "-        // potential problem with casting long to int",
                "-        chmBlockInfo",
                "-                .setIniBlock(chmBlockInfo.startBlock - ",
                "-                        chmBlockInfo.startBlock % (int) clcd.getResetInterval());",
                "-//                .setIniBlock((chmBlockInfo.startBlock - chmBlockInfo.startBlock)",
                "-//                        % (int) clcd.getResetInterval());",
                "-        return chmBlockInfo;",
                "-    }",
                "-",
                "     @Deprecated",
                "@@ -82,9 +46,16 @@ public class ChmBlockInfo {",
                "             DirectoryListingEntry dle, int bytesPerBlock,",
                "-            ChmLzxcControlData clcd) {",
                "-        return resetChmBlockInfoInstance(dle, bytesPerBlock, clcd, new ChmBlockInfo());",
                "+            ChmLzxcControlData clcd) throws ChmParsingException {",
                "+        return getChmBlockInfoInstance(dle, bytesPerBlock, clcd, new ChmBlockInfo());",
                "     }",
                "-    public static ChmBlockInfo resetChmBlockInfoInstance(",
                "+",
                "+    public static ChmBlockInfo getChmBlockInfoInstance(",
                "                 DirectoryListingEntry dle, int bytesPerBlock,",
                "-        ChmLzxcControlData clcd, ChmBlockInfo chmBlockInfo) {",
                "+        ChmLzxcControlData clcd, ChmBlockInfo chmBlockInfo) throws ChmParsingException{",
                "+        if (chmBlockInfo == null) {",
                "+            chmBlockInfo = new ChmBlockInfo();",
                "+        }",
                "+        if (!validateParameters(dle, bytesPerBlock, clcd, chmBlockInfo))",
                "+            throw new ChmParsingException(\"Please check you parameters\");",
                "+",
                "@@ -119,3 +90,3 @@ public class ChmBlockInfo {",
                "-    private boolean validateParameters(DirectoryListingEntry dle,",
                "+    private static boolean validateParameters(DirectoryListingEntry dle,",
                "             int bytesPerBlock, ChmLzxcControlData clcd,"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/chm/core/ChmExtractor.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/chm/lzx/ChmBlockInfo.java"
            ],
            "message_reference_content": [],
            "jira_refs": {
                "TIKA-2519": ""
            },
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": [
                {
                    "id": "BUG_IN_MESSAGE",
                    "message": "The commit message references some bug tracking ticket: TIKA-2519",
                    "relevance": 2
                }
            ]
        },
        {
            "commit_id": "10cd2055b43c6983aa4e7d95da53680355f39bac",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1514037946,
            "hunks": 2,
            "message": "Mime magic for AC3 and EAC3 files",
            "diff": [
                "diff --git a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "index 4bbaff168..98c77eedd 100644",
                "--- a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "+++ b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "@@ -4459,3 +4459,42 @@",
                "   <mime-type type=\"audio/3gpp2\"/>",
                "-  <mime-type type=\"audio/ac3\"/>",
                "+",
                "+  <mime-type type=\"audio/ac3\">",
                "+    <acronym>AC3</acronym>",
                "+    <_comment>Dolby Digital Audio Compression File</_comment>",
                "+    <magic priority=\"40\">",
                "+      <!-- AC3 Syncword -->",
                "+      <match value=\"0x0b77\" type=\"string\" offset=\"0\"/>",
                "+    </magic>",
                "+    <magic priority=\"50\">",
                "+      <match value=\"0x0b77\" type=\"string\" offset=\"0\">",
                "+         <!-- BSID 0-8 = AC3, BSID=byte5>>3 -->",
                "+         <match value=\"0x00\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x08\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x10\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x18\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x20\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x28\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x30\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x38\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x40\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+      </match>",
                "+    </magic>",
                "+    <glob pattern=\"*.ac3\"/>",
                "+  </mime-type>",
                "+  <mime-type type=\"audio/eac3\">",
                "+    <acronym>EAC3</acronym>",
                "+    <magic priority=\"50\">",
                "+      <match value=\"0x0b77\" type=\"string\" offset=\"0\">",
                "+         <!-- BSID 11-16 = EAC3, BSID=byte5>>3 -->",
                "+         <match value=\"0x58\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x60\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x68\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x70\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x78\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+         <match value=\"0x80\" type=\"string\" mask=\"0xF8\" offset=\"5\"/>",
                "+      </match>",
                "+    </magic>",
                "+    <sub-class-of type=\"audio/ac3\" />",
                "+  </mime-type>",
                "+",
                "   <mime-type type=\"audio/adpcm\">",
                "@@ -4515,3 +4554,2 @@",
                "   <mime-type type=\"audio/dvi4\"/>",
                "-  <mime-type type=\"audio/eac3\"/>",
                "   <mime-type type=\"audio/evrc\"/>"
            ],
            "changed_files": [
                "tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "cc08d398141ada890be0305b6d0ba3909f61b0a9",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1509958974,
            "hunks": 3,
            "message": "TIKA 2400 : Fix minor error in im2txt dockerfile",
            "diff": [
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "index 9de5d83bd..1d9016dd6 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "@@ -28,3 +28,3 @@ RUN echo \"We're downloading the checkpoint file for image captioning, the shell",
                "     # Join the parts",
                "-    cat img2text/models/1M_iters_ckpt_parts_a* >1M_iters_ckpt.tar.gz && \\",
                "+    cat img2text/models/1M_iters_ckpt_parts_* >1M_iters_ckpt.tar.gz && \\",
                "     tar -xzvf 1M_iters_ckpt.tar.gz && rm -rf 1M_iters_ckpt.tar.gz",
                "@@ -59,2 +59,2 @@ EXPOSE 8764",
                "-CMD im2txtapi",
                "\\ No newline at end of file",
                "+CMD im2txtapi"
            ],
            "changed_files": [
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "9fb3461ec63bca0060660d210399270593c3584e",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508239951,
            "hunks": 22,
            "message": "TIKA 2400 : # Minor reformatting # Include inception v4 definition script # Remove unwanted classify_image.py file # Get rid of the need to have tensorflow models with PYTHONPATH",
            "diff": [
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "index fff2d22db..97f1f2afd 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "@@ -36,12 +36,15 @@ from __future__ import print_function",
                "+import json",
                "+import logging",
                " import math",
                " import requests",
                "-import xml.etree.ElementTree as ET",
                "-import logging",
                " import sys",
                "-from time import time",
                "-from PIL import Image",
                "+",
                "+from flask import Flask, request, Response, jsonify",
                " from io import BytesIO",
                "-import flask",
                "+from PIL import Image",
                "+from time import time",
                "+",
                " import tensorflow as tf",
                "+import xml.etree.ElementTree as ET",
                "@@ -96,3 +99,3 @@ tf.logging.set_verbosity(tf.logging.INFO)",
                "-class Initializer(flask.Flask):",
                "+class Initializer(Flask):",
                "     \"\"\"",
                "@@ -125,5 +128,2 @@ def current_time():",
                "-from flask import request, Response, jsonify",
                "-import json",
                "-",
                " app = Initializer(__name__)",
                "@@ -203,3 +203,3 @@ def caption_image():",
                "         if not image_data:",
                "-            return flask.Response(status=400, response=jsonify(error=\"Could not HTTP GET %s\" % url))",
                "+            return Response(status=400, response=jsonify(error=\"Could not HTTP GET %s\" % url))",
                "         if 'image/jpeg' in c_type:",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/classify_image.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/classify_image.py",
                "deleted file mode 100644",
                "index 26a4f2353..000000000",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/classify_image.py",
                "+++ /dev/null",
                "@@ -1,253 +0,0 @@",
                "-# Copyright 2015 The TensorFlow Authors. All Rights Reserved.",
                "-#",
                "-# Licensed under the Apache License, Version 2.0 (the \"License\");",
                "-# you may not use this file except in compliance with the License.",
                "-# You may obtain a copy of the License at",
                "-#",
                "-#     http://www.apache.org/licenses/LICENSE-2.0",
                "-#",
                "-# Unless required by applicable law or agreed to in writing, software",
                "-# distributed under the License is distributed on an \"AS IS\" BASIS,",
                "-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "-# See the License for the specific language governing permissions and",
                "-# limitations under the License.",
                "-# ==============================================================================",
                "-",
                "-\"\"\"Simple image classification with Inception.",
                "-",
                "-Run image classification with Inception trained on ImageNet 2012 Challenge data",
                "-set.",
                "-",
                "-This program creates a graph from a saved GraphDef protocol buffer,",
                "-and runs inference on an input JPEG image. It outputs human readable",
                "-strings of the top 5 predictions along with their probabilities.",
                "-",
                "-Change the --image_file argument to any jpg image to compute a",
                "-classification of that image.",
                "-",
                "-Please see the tutorial and website for a detailed description of how",
                "-to use this script to perform image recognition.",
                "-",
                "-https://tensorflow.org/tutorials/image_recognition/",
                "-",
                "-Requirements:",
                "-  tensorflow",
                "-  tensorflow models (for TF-slim)",
                "-",
                "-\"\"\"",
                "-",
                "-from __future__ import absolute_import",
                "-from __future__ import division",
                "-from __future__ import print_function",
                "-",
                "-import os.path",
                "-import re",
                "-import sys",
                "-import tarfile",
                "-",
                "-import numpy as np",
                "-from six.moves import urllib",
                "-import tensorflow as tf",
                "-",
                "-from datasets import imagenet, dataset_utils",
                "-from nets import inception",
                "-from preprocessing import inception_preprocessing",
                "-",
                "-slim = tf.contrib.slim",
                "-",
                "-FLAGS = tf.app.flags.FLAGS",
                "-",
                "-# inception_v4.ckpt",
                "-#   Inception V4 checkpoint file.",
                "-# imagenet_metadata.txt",
                "-#   Map from synset ID to a human readable string.",
                "-# imagenet_lsvrc_2015_synsets.txt",
                "-#   Text representation of a protocol buffer mapping a label to synset ID.",
                "-tf.app.flags.DEFINE_string(",
                "-    'model_dir', '/tmp/imagenet',",
                "-    \"\"\"Path to inception_v4.ckpt, \"\"\"",
                "-    \"\"\"imagenet_lsvrc_2015_synsets.txt, and \"\"\"",
                "-    \"\"\"imagenet_metadata.txt.\"\"\")",
                "-tf.app.flags.DEFINE_string('image_file', '',",
                "-                           \"\"\"Absolute path to image file.\"\"\")",
                "-tf.app.flags.DEFINE_integer('num_top_predictions', 5,",
                "-                            \"\"\"Display this many predictions.\"\"\")",
                "-",
                "-# pylint: disable=line-too-long",
                "-DATA_URL = 'http://download.tensorflow.org/models/inception_v4_2016_09_09.tar.gz'",
                "-# pylint: enable=line-too-long",
                "-",
                "-",
                "-def create_readable_names_for_imagenet_labels():",
                "-    \"\"\"Create a dict mapping label id to human readable string.",
                "-",
                "-    Returns:",
                "-        labels_to_names: dictionary where keys are integers from to 1000",
                "-        and values are human-readable names.",
                "-",
                "-    We retrieve a synset file, which contains a list of valid synset labels used",
                "-    by ILSVRC competition. There is one synset one per line, eg.",
                "-            #   n01440764",
                "-            #   n01443537",
                "-    We also retrieve a synset_to_human_file, which contains a mapping from synsets",
                "-    to human-readable names for every synset in Imagenet. These are stored in a",
                "-    tsv format, as follows:",
                "-            #   n02119247    black fox",
                "-            #   n02119359    silver fox",
                "-    We assign each synset (in alphabetical order) an integer, starting from 1",
                "-    (since 0 is reserved for the background class).",
                "-",
                "-    Code is based on",
                "-    https://github.com/tensorflow/models/blob/master/inception/inception/data/build_imagenet_data.py#L463",
                "-    \"\"\"",
                "-",
                "-    # pylint: disable=line-too-long",
                "-",
                "-    dest_directory = FLAGS.model_dir",
                "-",
                "-    synset_list = [s.strip() for s in open(os.path.join(",
                "-        dest_directory, 'imagenet_lsvrc_2015_synsets.txt')).readlines()]",
                "-    num_synsets_in_ilsvrc = len(synset_list)",
                "-    assert num_synsets_in_ilsvrc == 1000",
                "-",
                "-    synset_to_human_list = open(os.path.join(",
                "-        dest_directory, 'imagenet_metadata.txt')).readlines()",
                "-    num_synsets_in_all_imagenet = len(synset_to_human_list)",
                "-    assert num_synsets_in_all_imagenet == 21842",
                "-",
                "-    synset_to_human = {}",
                "-    for s in synset_to_human_list:",
                "-        parts = s.strip().split('\\t')",
                "-        assert len(parts) == 2",
                "-        synset = parts[0]",
                "-        human = parts[1]",
                "-        synset_to_human[synset] = human",
                "-",
                "-    label_index = 1",
                "-    labels_to_names = {0: 'background'}",
                "-    for synset in synset_list:",
                "-        name = synset_to_human[synset]",
                "-        labels_to_names[label_index] = name",
                "-        label_index += 1",
                "-",
                "-    return labels_to_names",
                "-",
                "-",
                "-def run_inference_on_image(image):",
                "-    \"\"\"Runs inference on an image.",
                "-",
                "-    Args:",
                "-      image: Image file name.",
                "-",
                "-    Returns:",
                "-      Nothing",
                "-    \"\"\"",
                "-    dest_directory = FLAGS.model_dir",
                "-",
                "-    image_size = inception.inception_v4.default_image_size",
                "-",
                "-    if not tf.gfile.Exists(image):",
                "-        tf.logging.fatal('File does not exist %s', image)",
                "-    image_string = tf.gfile.FastGFile(image, 'rb').read()",
                "-",
                "-    with tf.Graph().as_default():",
                "-        image = tf.image.decode_jpeg(image_string, channels=3)",
                "-        processed_image = inception_preprocessing.preprocess_image(",
                "-            image, image_size, image_size, is_training=False)",
                "-        processed_images = tf.expand_dims(processed_image, 0)",
                "-",
                "-        # Create the model, use the default arg scope to configure the batch",
                "-        # norm parameters.",
                "-        with slim.arg_scope(inception.inception_v4_arg_scope()):",
                "-            logits, _ = inception.inception_v4(",
                "-                processed_images, num_classes=1001, is_training=False)",
                "-        probabilities = tf.nn.softmax(logits)",
                "-",
                "-        init_fn = slim.assign_from_checkpoint_fn(",
                "-            os.path.join(dest_directory, 'inception_v4.ckpt'),",
                "-            slim.get_model_variables('InceptionV4'))",
                "-",
                "-        with tf.Session() as sess:",
                "-            init_fn(sess)",
                "-            probabilities = sess.run(probabilities)",
                "-            probabilities = probabilities[0, 0:]",
                "-            sorted_inds = [i[0] for i in sorted(",
                "-                enumerate(-probabilities), key=lambda x:x[1])]",
                "-",
                "-        names = create_readable_names_for_imagenet_labels()",
                "-        top_k = FLAGS.num_top_predictions",
                "-        for i in range(top_k):",
                "-            index = sorted_inds[i]",
                "-            print('%s (score = %.5f)' % (names[index], probabilities[index]))",
                "-",
                "-",
                "-def util_download(url, dest_directory):",
                "-    \"\"\"Downloads the file.",
                "-",
                "-    Args:",
                "-      url: URL to download the file from.",
                "-      dest_directory: Destination directory",
                "-    Returns:",
                "-      Nothing",
                "-    \"\"\"",
                "-    filename = url.split('/')[-1]",
                "-    filepath = os.path.join(dest_directory, filename)",
                "-",
                "-    def _progress(count, block_size, total_size):",
                "-        sys.stdout.write('\\r>> Downloading %s %.1f%%' % (",
                "-            filename, float(count * block_size) / float(total_size) * 100.0))",
                "-        sys.stdout.flush()",
                "-    filepath, _ = urllib.request.urlretrieve(url, filepath, _progress)",
                "-    print()",
                "-    statinfo = os.stat(filepath)",
                "-    print('Successfully downloaded', filename, statinfo.st_size, 'bytes.')",
                "-",
                "-",
                "-def util_download_tar(url, dest_directory):",
                "-    \"\"\"Downloads a file and extracts it.",
                "-",
                "-    Args:",
                "-      url: URL to download the file from.",
                "-      dest_directory: Destination directory",
                "-    Returns:",
                "-      Nothing",
                "-    \"\"\"",
                "-    filename = url.split('/')[-1]",
                "-    filepath = os.path.join(dest_directory, filename)",
                "-",
                "-    def _progress(count, block_size, total_size):",
                "-        sys.stdout.write('\\r>> Downloading %s %.1f%%' % (",
                "-            filename, float(count * block_size) / float(total_size) * 100.0))",
                "-        sys.stdout.flush()",
                "-    filepath, _ = urllib.request.urlretrieve(url, filepath, _progress)",
                "-    print()",
                "-    statinfo = os.stat(filepath)",
                "-    print('Successfully downloaded', filename, statinfo.st_size, 'bytes.')",
                "-    tarfile.open(filepath, 'r:gz').extractall(dest_directory)",
                "-",
                "-",
                "-def maybe_download_and_extract():",
                "-    \"\"\"Download and extract model tar file.\"\"\"",
                "-    dest_directory = FLAGS.model_dir",
                "-    if not tf.gfile.Exists(dest_directory):",
                "-        tf.gfile.MakeDirs(dest_directory)",
                "-    if not tf.gfile.Exists(os.path.join(dest_directory, 'inception_v4.ckpt')):",
                "-        util_download_tar(DATA_URL, dest_directory)",
                "-    # pylint: disable=line-too-long",
                "-    if not tf.gfile.Exists(os.path.join(dest_directory, 'imagenet_lsvrc_2015_synsets.txt')):",
                "-        util_download(",
                "-            'https://raw.githubusercontent.com/tensorflow/models/master/inception/inception/data/imagenet_lsvrc_2015_synsets.txt', dest_directory)",
                "-    if not tf.gfile.Exists(os.path.join(dest_directory, 'imagenet_metadata.txt')):",
                "-        util_download(",
                "-            'https://raw.githubusercontent.com/tensorflow/models/master/inception/inception/data/imagenet_metadata.txt', dest_directory)",
                "-    # pylint: enable=line-too-long",
                "-",
                "-",
                "-def main(_):",
                "-    maybe_download_and_extract()",
                "-    image = FLAGS.image_file",
                "-    run_inference_on_image(image)",
                "-",
                "-",
                "-if __name__ == '__main__':",
                "-    tf.app.run()",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "new file mode 100644",
                "index 000000000..b6644160f",
                "--- /dev/null",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "@@ -0,0 +1,362 @@",
                "+#!/usr/bin/env python",
                "+#  Licensed to the Apache Software Foundation (ASF) under one",
                "+#  or more contributor license agreements.  See the NOTICE file",
                "+#  distributed with this work for additional information",
                "+#  regarding copyright ownership.  The ASF licenses this file",
                "+#  to you under the Apache License, Version 2.0 (the",
                "+#  \"License\"); you may not use this file except in compliance",
                "+#  with the License.  You may obtain a copy of the License at",
                "+#    http://www.apache.org/licenses/LICENSE-2.0",
                "+#  Unless required by applicable law or agreed to in writing,",
                "+#  software distributed under the License is distributed on an",
                "+#  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY",
                "+#  KIND, either express or implied.  See the License for the",
                "+#  specific language governing permissions and limitations",
                "+#  under the License.",
                "+",
                "+\"\"\"Contains the definition of the Inception V4 architecture.",
                "+",
                "+As described in http://arxiv.org/abs/1602.07261.",
                "+",
                "+  Inception-v4, Inception-ResNet and the Impact of Residual Connections",
                "+    on Learning",
                "+  Christian Szegedy, Sergey Ioffe, Vincent Vanhoucke, Alex Alemi",
                "+\"\"\"",
                "+from __future__ import absolute_import",
                "+from __future__ import division",
                "+from __future__ import print_function",
                "+",
                "+import tensorflow as tf",
                "+",
                "+slim = tf.contrib.slim",
                "+",
                "+",
                "+def block_inception_a(inputs, scope=None, reuse=None):",
                "+    \"\"\"Builds Inception-A block for Inception v4 network.\"\"\"",
                "+    # By default use stride=1 and SAME padding",
                "+    with slim.arg_scope([slim.conv2d, slim.avg_pool2d, slim.max_pool2d],",
                "+                        stride=1, padding='SAME'):",
                "+        with tf.variable_scope(scope, 'BlockInceptionA', [inputs], reuse=reuse):",
                "+            with tf.variable_scope('Branch_0'):",
                "+                branch_0 = slim.conv2d(inputs, 96, [1, 1], scope='Conv2d_0a_1x1')",
                "+            with tf.variable_scope('Branch_1'):",
                "+                branch_1 = slim.conv2d(inputs, 64, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_1 = slim.conv2d(branch_1, 96, [3, 3], scope='Conv2d_0b_3x3')",
                "+            with tf.variable_scope('Branch_2'):",
                "+                branch_2 = slim.conv2d(inputs, 64, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_2 = slim.conv2d(branch_2, 96, [3, 3], scope='Conv2d_0b_3x3')",
                "+                branch_2 = slim.conv2d(branch_2, 96, [3, 3], scope='Conv2d_0c_3x3')",
                "+            with tf.variable_scope('Branch_3'):",
                "+                branch_3 = slim.avg_pool2d(inputs, [3, 3], scope='AvgPool_0a_3x3')",
                "+                branch_3 = slim.conv2d(branch_3, 96, [1, 1], scope='Conv2d_0b_1x1')",
                "+            return tf.concat(axis=3, values=[branch_0, branch_1, branch_2, branch_3])",
                "+",
                "+",
                "+def block_reduction_a(inputs, scope=None, reuse=None):",
                "+    \"\"\"Builds Reduction-A block for Inception v4 network.\"\"\"",
                "+    # By default use stride=1 and SAME padding",
                "+    with slim.arg_scope([slim.conv2d, slim.avg_pool2d, slim.max_pool2d],",
                "+                        stride=1, padding='SAME'):",
                "+        with tf.variable_scope(scope, 'BlockReductionA', [inputs], reuse=reuse):",
                "+            with tf.variable_scope('Branch_0'):",
                "+                branch_0 = slim.conv2d(inputs, 384, [3, 3], stride=2, padding='VALID',",
                "+                                       scope='Conv2d_1a_3x3')",
                "+            with tf.variable_scope('Branch_1'):",
                "+                branch_1 = slim.conv2d(inputs, 192, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_1 = slim.conv2d(branch_1, 224, [3, 3], scope='Conv2d_0b_3x3')",
                "+                branch_1 = slim.conv2d(branch_1, 256, [3, 3], stride=2,",
                "+                                       padding='VALID', scope='Conv2d_1a_3x3')",
                "+            with tf.variable_scope('Branch_2'):",
                "+                branch_2 = slim.max_pool2d(inputs, [3, 3], stride=2, padding='VALID',",
                "+                                           scope='MaxPool_1a_3x3')",
                "+            return tf.concat(axis=3, values=[branch_0, branch_1, branch_2])",
                "+",
                "+",
                "+def block_inception_b(inputs, scope=None, reuse=None):",
                "+    \"\"\"Builds Inception-B block for Inception v4 network.\"\"\"",
                "+    # By default use stride=1 and SAME padding",
                "+    with slim.arg_scope([slim.conv2d, slim.avg_pool2d, slim.max_pool2d],",
                "+                        stride=1, padding='SAME'):",
                "+        with tf.variable_scope(scope, 'BlockInceptionB', [inputs], reuse=reuse):",
                "+            with tf.variable_scope('Branch_0'):",
                "+                branch_0 = slim.conv2d(inputs, 384, [1, 1], scope='Conv2d_0a_1x1')",
                "+            with tf.variable_scope('Branch_1'):",
                "+                branch_1 = slim.conv2d(inputs, 192, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_1 = slim.conv2d(branch_1, 224, [1, 7], scope='Conv2d_0b_1x7')",
                "+                branch_1 = slim.conv2d(branch_1, 256, [7, 1], scope='Conv2d_0c_7x1')",
                "+            with tf.variable_scope('Branch_2'):",
                "+                branch_2 = slim.conv2d(inputs, 192, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_2 = slim.conv2d(branch_2, 192, [7, 1], scope='Conv2d_0b_7x1')",
                "+                branch_2 = slim.conv2d(branch_2, 224, [1, 7], scope='Conv2d_0c_1x7')",
                "+                branch_2 = slim.conv2d(branch_2, 224, [7, 1], scope='Conv2d_0d_7x1')",
                "+                branch_2 = slim.conv2d(branch_2, 256, [1, 7], scope='Conv2d_0e_1x7')",
                "+            with tf.variable_scope('Branch_3'):",
                "+                branch_3 = slim.avg_pool2d(inputs, [3, 3], scope='AvgPool_0a_3x3')",
                "+                branch_3 = slim.conv2d(branch_3, 128, [1, 1], scope='Conv2d_0b_1x1')",
                "+            return tf.concat(axis=3, values=[branch_0, branch_1, branch_2, branch_3])",
                "+",
                "+",
                "+def block_reduction_b(inputs, scope=None, reuse=None):",
                "+    \"\"\"Builds Reduction-B block for Inception v4 network.\"\"\"",
                "+    # By default use stride=1 and SAME padding",
                "+    with slim.arg_scope([slim.conv2d, slim.avg_pool2d, slim.max_pool2d],",
                "+                        stride=1, padding='SAME'):",
                "+        with tf.variable_scope(scope, 'BlockReductionB', [inputs], reuse=reuse):",
                "+            with tf.variable_scope('Branch_0'):",
                "+                branch_0 = slim.conv2d(inputs, 192, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_0 = slim.conv2d(branch_0, 192, [3, 3], stride=2,",
                "+                                       padding='VALID', scope='Conv2d_1a_3x3')",
                "+            with tf.variable_scope('Branch_1'):",
                "+                branch_1 = slim.conv2d(inputs, 256, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_1 = slim.conv2d(branch_1, 256, [1, 7], scope='Conv2d_0b_1x7')",
                "+                branch_1 = slim.conv2d(branch_1, 320, [7, 1], scope='Conv2d_0c_7x1')",
                "+                branch_1 = slim.conv2d(branch_1, 320, [3, 3], stride=2,",
                "+                                       padding='VALID', scope='Conv2d_1a_3x3')",
                "+            with tf.variable_scope('Branch_2'):",
                "+                branch_2 = slim.max_pool2d(inputs, [3, 3], stride=2, padding='VALID',",
                "+                                           scope='MaxPool_1a_3x3')",
                "+            return tf.concat(axis=3, values=[branch_0, branch_1, branch_2])",
                "+",
                "+",
                "+def block_inception_c(inputs, scope=None, reuse=None):",
                "+    \"\"\"Builds Inception-C block for Inception v4 network.\"\"\"",
                "+    # By default use stride=1 and SAME padding",
                "+    with slim.arg_scope([slim.conv2d, slim.avg_pool2d, slim.max_pool2d],",
                "+                        stride=1, padding='SAME'):",
                "+        with tf.variable_scope(scope, 'BlockInceptionC', [inputs], reuse=reuse):",
                "+            with tf.variable_scope('Branch_0'):",
                "+                branch_0 = slim.conv2d(inputs, 256, [1, 1], scope='Conv2d_0a_1x1')",
                "+            with tf.variable_scope('Branch_1'):",
                "+                branch_1 = slim.conv2d(inputs, 384, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_1 = tf.concat(axis=3, values=[",
                "+                    slim.conv2d(branch_1, 256, [1, 3], scope='Conv2d_0b_1x3'),",
                "+                    slim.conv2d(branch_1, 256, [3, 1], scope='Conv2d_0c_3x1')])",
                "+            with tf.variable_scope('Branch_2'):",
                "+                branch_2 = slim.conv2d(inputs, 384, [1, 1], scope='Conv2d_0a_1x1')",
                "+                branch_2 = slim.conv2d(branch_2, 448, [3, 1], scope='Conv2d_0b_3x1')",
                "+                branch_2 = slim.conv2d(branch_2, 512, [1, 3], scope='Conv2d_0c_1x3')",
                "+                branch_2 = tf.concat(axis=3, values=[",
                "+                    slim.conv2d(branch_2, 256, [1, 3], scope='Conv2d_0d_1x3'),",
                "+                    slim.conv2d(branch_2, 256, [3, 1], scope='Conv2d_0e_3x1')])",
                "+            with tf.variable_scope('Branch_3'):",
                "+                branch_3 = slim.avg_pool2d(inputs, [3, 3], scope='AvgPool_0a_3x3')",
                "+                branch_3 = slim.conv2d(branch_3, 256, [1, 1], scope='Conv2d_0b_1x1')",
                "+            return tf.concat(axis=3, values=[branch_0, branch_1, branch_2, branch_3])",
                "+",
                "+",
                "+def inception_v4_base(inputs, final_endpoint='Mixed_7d', scope=None):",
                "+    \"\"\"Creates the Inception V4 network up to the given final endpoint.",
                "+",
                "+    Args:",
                "+      inputs: a 4-D tensor of size [batch_size, height, width, 3].",
                "+      final_endpoint: specifies the endpoint to construct the network up to.",
                "+        It can be one of [ 'Conv2d_1a_3x3', 'Conv2d_2a_3x3', 'Conv2d_2b_3x3',",
                "+        'Mixed_3a', 'Mixed_4a', 'Mixed_5a', 'Mixed_5b', 'Mixed_5c', 'Mixed_5d',",
                "+        'Mixed_5e', 'Mixed_6a', 'Mixed_6b', 'Mixed_6c', 'Mixed_6d', 'Mixed_6e',",
                "+        'Mixed_6f', 'Mixed_6g', 'Mixed_6h', 'Mixed_7a', 'Mixed_7b', 'Mixed_7c',",
                "+        'Mixed_7d']",
                "+      scope: Optional variable_scope.",
                "+",
                "+    Returns:",
                "+      logits: the logits outputs of the model.",
                "+      end_points: the set of end_points from the inception model.",
                "+",
                "+    Raises:",
                "+      ValueError: if final_endpoint is not set to one of the predefined values,",
                "+    \"\"\"",
                "+    end_points = {}",
                "+",
                "+    def add_and_check_final(name, net):",
                "+        end_points[name] = net",
                "+        return name == final_endpoint",
                "+",
                "+    with tf.variable_scope(scope, 'InceptionV4', [inputs]):",
                "+        with slim.arg_scope([slim.conv2d, slim.max_pool2d, slim.avg_pool2d],",
                "+                            stride=1, padding='SAME'):",
                "+            # 299 x 299 x 3",
                "+            net = slim.conv2d(inputs, 32, [3, 3], stride=2,",
                "+                              padding='VALID', scope='Conv2d_1a_3x3')",
                "+            if add_and_check_final('Conv2d_1a_3x3', net): return net, end_points",
                "+            # 149 x 149 x 32",
                "+            net = slim.conv2d(net, 32, [3, 3], padding='VALID',",
                "+                              scope='Conv2d_2a_3x3')",
                "+            if add_and_check_final('Conv2d_2a_3x3', net): return net, end_points",
                "+            # 147 x 147 x 32",
                "+            net = slim.conv2d(net, 64, [3, 3], scope='Conv2d_2b_3x3')",
                "+            if add_and_check_final('Conv2d_2b_3x3', net): return net, end_points",
                "+            # 147 x 147 x 64",
                "+            with tf.variable_scope('Mixed_3a'):",
                "+                with tf.variable_scope('Branch_0'):",
                "+                    branch_0 = slim.max_pool2d(net, [3, 3], stride=2, padding='VALID',",
                "+                                               scope='MaxPool_0a_3x3')",
                "+                with tf.variable_scope('Branch_1'):",
                "+                    branch_1 = slim.conv2d(net, 96, [3, 3], stride=2, padding='VALID',",
                "+                                           scope='Conv2d_0a_3x3')",
                "+                net = tf.concat(axis=3, values=[branch_0, branch_1])",
                "+                if add_and_check_final('Mixed_3a', net): return net, end_points",
                "+",
                "+            # 73 x 73 x 160",
                "+            with tf.variable_scope('Mixed_4a'):",
                "+                with tf.variable_scope('Branch_0'):",
                "+                    branch_0 = slim.conv2d(net, 64, [1, 1], scope='Conv2d_0a_1x1')",
                "+                    branch_0 = slim.conv2d(branch_0, 96, [3, 3], padding='VALID',",
                "+                                           scope='Conv2d_1a_3x3')",
                "+                with tf.variable_scope('Branch_1'):",
                "+                    branch_1 = slim.conv2d(net, 64, [1, 1], scope='Conv2d_0a_1x1')",
                "+                    branch_1 = slim.conv2d(branch_1, 64, [1, 7], scope='Conv2d_0b_1x7')",
                "+                    branch_1 = slim.conv2d(branch_1, 64, [7, 1], scope='Conv2d_0c_7x1')",
                "+                    branch_1 = slim.conv2d(branch_1, 96, [3, 3], padding='VALID',",
                "+                                           scope='Conv2d_1a_3x3')",
                "+                net = tf.concat(axis=3, values=[branch_0, branch_1])",
                "+                if add_and_check_final('Mixed_4a', net): return net, end_points",
                "+",
                "+            # 71 x 71 x 192",
                "+            with tf.variable_scope('Mixed_5a'):",
                "+                with tf.variable_scope('Branch_0'):",
                "+                    branch_0 = slim.conv2d(net, 192, [3, 3], stride=2, padding='VALID',",
                "+                                           scope='Conv2d_1a_3x3')",
                "+                with tf.variable_scope('Branch_1'):",
                "+                    branch_1 = slim.max_pool2d(net, [3, 3], stride=2, padding='VALID',",
                "+                                               scope='MaxPool_1a_3x3')",
                "+                net = tf.concat(axis=3, values=[branch_0, branch_1])",
                "+                if add_and_check_final('Mixed_5a', net): return net, end_points",
                "+",
                "+            # 35 x 35 x 384",
                "+            # 4 x Inception-A blocks",
                "+            for idx in range(4):",
                "+                block_scope = 'Mixed_5' + chr(ord('b') + idx)",
                "+                net = block_inception_a(net, block_scope)",
                "+                if add_and_check_final(block_scope, net): return net, end_points",
                "+",
                "+            # 35 x 35 x 384",
                "+            # Reduction-A block",
                "+            net = block_reduction_a(net, 'Mixed_6a')",
                "+            if add_and_check_final('Mixed_6a', net): return net, end_points",
                "+",
                "+            # 17 x 17 x 1024",
                "+            # 7 x Inception-B blocks",
                "+            for idx in range(7):",
                "+                block_scope = 'Mixed_6' + chr(ord('b') + idx)",
                "+                net = block_inception_b(net, block_scope)",
                "+                if add_and_check_final(block_scope, net): return net, end_points",
                "+",
                "+            # 17 x 17 x 1024",
                "+            # Reduction-B block",
                "+            net = block_reduction_b(net, 'Mixed_7a')",
                "+            if add_and_check_final('Mixed_7a', net): return net, end_points",
                "+",
                "+            # 8 x 8 x 1536",
                "+            # 3 x Inception-C blocks",
                "+            for idx in range(3):",
                "+                block_scope = 'Mixed_7' + chr(ord('b') + idx)",
                "+                net = block_inception_c(net, block_scope)",
                "+                if add_and_check_final(block_scope, net): return net, end_points",
                "+    raise ValueError('Unknown final endpoint %s' % final_endpoint)",
                "+",
                "+",
                "+def inception_v4(inputs, num_classes=1001, is_training=True,",
                "+                 dropout_keep_prob=0.8,",
                "+                 reuse=None,",
                "+                 scope='InceptionV4',",
                "+                 create_aux_logits=True):",
                "+    \"\"\"Creates the Inception V4 model.",
                "+",
                "+    Args:",
                "+      inputs: a 4-D tensor of size [batch_size, height, width, 3].",
                "+      num_classes: number of predicted classes.",
                "+      is_training: whether is training or not.",
                "+      dropout_keep_prob: float, the fraction to keep before final layer.",
                "+      reuse: whether or not the network and its variables should be reused. To be",
                "+        able to reuse 'scope' must be given.",
                "+      scope: Optional variable_scope.",
                "+      create_aux_logits: Whether to include the auxiliary logits.",
                "+",
                "+    Returns:",
                "+      logits: the logits outputs of the model.",
                "+      end_points: the set of end_points from the inception model.",
                "+    \"\"\"",
                "+    end_points = {}",
                "+    with tf.variable_scope(scope, 'InceptionV4', [inputs], reuse=reuse) as scope:",
                "+        with slim.arg_scope([slim.batch_norm, slim.dropout],",
                "+                            is_training=is_training):",
                "+            net, end_points = inception_v4_base(inputs, scope=scope)",
                "+",
                "+            with slim.arg_scope([slim.conv2d, slim.max_pool2d, slim.avg_pool2d],",
                "+                                stride=1, padding='SAME'):",
                "+                # Auxiliary Head logits",
                "+                if create_aux_logits:",
                "+                    with tf.variable_scope('AuxLogits'):",
                "+                        # 17 x 17 x 1024",
                "+                        aux_logits = end_points['Mixed_6h']",
                "+                        aux_logits = slim.avg_pool2d(aux_logits, [5, 5], stride=3,",
                "+                                                     padding='VALID',",
                "+                                                     scope='AvgPool_1a_5x5')",
                "+                        aux_logits = slim.conv2d(aux_logits, 128, [1, 1],",
                "+                                                 scope='Conv2d_1b_1x1')",
                "+                        aux_logits = slim.conv2d(aux_logits, 768,",
                "+                                                 aux_logits.get_shape()[1:3],",
                "+                                                 padding='VALID', scope='Conv2d_2a')",
                "+                        aux_logits = slim.flatten(aux_logits)",
                "+                        aux_logits = slim.fully_connected(aux_logits, num_classes,",
                "+                                                          activation_fn=None,",
                "+                                                          scope='Aux_logits')",
                "+                        end_points['AuxLogits'] = aux_logits",
                "+",
                "+                # Final pooling and prediction",
                "+                with tf.variable_scope('Logits'):",
                "+                    # 8 x 8 x 1536",
                "+                    net = slim.avg_pool2d(net, net.get_shape()[1:3], padding='VALID',",
                "+                                          scope='AvgPool_1a')",
                "+                    # 1 x 1 x 1536",
                "+                    net = slim.dropout(net, dropout_keep_prob, scope='Dropout_1b')",
                "+                    net = slim.flatten(net, scope='PreLogitsFlatten')",
                "+                    end_points['PreLogitsFlatten'] = net",
                "+                    # 1536",
                "+                    logits = slim.fully_connected(net, num_classes, activation_fn=None,",
                "+                                                  scope='Logits')",
                "+                    end_points['Logits'] = logits",
                "+                    end_points['Predictions'] = tf.nn.softmax(logits, name='Predictions')",
                "+        return logits, end_points",
                "+",
                "+",
                "+def inception_v4_arg_scope(weight_decay=0.00004,",
                "+                           use_batch_norm=True,",
                "+                           batch_norm_decay=0.9997,",
                "+                           batch_norm_epsilon=0.001):",
                "+    \"\"\"Defines the default arg scope for inception models.",
                "+    Args:",
                "+      weight_decay: The weight decay to use for regularizing the model.",
                "+      use_batch_norm: \"If `True`, batch_norm is applied after each convolution.",
                "+      batch_norm_decay: Decay for batch norm moving average.",
                "+      batch_norm_epsilon: Small float added to variance to avoid dividing by zero",
                "+        in batch norm.",
                "+    Returns:",
                "+      An `arg_scope` to use for the inception models.",
                "+    \"\"\"",
                "+    batch_norm_params = {",
                "+        # Decay for the moving averages.",
                "+        'decay': batch_norm_decay,",
                "+        # epsilon to prevent 0s in variance.",
                "+        'epsilon': batch_norm_epsilon,",
                "+        # collection containing update_ops.",
                "+        'updates_collections': tf.GraphKeys.UPDATE_OPS,",
                "+    }",
                "+    if use_batch_norm:",
                "+        normalizer_fn = slim.batch_norm",
                "+        normalizer_params = batch_norm_params",
                "+    else:",
                "+        normalizer_fn = None",
                "+        normalizer_params = {}",
                "+    # Set weight_decay for weights in Conv and FC layers.",
                "+    with slim.arg_scope([slim.conv2d, slim.fully_connected],",
                "+                        weights_regularizer=slim.l2_regularizer(weight_decay)):",
                "+        with slim.arg_scope(",
                "+                [slim.conv2d],",
                "+                weights_initializer=slim.variance_scaling_initializer(),",
                "+                activation_fn=tf.nn.relu,",
                "+                normalizer_fn=normalizer_fn,",
                "+                normalizer_params=normalizer_params) as sc:",
                "+            return sc",
                "+",
                "+",
                "+default_image_size = 299",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "index 710475bad..a8b0d7b3f 100755",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "@@ -40,5 +40,9 @@ import tarfile",
                " import tempfile",
                "+import json",
                "+import requests",
                "+from flask import Flask, request, Response, jsonify",
                " from io import BytesIO",
                " from PIL import Image",
                "+from six.moves import urllib",
                " from time import time",
                "@@ -47,11 +51,3 @@ import tensorflow as tf",
                "-from datasets import imagenet, dataset_utils",
                "-from nets import inception",
                "-from preprocessing import inception_preprocessing",
                "-",
                "-import json",
                "-import requests",
                "-",
                "-from flask import Flask, request, Response, jsonify",
                "-from six.moves import urllib",
                "+from inception_v4 import default_image_size, inception_v4_arg_scope, inception_v4",
                "@@ -67,13 +63,11 @@ FLAGS = tf.app.flags.FLAGS",
                "-# inception_v4.ckpt - Inception V4 checkpoint file.",
                "-# imagenet_metadata.txt - Map from synset ID to a human readable string.",
                "-# imagenet_lsvrc_2015_synsets.txt - Text representation of a protocol buffer mapping a label to synset ID.",
                "-",
                "-tf.app.flags.DEFINE_string(",
                "-    'model_dir', '/tmp/imagenet',",
                "-    \"\"\"Path to inception_v4.ckpt, \"\"\"",
                "-    \"\"\"imagenet_lsvrc_2015_synsets.txt, and \"\"\"",
                "-    \"\"\"imagenet_metadata.txt.\"\"\")",
                "-tf.app.flags.DEFINE_integer('port', '8764', \"\"\"Server PORT, default:8764\"\"\")",
                "-tf.app.flags.DEFINE_string('log', 'inception.log', \"\"\"Log file name, default: inception.log\"\"\")",
                "+tf.app.flags.DEFINE_string('model_dir',",
                "+                           '/usr/share/apache-tika/models/dl/image-video/recognition/',",
                "+                           \"\"\"Path to inception_v4.ckpt & meta files\"\"\")",
                "+tf.app.flags.DEFINE_integer('port',",
                "+                            '8764',",
                "+                            \"\"\"Server PORT, default:8764\"\"\")",
                "+tf.app.flags.DEFINE_string('log',",
                "+                           'inception.log',",
                "+                           \"\"\"Log file name, default: inception.log\"\"\")",
                "@@ -82,2 +76,39 @@ DATA_URL = 'http://download.tensorflow.org/models/inception_v4_2016_09_09.tar.gz",
                "+def preprocess_image(image, height, width, central_fraction=0.875, scope=None):",
                "+    \"\"\"Prepare one image for evaluation.",
                "+    If height and width are specified it would output an image with that size by",
                "+    applying resize_bilinear.",
                "+    If central_fraction is specified it would crop the central fraction of the",
                "+    input image.",
                "+    Args:",
                "+      image: 3-D Tensor of image. If dtype is tf.float32 then the range should be",
                "+        [0, 1], otherwise it would converted to tf.float32 assuming that the range",
                "+        is [0, MAX], where MAX is largest positive representable number for",
                "+        int(8/16/32) data type (see `tf.image.convert_image_dtype` for details).",
                "+      height: integer",
                "+      width: integer",
                "+      central_fraction: Optional Float, fraction of the image to crop.",
                "+      scope: Optional scope for name_scope.",
                "+    Returns:",
                "+      3-D float Tensor of prepared image.",
                "+    \"\"\"",
                "+    with tf.name_scope(scope, 'eval_image', [image, height, width]):",
                "+        if image.dtype != tf.float32:",
                "+            image = tf.image.convert_image_dtype(image, dtype=tf.float32)",
                "+        # Crop the central region of the image with an area containing 87.5% of",
                "+        # the original image.",
                "+        if central_fraction:",
                "+            image = tf.image.central_crop(image, central_fraction=central_fraction)",
                "+",
                "+        if height and width:",
                "+            # Resize the image to the specified height and width.",
                "+            image = tf.expand_dims(image, 0)",
                "+            image = tf.image.resize_bilinear(image, [height, width],",
                "+                                             align_corners=False)",
                "+            image = tf.squeeze(image, [0])",
                "+        image = tf.subtract(image, 0.5)",
                "+        image = tf.multiply(image, 2.0)",
                "+        return image",
                "+",
                "+",
                " def create_readable_names_for_imagenet_labels():",
                "@@ -184,2 +215,3 @@ def maybe_download_and_extract():",
                "     dest_directory = FLAGS.model_dir",
                "+    imagenet_base_url = 'https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data'",
                "     if not tf.gfile.Exists(dest_directory):",
                "@@ -191,10 +223,6 @@ def maybe_download_and_extract():",
                "     if not tf.gfile.Exists(os.path.join(dest_directory, 'imagenet_lsvrc_2015_synsets.txt')):",
                "-        util_download(",
                "-            'https://raw.githubusercontent.com/tensorflow/models/master/inception/inception/data/imagenet_lsvrc_2015_synsets.txt',",
                "-            dest_directory)",
                "+        util_download('{}/imagenet_lsvrc_2015_synsets.txt'.format(imagenet_base_url), dest_directory)",
                "     if not tf.gfile.Exists(os.path.join(dest_directory, 'imagenet_metadata.txt')):",
                "-        util_download(",
                "-            'https://raw.githubusercontent.com/tensorflow/models/master/inception/inception/data/imagenet_metadata.txt',",
                "-            dest_directory)",
                "+        util_download('{}/imagenet_metadata.txt'.format(imagenet_base_url), dest_directory)",
                "@@ -220,4 +248,4 @@ class Classifier(Flask):",
                "         self.logger.addHandler(file_handler)",
                "-        self.names = imagenet.create_readable_names_for_imagenet_labels()",
                "-        self.image_size = inception.inception_v4.default_image_size",
                "+        self.names = create_readable_names_for_imagenet_labels()",
                "+        self.image_size = default_image_size",
                "@@ -225,8 +253,7 @@ class Classifier(Flask):",
                "         image = tf.image.decode_jpeg(self.image_str_placeholder, channels=3)",
                "-        processed_image = inception_preprocessing.preprocess_image(image, self.image_size,",
                "-                                                                   self.image_size, is_training=False)",
                "+        processed_image = preprocess_image(image, self.image_size, self.image_size)",
                "         processed_images = tf.expand_dims(processed_image, 0)",
                "         # create the model, use the default arg scope to configure the batch norm parameters.",
                "-        with slim.arg_scope(inception.inception_v4_arg_scope()):",
                "-            logits, _ = inception.inception_v4(processed_images, num_classes=1001, is_training=False)",
                "+        with slim.arg_scope(inception_v4_arg_scope()):",
                "+            logits, _ = inception_v4(processed_images, num_classes=1001, is_training=False)",
                "         self.probabilities = tf.nn.softmax(logits)",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "index ea5d5aa1a..ab5baa9ff 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "@@ -21,3 +21,3 @@ import numpy as np",
                "-print \"cv2.__version__\", cv2.__version__",
                "+print(\"cv2.__version__\", cv2.__version__)"
            ],
            "changed_files": [
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/classify_image.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "ac2c024cee1e8475c056196aae0526120f99a85b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516724265,
            "hunks": 1,
            "message": "Merge remote-tracking branch 'origin/master' # Conflicts: #\tCHANGES.txt",
            "diff": [
                "diff --cc CHANGES.txt",
                "index 07f21acaf,ef3f1029e..96b041cce",
                "--- a/CHANGES.txt",
                "+++ b/CHANGES.txt",
                "@@@ -4,4 -4,7 +4,9 @@@ Release 2.0.0 - ??",
                "+    * Mime magic for Dolby Digital AC3 and EAC3 files",
                "+ ",
                "+    * Fixed bug where TesseractOCRParser ignores configured ImageMagickPath,",
                "+      and set rotation script to ignore Python warnings (TIKA-2509)",
                "+ ",
                " +   * Upgrade geo-apis to 3.0.1 (TIKA-2535)",
                " +",
                "  Release 1.17 - 12/8/2017"
            ],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "3ee0aff615f49ae9c2678afa2c27a1737a329dcb",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511284389,
            "hunks": 4,
            "message": "Remove docker files now present in https://github.com/USCDataScience/tika-dockers",
            "diff": [
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "deleted file mode 100644",
                "index 1d9016dd6..000000000",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "+++ /dev/null",
                "@@ -1,60 +0,0 @@",
                "-#",
                "-# Licensed to the Apache Software Foundation (ASF) under one or more",
                "-# contributor license agreements.  See the NOTICE file distributed with",
                "-# this work for additional information regarding copyright ownership.",
                "-# The ASF licenses this file to You under the Apache License, Version 2.0",
                "-# (the \"License\"); you may not use this file except in compliance with",
                "-# the License.  You may obtain a copy of the License at",
                "-#",
                "-#     http://www.apache.org/licenses/LICENSE-2.0",
                "-#",
                "-# Unless required by applicable law or agreed to in writing, software",
                "-# distributed under the License is distributed on an \"AS IS\" BASIS,",
                "-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "-# See the License for the specific language governing permissions and",
                "-# limitations under the License.",
                "-#",
                "-",
                "-FROM uscdatascience/tf-tika-base",
                "-MAINTAINER Apache Tika Team",
                "-",
                "-# Download the pretrained im2txt checkpoint",
                "-WORKDIR /usr/share/apache-tika/models/dl/image/caption/",
                "-",
                "-RUN echo \"We're downloading the checkpoint file for image captioning, the shell might look unresponsive. Please be patient.\"  && \\",
                "-    # To get rid of early EOF error",
                "-    git config --global http.postBuffer 1048576000 && \\",
                "-    git clone https://github.com/USCDataScience/img2text.git && \\",
                "-    # Join the parts",
                "-    cat img2text/models/1M_iters_ckpt_parts_* >1M_iters_ckpt.tar.gz && \\",
                "-    tar -xzvf 1M_iters_ckpt.tar.gz && rm -rf 1M_iters_ckpt.tar.gz",
                "-",
                "-RUN curl -O https://raw.githubusercontent.com/apache/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_info.xml",
                "-",
                "-# Download server related source files",
                "-WORKDIR /usr/share/apache-tika/src/dl/image/caption/",
                "-",
                "-RUN curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py && \\",
                "-    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py && \\",
                "-    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py && \\",
                "-    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py && \\",
                "-    chmod +x im2txtapi.py",
                "-",
                "-WORKDIR /",
                "-",
                "-# Remove unnecessary packages comes with base",
                "-RUN apt-get -y remove \\",
                "-        apt-utils \\",
                "-        curl \\",
                "-        git \\",
                "-        software-properties-common \\",
                "-        unzip \\",
                "-        wget",
                "-",
                "-# Add symbolic link to im2txtapi.py",
                "-RUN ln -s /usr/share/apache-tika/src/dl/image/caption/im2txtapi.py /usr/bin/im2txtapi",
                "-",
                "-# expose API port, this is the default port",
                "-EXPOSE 8764",
                "-",
                "-CMD im2txtapi",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile",
                "deleted file mode 100644",
                "index b2cc4114e..000000000",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile",
                "+++ /dev/null",
                "@@ -1,50 +0,0 @@",
                "-#",
                "-# Licensed to the Apache Software Foundation (ASF) under one or more",
                "-# contributor license agreements.  See the NOTICE file distributed with",
                "-# this work for additional information regarding copyright ownership.",
                "-# The ASF licenses this file to You under the Apache License, Version 2.0",
                "-# (the \"License\"); you may not use this file except in compliance with",
                "-# the License.  You may obtain a copy of the License at",
                "-#",
                "-#     http://www.apache.org/licenses/LICENSE-2.0",
                "-#",
                "-# Unless required by applicable law or agreed to in writing, software",
                "-# distributed under the License is distributed on an \"AS IS\" BASIS,",
                "-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "-# See the License for the specific language governing permissions and",
                "-# limitations under the License.",
                "-#",
                "-",
                "-FROM ubuntu:16.04",
                "-MAINTAINER Apache Tika Team",
                "-",
                "-RUN apt-get update && apt-get install -y --no-install-recommends \\",
                "-        apt-utils \\",
                "-        curl \\",
                "-        git \\",
                "-        python \\",
                "-        python2.7-dev \\",
                "-        software-properties-common \\",
                "-        unzip \\",
                "-        wget \\",
                "-        && \\",
                "-    apt-get clean && \\",
                "-    rm -rf /var/lib/apt/lists/*",
                "-",
                "-# Install pip",
                "-RUN curl -O https://bootstrap.pypa.io/get-pip.py && \\",
                "-    python get-pip.py && \\",
                "-    rm get-pip.py",
                "-",
                "-# Install basic python requirements",
                "-RUN pip --no-cache-dir install \\",
                "-        flask \\",
                "-        numpy \\",
                "-        pillow \\",
                "-        requests",
                "-",
                "-# Install tensorflow:1.3.0 for python 2.7",
                "-ENV TF_BINARY_URL https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.4.0-cp27-none-linux_x86_64.whl",
                "-RUN pip --no-cache-dir install $TF_BINARY_URL",
                "-",
                "-CMD [\"python\"]",
                "\\ No newline at end of file",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile",
                "deleted file mode 100644",
                "index 355c262be..000000000",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile",
                "+++ /dev/null",
                "@@ -1,53 +0,0 @@",
                "-#",
                "-# Licensed to the Apache Software Foundation (ASF) under one or more",
                "-# contributor license agreements.  See the NOTICE file distributed with",
                "-# this work for additional information regarding copyright ownership.",
                "-# The ASF licenses this file to You under the Apache License, Version 2.0",
                "-# (the \"License\"); you may not use this file except in compliance with",
                "-# the License.  You may obtain a copy of the License at",
                "-#",
                "-#     http://www.apache.org/licenses/LICENSE-2.0",
                "-#",
                "-# Unless required by applicable law or agreed to in writing, software",
                "-# distributed under the License is distributed on an \"AS IS\" BASIS,",
                "-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "-# See the License for the specific language governing permissions and",
                "-# limitations under the License.",
                "-#",
                "-",
                "-FROM uscdatascience/tf-tika-base",
                "-MAINTAINER Apache Tika Team",
                "-",
                "-# Download the pretrained inception v4 checkpoint & other meta files",
                "-WORKDIR /usr/share/apache-tika/models/dl/image-video/recognition/",
                "-",
                "-RUN curl -O http://download.tensorflow.org/models/inception_v4_2016_09_09.tar.gz && \\",
                "-    tar -xzvf inception_v4_2016_09_09.tar.gz && rm -rf inception_v4_2016_09_09.tar.gz && \\",
                "-    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_lsvrc_2015_synsets.txt && \\",
                "-    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_metadata.txt",
                "-",
                "-# Download server related source files",
                "-WORKDIR /usr/share/apache-tika/src/dl/image-video/recognition/",
                "-",
                "-RUN curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py && \\",
                "-    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py && \\",
                "-    chmod +x inceptionapi.py",
                "-",
                "-WORKDIR /",
                "-",
                "-# Remove unnecessary packages comes with base",
                "-RUN apt-get -y remove \\",
                "-        apt-utils \\",
                "-        curl \\",
                "-        git \\",
                "-        software-properties-common \\",
                "-        unzip \\",
                "-        wget",
                "-",
                "-# Add symbolic link to inceptionapi.py",
                "-RUN ln -s /usr/share/apache-tika/src/dl/image-video/recognition/inceptionapi.py /usr/bin/inceptionapi",
                "-",
                "-# Expose API port, this is the default port",
                "-EXPOSE 8764",
                "-",
                "-CMD inceptionapi",
                "\\ No newline at end of file",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile",
                "deleted file mode 100644",
                "index 367045141..000000000",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile",
                "+++ /dev/null",
                "@@ -1,108 +0,0 @@",
                "-#",
                "-# Licensed to the Apache Software Foundation (ASF) under one or more",
                "-# contributor license agreements.  See the NOTICE file distributed with",
                "-# this work for additional information regarding copyright ownership.",
                "-# The ASF licenses this file to You under the Apache License, Version 2.0",
                "-# (the \"License\"); you may not use this file except in compliance with",
                "-# the License.  You may obtain a copy of the License at",
                "-#",
                "-#     http://www.apache.org/licenses/LICENSE-2.0",
                "-#",
                "-# Unless required by applicable law or agreed to in writing, software",
                "-# distributed under the License is distributed on an \"AS IS\" BASIS,",
                "-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "-# See the License for the specific language governing permissions and",
                "-# limitations under the License.",
                "-#",
                "-",
                "-FROM uscdatascience/tf-tika-base",
                "-MAINTAINER Apache Tika Team",
                "-",
                "-RUN apt-get update && apt-get install -y --no-install-recommends \\",
                "-      build-essential \\",
                "-      cmake \\",
                "-      libavcodec-dev \\",
                "-      libavformat-dev \\",
                "-      libswscale-dev \\",
                "-      libv4l-dev \\",
                "-      libavutil-dev \\",
                "-      pkg-config \\",
                "-      && \\",
                "-    apt-get clean && \\",
                "-    rm -rf /var/lib/apt/lists/*",
                "-",
                "-# Download OpenCV + OpenCV_Contrib",
                "-WORKDIR /usr/local/src",
                "-",
                "-RUN \\",
                "-      wget -O opencv.zip https://github.com/opencv/opencv/archive/3.2.0.zip && \\",
                "-      unzip opencv.zip && \\",
                "-      wget -O opencv_contrib.zip https://github.com/opencv/opencv_contrib/archive/3.2.0.zip && \\",
                "-      unzip opencv_contrib.zip",
                "-",
                "-# Build + Install OpenCV",
                "-RUN mkdir -p opencv-3.2.0/build",
                "-WORKDIR /usr/local/src/opencv-3.2.0/build",
                "-RUN cmake -D CMAKE_BUILD_TYPE=RELEASE \\",
                "-      -D CMAKE_INSTALL_PREFIX=/usr/local \\",
                "-      -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.2.0/modules \\",
                "-      -D BUILD_PYTHON_SUPPORT=ON \\",
                "-      -D BUILD_EXAMPLES=OFF \\",
                "-      -D PYTHON_DEFAULT_EXECUTABLE=/usr/bin/python3 \\",
                "-      -D BUILD_opencv_python3=OFF \\",
                "-      -D BUILD_opencv_python2=ON \\",
                "-      -D WITH_IPP=OFF \\",
                "-      -D WITH_FFMPEG=ON \\",
                "-      -D WITH_V4L=ON ..",
                "-",
                "-RUN make -j$(nproc) && make install",
                "-",
                "-# Download the pretrained inception v4 checkpoint & other meta files",
                "-WORKDIR /usr/share/apache-tika/models/dl/image-video/recognition/",
                "-",
                "-RUN curl -O http://download.tensorflow.org/models/inception_v4_2016_09_09.tar.gz && \\",
                "-    tar -xzvf inception_v4_2016_09_09.tar.gz && rm -rf inception_v4_2016_09_09.tar.gz && \\",
                "-    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_lsvrc_2015_synsets.txt && \\",
                "-    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_metadata.txt",
                "-",
                "-# Download server related source files",
                "-WORKDIR /usr/share/apache-tika/src/dl/image-video/recognition/",
                "-",
                "-RUN curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py && \\",
                "-    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py && \\",
                "-    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py && \\",
                "-    chmod +x inceptionapi.py",
                "-",
                "-WORKDIR /",
                "-",
                "-# Remove unnecessary packages comes with base",
                "-RUN apt-get -y remove \\",
                "-        apt-utils \\",
                "-        curl \\",
                "-        git \\",
                "-        software-properties-common \\",
                "-        unzip \\",
                "-        wget",
                "-",
                "-# Remove unnecessary packages",
                "-RUN apt-get -y remove \\",
                "-      apt-utils \\",
                "-      build-essential \\",
                "-      cmake \\",
                "-      libavcodec-dev \\",
                "-      libavformat-dev \\",
                "-      libswscale-dev \\",
                "-      libv4l-dev \\",
                "-      libavutil-dev \\",
                "-      pkg-config",
                "-",
                "-# Delete OpenCV source files",
                "-RUN rm -rf /usr/local/src",
                "-",
                "-# Add symbolic link to inceptionapi.py",
                "-RUN ln -s /usr/share/apache-tika/src/dl/image-video/recognition/inceptionapi.py /usr/bin/inceptionapi",
                "-",
                "-# Expose API port, this is the default port",
                "-EXPOSE 8764",
                "-",
                "-CMD inceptionapi",
                "\\ No newline at end of file"
            ],
            "changed_files": [
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "a01163de9784cff77733262dad46140e83eb6e11",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508805144,
            "hunks": 0,
            "message": "Merge branch 'mattcg-patch-2'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "a043cefc0606a9bb05e19996b22ea56157cc775a",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508247546,
            "hunks": 14,
            "message": "TIKA 2400 : Remove redundant functions + Minor refactoring",
            "diff": [
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "index a8b0d7b3f..09d830c0d 100755",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "@@ -37,6 +37,5 @@ from __future__ import print_function",
                " import os",
                "-import sys",
                "-import tarfile",
                " import tempfile",
                " import json",
                "+import logging",
                " import requests",
                "@@ -45,4 +44,4 @@ from flask import Flask, request, Response, jsonify",
                " from io import BytesIO",
                "+from logging.handlers import RotatingFileHandler",
                " from PIL import Image",
                "-from six.moves import urllib",
                " from time import time",
                "@@ -73,4 +72,2 @@ tf.app.flags.DEFINE_string('log',",
                "-DATA_URL = 'http://download.tensorflow.org/models/inception_v4_2016_09_09.tar.gz'",
                "-",
                "@@ -164,65 +161,16 @@ def create_readable_names_for_imagenet_labels():",
                "-def util_download(url, dest_directory):",
                "-    \"\"\"",
                "-        Downloads the file.",
                "-        Args:",
                "-          url: URL to download the file from.",
                "-          dest_directory: Destination directory",
                "-        Returns:",
                "-          Nothing",
                "-    \"\"\"",
                "-    filename = url.split('/')[-1]",
                "-    filepath = os.path.join(dest_directory, filename)",
                "-",
                "-    def _progress(count, block_size, total_size):",
                "-        sys.stdout.write(",
                "-            '\\r>> Downloading %s %.1f%%' % (filename, float(count * block_size) / float(total_size) * 100.0))",
                "-        sys.stdout.flush()",
                "-",
                "-    filepath, _ = urllib.request.urlretrieve(url, filepath, _progress)",
                "-    print()",
                "-    statinfo = os.stat(filepath)",
                "-    print('Successfully downloaded', filename, statinfo.st_size, 'bytes.')",
                "-",
                "-",
                "-def util_download_tar(url, dest_directory):",
                "+def get_remote_file(url, success=200, timeout=10):",
                "     \"\"\"",
                "-        Downloads a file and extracts it.",
                "-        Args:",
                "-          url: URL to download the file from.",
                "-          dest_directory: Destination directory",
                "-        Returns:",
                "-          Nothing",
                "+        Given HTTP URL, this api gets the content of it",
                "+        returns (Content-Type, image_content)",
                "     \"\"\"",
                "-    filename = url.split('/')[-1]",
                "-    filepath = os.path.join(dest_directory, filename)",
                "-",
                "-    def _progress(count, block_size, total_size):",
                "-        sys.stdout.write(",
                "-            '\\r>> Downloading %s %.1f%%' % (filename, float(count * block_size) / float(total_size) * 100.0))",
                "-        sys.stdout.flush()",
                "-",
                "-    filepath, _ = urllib.request.urlretrieve(url, filepath, _progress)",
                "-    print()",
                "-    statinfo = os.stat(filepath)",
                "-    print('Successfully downloaded', filename, statinfo.st_size, 'bytes.')",
                "-    tarfile.open(filepath, 'r:gz').extractall(dest_directory)",
                "-",
                "-",
                "-def maybe_download_and_extract():",
                "-    \"\"\"Download and extract model tar file.\"\"\"",
                "-",
                "-    dest_directory = FLAGS.model_dir",
                "-    imagenet_base_url = 'https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data'",
                "-    if not tf.gfile.Exists(dest_directory):",
                "-        tf.gfile.MakeDirs(dest_directory)",
                "-",
                "-    if not tf.gfile.Exists(os.path.join(dest_directory, 'inception_v4.ckpt')):",
                "-        util_download_tar(DATA_URL, dest_directory)",
                "-",
                "-    if not tf.gfile.Exists(os.path.join(dest_directory, 'imagenet_lsvrc_2015_synsets.txt')):",
                "-        util_download('{}/imagenet_lsvrc_2015_synsets.txt'.format(imagenet_base_url), dest_directory)",
                "-",
                "-    if not tf.gfile.Exists(os.path.join(dest_directory, 'imagenet_metadata.txt')):",
                "-        util_download('{}/imagenet_metadata.txt'.format(imagenet_base_url), dest_directory)",
                "+    try:",
                "+        app.logger.info(\"GET: %s\" % url)",
                "+        auth = None",
                "+        res = requests.get(url, stream=True, timeout=timeout, auth=auth)",
                "+        if res.status_code == success:",
                "+            return res.headers.get('Content-Type', 'application/octet-stream'), res.raw.data",
                "+    except:",
                "+        pass",
                "+    return None, None",
                "@@ -240,5 +188,2 @@ class Classifier(Flask):",
                "         super(Classifier, self).__init__(name)",
                "-        maybe_download_and_extract()",
                "-        import logging",
                "-        from logging.handlers import RotatingFileHandler",
                "         file_handler = RotatingFileHandler(FLAGS.log, maxBytes=1024 * 1024 * 100, backupCount=20)",
                "@@ -294,18 +239,2 @@ app = Classifier(__name__)",
                "-def get_remote_file(url, success=200, timeout=10):",
                "-    \"\"\"",
                "-        Given HTTP URL, this api gets the content of it",
                "-        returns (Content-Type, image_content)",
                "-    \"\"\"",
                "-    try:",
                "-        app.logger.info(\"GET: %s\" % url)",
                "-        auth = None",
                "-        res = requests.get(url, stream=True, timeout=timeout, auth=auth)",
                "-        if res.status_code == success:",
                "-            return res.headers.get('Content-Type', 'application/octet-stream'), res.raw.data",
                "-    except:",
                "-        pass",
                "-    return None, None",
                "-",
                "-",
                " @app.route(\"/\")",
                "@@ -444,9 +373,2 @@ def classify_image():",
                "-CENTER = \"center\"",
                "-INTERVAL = \"interval\"",
                "-FIXED = \"fixed\"",
                "-",
                "-ALLOWED_MODE = {CENTER, INTERVAL, FIXED}",
                "-",
                "-",
                " @app.route(\"/inception/v4/classify/video\", methods=[\"GET\", \"POST\"])",
                "@@ -475,4 +397,4 @@ def classify_video():",
                "-    mode = request.args.get(\"mode\", CENTER).lower()",
                "-    if mode not in ALLOWED_MODE:",
                "+    mode = request.args.get(\"mode\", \"center\").lower()",
                "+    if mode not in {\"center\", \"interval\", \"fixed\"}:",
                "         '''",
                "@@ -500,5 +422,5 @@ def classify_video():",
                "-    if mode == CENTER:",
                "+    if mode == \"center\":",
                "         image_data_arr = [get_center_frame(url)]",
                "-    elif mode == INTERVAL:",
                "+    elif mode == \"interval\":",
                "         image_data_arr = get_frames_interval(url, frame_interval)"
            ],
            "changed_files": [
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "b5f5403fb150f2a290fe1cfa10a6fe572b1dd50a",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508805068,
            "hunks": 1,
            "message": "Merge branch 'master' into patch-2",
            "diff": [
                "diff --cc tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "index 5bd7eb0cb,7476347d5..b3d8644d0",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/mail/MailContentHandler.java",
                "@@@ -155,6 -156,20 +158,25 @@@ class MailContentHandler implements Con",
                " +        // TIKA-2455: flag the containing type.",
                " +        if (inPart) {",
                " +            submd.set(Message.MULTIPART_SUBTYPE, part.getSubType());",
                " +            submd.set(Message.MULTIPART_BOUNDARY, part.getBoundary());",
                "++        }   ",
                "+         if (body instanceof MaximalBodyDescriptor) {",
                "+             MaximalBodyDescriptor maximalBody = (MaximalBodyDescriptor) body;",
                "+             String contentDispositionType = maximalBody.getContentDispositionType();",
                "+             if (contentDispositionType != null && !contentDispositionType.isEmpty()) {",
                "+                 StringBuilder contentDisposition = new StringBuilder( contentDispositionType );",
                "+                 Map<String, String> contentDispositionParameters = maximalBody.getContentDispositionParameters();",
                "+                 for ( Entry<String, String> param : contentDispositionParameters.entrySet() ) {",
                "+                     contentDisposition.append(\"; \")",
                "+                                       .append(param.getKey()).append(\"=\\\"\").append(param.getValue()).append('\"');",
                "+                 }",
                "+ ",
                "+                 String contentDispositionFileName = maximalBody.getContentDispositionFilename();",
                "+                 if ( contentDispositionFileName != null ) {",
                "+                     submd.set( Metadata.RESOURCE_NAME_KEY, contentDispositionFileName );",
                "+                 }",
                "+ ",
                "+                 submd.set( Metadata.CONTENT_DISPOSITION, contentDisposition.toString() );",
                "+             }",
                "          }"
            ],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "2e274143c15a400f57d80335ad5bff367aae6c9b",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511875158,
            "hunks": 0,
            "message": "Merge branch 'shrike-fix-oom-when-parsing-large-pdfs'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "f6beced5f4524515c88b09bbabfc192a383ce6de",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508268194,
            "hunks": 7,
            "message": "TIKA 2400 : Update environment of python scripts to python3",
            "diff": [
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "index 9dc13e4b6..50d1de837 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python",
                "+#!/usr/bin/env python3",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "index 97f1f2afd..32fbf6a71 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python",
                "+#!/usr/bin/env python3",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "index a542e7b9a..c075f4b7f 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python",
                "+#!/usr/bin/env python3",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "index 566b034cb..554fa8783 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python",
                "+#!/usr/bin/env python3",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "index b6644160f..cd33fc0a5 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python",
                "+#!/usr/bin/env python3",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "index 09d830c0d..c28e241d4 100755",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python",
                "+#!/usr/bin/env python3",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "index ab5baa9ff..7aefc46fe 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python",
                "+#!/usr/bin/env python3",
                " #"
            ],
            "changed_files": [
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "33bf39f374ecfeedb4776893e15e7a85000a1a56",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511875133,
            "hunks": 0,
            "message": "Merge branch 'fix-oom-when-parsing-large-pdfs' of https://github.com/shrike/tika into shrike-fix-oom-when-parsing-large-pdfs",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "0d92bc862c3c344d65d3f6c260b0f5ea4c389fc0",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508338259,
            "hunks": 6,
            "message": "Add notes on why we can't get the Numbers or Pages type just yet - need to call out to another library or decode the Document.iwa snappy stream ourselves",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java",
                "index b96cc3929..a090e845d 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java",
                "@@ -19,13 +19,2 @@ package org.apache.tika.parser.iwork.iwana;",
                "-import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;",
                "-import org.apache.commons.compress.archivers.zip.ZipFile;",
                "-import org.apache.tika.exception.TikaException;",
                "-import org.apache.tika.io.TikaInputStream;",
                "-import org.apache.tika.metadata.Metadata;",
                "-import org.apache.tika.mime.MediaType;",
                "-import org.apache.tika.parser.AbstractParser;",
                "-import org.apache.tika.parser.ParseContext;",
                "-import org.xml.sax.ContentHandler;",
                "-import org.xml.sax.SAXException;",
                "-",
                " import java.io.IOException;",
                "@@ -40,2 +29,12 @@ import java.util.zip.ZipInputStream;",
                "+import org.apache.commons.compress.archivers.zip.ZipFile;",
                "+import org.apache.tika.exception.TikaException;",
                "+import org.apache.tika.io.TikaInputStream;",
                "+import org.apache.tika.metadata.Metadata;",
                "+import org.apache.tika.mime.MediaType;",
                "+import org.apache.tika.parser.AbstractParser;",
                "+import org.apache.tika.parser.ParseContext;",
                "+import org.xml.sax.ContentHandler;",
                "+import org.xml.sax.SAXException;",
                "+",
                " public class IWork13PackageParser extends AbstractParser {",
                "@@ -66,2 +65,4 @@ public class IWork13PackageParser extends AbstractParser {",
                "            }",
                "+           ",
                "+           // If we get here, we don't know what it is",
                "            return UNKNOWN13.getType();",
                "@@ -72,3 +73,3 @@ public class IWork13PackageParser extends AbstractParser {",
                "          */",
                "-        public static MediaType detectIfPossible(ZipEntry entry) {",
                "+        protected static MediaType detectIfPossible(ZipEntry entry) {",
                "            String name = entry.getName();",
                "@@ -76,2 +77,3 @@ public class IWork13PackageParser extends AbstractParser {",
                "+           // Is it a uniquely identifying filename?",
                "            if (name.equals(\"Index/MasterSlide.iwa\") ||",
                "@@ -84,3 +86,9 @@ public class IWork13PackageParser extends AbstractParser {",
                "            }",
                "-           //TODO: figure out how to distinguish numbers from pages",
                "+           ",
                "+           // Is it the main document?",
                "+           if (name.equals(\"Index/Document.iwa\")) {",
                "+              // TODO Decode the snappy stream, and check for the Message Type",
                "+              // =     2 (TN::SheetArchive), it is a numbers file; ",
                "+              // = 10000 (TP::DocumentArchive), that's a pages file",
                "+           }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "d72ae53d2e1c767c1e5c6d150bb87b33829d10f0",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516893504,
            "hunks": 10,
            "message": "Resync with http://www.apache.org/dev/svn-eol-style.txt , adding new plain-text extensions from there",
            "diff": [
                "diff --git a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "index e35c13305..e3e61db59 100644",
                "--- a/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "+++ b/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml",
                "@@ -4331,2 +4331,3 @@",
                "     <glob pattern=\"*.xhtml\"/>",
                "+    <glob pattern=\"*.xhtml2\"/>",
                "     <glob pattern=\"*.xht\"/>",
                "@@ -5997,2 +5998,4 @@",
                "     <glob pattern=\"KEYS\"/>",
                "+    <glob pattern=\"LICENSE\"/>",
                "+    <glob pattern=\"NOTICE\"/>",
                "     <glob pattern=\"README\"/>",
                "@@ -6003,3 +6006,6 @@",
                "     <glob pattern=\"*.am\"/>",
                "+    <glob pattern=\"*.apt\"/>",
                "+    <glob pattern=\"*.bsh\"/>",
                "     <glob pattern=\"*.classpath\"/>",
                "+    <glob pattern=\"*.cnd\"/>",
                "     <glob pattern=\"*.cwiki\"/>",
                "@@ -6007,2 +6013,4 @@",
                "     <glob pattern=\"*.dcl\"/>",
                "+    <glob pattern=\"*.dsp\"/>",
                "+    <glob pattern=\"*.dsw\"/>",
                "     <glob pattern=\"*.egrm\"/>",
                "@@ -6015,2 +6023,4 @@",
                "     <glob pattern=\".htaccess\"/>",
                "+    <glob pattern=\"*.handlers\"/>",
                "+    <glob pattern=\"*.htc\"/>",
                "     <glob pattern=\"*.ihtml\"/>",
                "@@ -6024,2 +6034,3 @@",
                "     <glob pattern=\"*.meta\"/>",
                "+    <glob pattern=\"*.mdo\"/>",
                "     <glob pattern=\"*.n3\"/>",
                "@@ -6032,2 +6043,3 @@",
                "     <glob pattern=\"*.roles\"/>",
                "+    <glob pattern=\"*.schemas\"/>",
                "     <glob pattern=\"*.tld\"/>",
                "@@ -6047,2 +6059,3 @@",
                "     <glob pattern=\"*.xsp\"/>",
                "+    <glob pattern=\"*.xtest\"/>",
                "     <glob pattern=\"*.xweb\"/>",
                "@@ -6088,2 +6101,3 @@",
                "     <glob pattern=\"*.roff\"/>",
                "+    <glob pattern=\"*.nroff\"/>",
                "     <glob pattern=\"*.man\"/>"
            ],
            "changed_files": [
                "tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "d8caba1b7b22fe52bca747ea40d3cb8cb73d89ed",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1509834399,
            "hunks": 26,
            "message": "TIKA 2400 : finalize dockerfiles + scripts",
            "diff": [
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "index 49af80fcf..9de5d83bd 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "@@ -17,3 +17,3 @@",
                "-FROM uscdatascience/inception-rest-tika",
                "+FROM uscdatascience/tf-tika-base",
                " MAINTAINER Apache Tika Team",
                "@@ -23,16 +23,11 @@ WORKDIR /usr/share/apache-tika/models/dl/image/caption/",
                "-RUN \\",
                "+RUN echo \"We're downloading the checkpoint file for image captioning, the shell might look unresponsive. Please be patient.\"  && \\",
                "     # To get rid of early EOF error",
                "     git config --global http.postBuffer 1048576000 && \\",
                "-    echo \"We're downloading the checkpoint file for image captioning, the shell might look unresponsive. Please be patient.\"  && \\",
                "-    git clone -b models https://github.com/USCDataScience/img2text.git && \\",
                "+    git clone https://github.com/USCDataScience/img2text.git && \\",
                "     # Join the parts",
                "     cat img2text/models/1M_iters_ckpt_parts_a* >1M_iters_ckpt.tar.gz && \\",
                "-    tar -xzvf 1M_iters_ckpt.tar.gz && \\",
                "-    # Delete all files except 1M_iters_ckpt",
                "-    rm -rf {1M_iters_ckpt.tar.gz,img2text}",
                "+    tar -xzvf 1M_iters_ckpt.tar.gz && rm -rf 1M_iters_ckpt.tar.gz",
                "-RUN \\",
                "-    wget https://raw.githubusercontent.com/apache/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_info.xml \\",
                "-        -O model_info.xml",
                "+RUN curl -O https://raw.githubusercontent.com/apache/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_info.xml",
                "@@ -41,15 +36,6 @@ WORKDIR /usr/share/apache-tika/src/dl/image/caption/",
                "-RUN \\",
                "-    wget https://raw.githubusercontent.com/apache/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py \\",
                "-        -O caption_generator.py && \\",
                "-",
                "-    wget https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py \\",
                "-        -O im2txtapi.py && \\",
                "-",
                "-    wget https://raw.githubusercontent.com/apache/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py \\",
                "-        -O model_wrapper.py && \\",
                "-",
                "-    wget https://raw.githubusercontent.com/apache/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py \\",
                "-        -O vocabulary.py && \\",
                "-",
                "+RUN curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py && \\",
                "+    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py && \\",
                "+    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py && \\",
                "+    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py && \\",
                "     chmod +x im2txtapi.py",
                "@@ -58,2 +44,11 @@ WORKDIR /",
                "+# Remove unnecessary packages comes with base",
                "+RUN apt-get -y remove \\",
                "+        apt-utils \\",
                "+        curl \\",
                "+        git \\",
                "+        software-properties-common \\",
                "+        unzip \\",
                "+        wget",
                "+",
                " # Add symbolic link to im2txtapi.py",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "index 50d1de837..9dc13e4b6 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "index 32fbf6a71..97f1f2afd 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "index c075f4b7f..a542e7b9a 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "index 554fa8783..566b034cb 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile",
                "new file mode 100644",
                "index 000000000..b2cc4114e",
                "--- /dev/null",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile",
                "@@ -0,0 +1,50 @@",
                "+#",
                "+# Licensed to the Apache Software Foundation (ASF) under one or more",
                "+# contributor license agreements.  See the NOTICE file distributed with",
                "+# this work for additional information regarding copyright ownership.",
                "+# The ASF licenses this file to You under the Apache License, Version 2.0",
                "+# (the \"License\"); you may not use this file except in compliance with",
                "+# the License.  You may obtain a copy of the License at",
                "+#",
                "+#     http://www.apache.org/licenses/LICENSE-2.0",
                "+#",
                "+# Unless required by applicable law or agreed to in writing, software",
                "+# distributed under the License is distributed on an \"AS IS\" BASIS,",
                "+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",
                "+# See the License for the specific language governing permissions and",
                "+# limitations under the License.",
                "+#",
                "+",
                "+FROM ubuntu:16.04",
                "+MAINTAINER Apache Tika Team",
                "+",
                "+RUN apt-get update && apt-get install -y --no-install-recommends \\",
                "+        apt-utils \\",
                "+        curl \\",
                "+        git \\",
                "+        python \\",
                "+        python2.7-dev \\",
                "+        software-properties-common \\",
                "+        unzip \\",
                "+        wget \\",
                "+        && \\",
                "+    apt-get clean && \\",
                "+    rm -rf /var/lib/apt/lists/*",
                "+",
                "+# Install pip",
                "+RUN curl -O https://bootstrap.pypa.io/get-pip.py && \\",
                "+    python get-pip.py && \\",
                "+    rm get-pip.py",
                "+",
                "+# Install basic python requirements",
                "+RUN pip --no-cache-dir install \\",
                "+        flask \\",
                "+        numpy \\",
                "+        pillow \\",
                "+        requests",
                "+",
                "+# Install tensorflow:1.3.0 for python 2.7",
                "+ENV TF_BINARY_URL https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.4.0-cp27-none-linux_x86_64.whl",
                "+RUN pip --no-cache-dir install $TF_BINARY_URL",
                "+",
                "+CMD [\"python\"]",
                "\\ No newline at end of file",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile",
                "index 61a9f9917..355c262be 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile",
                "@@ -17,37 +17,37 @@",
                "-FROM ubuntu:16.04",
                "+FROM uscdatascience/tf-tika-base",
                " MAINTAINER Apache Tika Team",
                "-# Install missing part of ubuntu core + python stuff",
                "-RUN apt-get update && \\",
                "-    apt-get install -y python-pip python-dev wget libtcmalloc-minimal4 git unzip",
                "+# Download the pretrained inception v4 checkpoint & other meta files",
                "+WORKDIR /usr/share/apache-tika/models/dl/image-video/recognition/",
                "-# Install tensorflow and other dependencies",
                "-RUN \\",
                "-  pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.0.1-cp27-none-linux_x86_64.whl && \\",
                "-  pip install flask requests pillow numpy",
                "+RUN curl -O http://download.tensorflow.org/models/inception_v4_2016_09_09.tar.gz && \\",
                "+    tar -xzvf inception_v4_2016_09_09.tar.gz && rm -rf inception_v4_2016_09_09.tar.gz && \\",
                "+    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_lsvrc_2015_synsets.txt && \\",
                "+    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_metadata.txt",
                "-# Get the TF-slim dependencies ",
                "-# Downloading from a specific commit for future compatibility",
                "-RUN wget https://github.com/tensorflow/models/archive/c15fada28113eca32dc98d6e3bec4755d0d5b4c2.zip && \\",
                "-\tunzip c15fada28113eca32dc98d6e3bec4755d0d5b4c2.zip ",
                "+# Download server related source files",
                "+WORKDIR /usr/share/apache-tika/src/dl/image-video/recognition/",
                "-RUN \\",
                "-  wget https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py -O /usr/bin/inceptionapi.py && \\",
                "-  chmod +x /usr/bin/inceptionapi.py",
                "+RUN curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py && \\",
                "+    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py && \\",
                "+    chmod +x inceptionapi.py",
                "-# clean up cache, so we can publish smaller image to hub",
                "-RUN apt-get clean",
                "+WORKDIR /",
                "-# Set environment variables",
                "-ENV PYTHONPATH=\"$PYTHONPATH:/models-c15fada28113eca32dc98d6e3bec4755d0d5b4c2/slim\"",
                "-ENV LD_PRELOAD=\"/usr/lib/libtcmalloc_minimal.so.4\"",
                "-ENV PYTHONPATH=\"$PYTHONPATH:$PATH\"",
                "+# Remove unnecessary packages comes with base",
                "+RUN apt-get -y remove \\",
                "+        apt-utils \\",
                "+        curl \\",
                "+        git \\",
                "+        software-properties-common \\",
                "+        unzip \\",
                "+        wget",
                "-# To cache the trained model",
                "-RUN python -c \"import inceptionapi\"",
                "+# Add symbolic link to inceptionapi.py",
                "+RUN ln -s /usr/share/apache-tika/src/dl/image-video/recognition/inceptionapi.py /usr/bin/inceptionapi",
                "-# expose API port, this is the default port",
                "+# Expose API port, this is the default port",
                " EXPOSE 8764",
                "-CMD inceptionapi.py",
                "+CMD inceptionapi",
                "\\ No newline at end of file",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile",
                "index b24143923..367045141 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile",
                "@@ -17,13 +17,17 @@",
                "-FROM uscdatascience/inception-rest-tika",
                "+FROM uscdatascience/tf-tika-base",
                " MAINTAINER Apache Tika Team",
                "-# Install missing part of ubuntu core + python + building dependencies",
                "-RUN apt-get update && \\",
                "-      apt-get install -y software-properties-common apt-utils \\",
                "-      build-essential cmake pkg-config \\",
                "-      libjpeg8-dev libtiff5-dev libjasper-dev libpng12-dev \\",
                "-      libavcodec-dev libavformat-dev libswscale-dev libv4l-dev \\",
                "-      libxvidcore-dev libx264-dev libgtk2.0-dev libatlas-base-dev gfortran \\",
                "-      ffmpeg",
                "+RUN apt-get update && apt-get install -y --no-install-recommends \\",
                "+      build-essential \\",
                "+      cmake \\",
                "+      libavcodec-dev \\",
                "+      libavformat-dev \\",
                "+      libswscale-dev \\",
                "+      libv4l-dev \\",
                "+      libavutil-dev \\",
                "+      pkg-config \\",
                "+      && \\",
                "+    apt-get clean && \\",
                "+    rm -rf /var/lib/apt/lists/*",
                "@@ -31,6 +35,7 @@ RUN apt-get update && \\",
                " WORKDIR /usr/local/src",
                "+",
                " RUN \\",
                "-      wget -O opencv.zip https://github.com/Itseez/opencv/archive/3.2.0.zip && \\",
                "+      wget -O opencv.zip https://github.com/opencv/opencv/archive/3.2.0.zip && \\",
                "       unzip opencv.zip && \\",
                "-      wget -O opencv_contrib.zip https://github.com/Itseez/opencv_contrib/archive/3.2.0.zip && \\",
                "+      wget -O opencv_contrib.zip https://github.com/opencv/opencv_contrib/archive/3.2.0.zip && \\",
                "       unzip opencv_contrib.zip",
                "@@ -42,31 +47,62 @@ RUN cmake -D CMAKE_BUILD_TYPE=RELEASE \\",
                "       -D CMAKE_INSTALL_PREFIX=/usr/local \\",
                "-      -D INSTALL_PYTHON_EXAMPLES=ON \\",
                "-      -D INSTALL_C_EXAMPLES=OFF \\",
                "       -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.2.0/modules \\",
                "-      -D BUILD_EXAMPLES=ON ..",
                "-RUN make -j4",
                "-RUN make install",
                "+      -D BUILD_PYTHON_SUPPORT=ON \\",
                "+      -D BUILD_EXAMPLES=OFF \\",
                "+      -D PYTHON_DEFAULT_EXECUTABLE=/usr/bin/python3 \\",
                "+      -D BUILD_opencv_python3=OFF \\",
                "+      -D BUILD_opencv_python2=ON \\",
                "+      -D WITH_IPP=OFF \\",
                "+      -D WITH_FFMPEG=ON \\",
                "+      -D WITH_V4L=ON ..",
                "+",
                "+RUN make -j$(nproc) && make install",
                "+",
                "+# Download the pretrained inception v4 checkpoint & other meta files",
                "+WORKDIR /usr/share/apache-tika/models/dl/image-video/recognition/",
                "+",
                "+RUN curl -O http://download.tensorflow.org/models/inception_v4_2016_09_09.tar.gz && \\",
                "+    tar -xzvf inception_v4_2016_09_09.tar.gz && rm -rf inception_v4_2016_09_09.tar.gz && \\",
                "+    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_lsvrc_2015_synsets.txt && \\",
                "+    curl -O https://raw.githubusercontent.com/tensorflow/models/master/research/inception/inception/data/imagenet_metadata.txt",
                "+",
                "+# Download server related source files",
                "+WORKDIR /usr/share/apache-tika/src/dl/image-video/recognition/",
                "+",
                "+RUN curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py && \\",
                "+    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py && \\",
                "+    curl -O https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py && \\",
                "+    chmod +x inceptionapi.py",
                " WORKDIR /",
                "-RUN \\",
                "-  wget https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py -O /usr/bin/inceptionapi.py && \\",
                "-  wget https://raw.githubusercontent.com/ThejanW/tika/master/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py -O /usr/bin/video_util.py && \\",
                "-  chmod +x /usr/bin/inceptionapi.py && \\",
                "-  chmod +x /usr/bin/video_util.py",
                "-# Clean up cache + delete OpenCV source files, so we can publish smaller image to hub",
                "-RUN apt-get clean",
                "-RUN rm -rf /usr/local/src",
                "+# Remove unnecessary packages comes with base",
                "+RUN apt-get -y remove \\",
                "+        apt-utils \\",
                "+        curl \\",
                "+        git \\",
                "+        software-properties-common \\",
                "+        unzip \\",
                "+        wget",
                "-# Set environment variables",
                "-ENV PYTHONPATH=\"$PYTHONPATH:/models-c15fada28113eca32dc98d6e3bec4755d0d5b4c2/slim\"",
                "-ENV LD_PRELOAD=\"/usr/lib/libtcmalloc_minimal.so.4\"",
                "-ENV PYTHONPATH=\"$PYTHONPATH:$PATH\"",
                "+# Remove unnecessary packages",
                "+RUN apt-get -y remove \\",
                "+      apt-utils \\",
                "+      build-essential \\",
                "+      cmake \\",
                "+      libavcodec-dev \\",
                "+      libavformat-dev \\",
                "+      libswscale-dev \\",
                "+      libv4l-dev \\",
                "+      libavutil-dev \\",
                "+      pkg-config",
                "+",
                "+# Delete OpenCV source files",
                "+RUN rm -rf /usr/local/src",
                "-# To cache the trained model",
                "-RUN python -c \"import inceptionapi\"",
                "+# Add symbolic link to inceptionapi.py",
                "+RUN ln -s /usr/share/apache-tika/src/dl/image-video/recognition/inceptionapi.py /usr/bin/inceptionapi",
                "-# expose API port, this is the default port",
                "+# Expose API port, this is the default port",
                " EXPOSE 8764",
                "-CMD inceptionapi.py",
                "+CMD inceptionapi",
                "\\ No newline at end of file",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "index cd33fc0a5..b6644160f 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "index c28e241d4..09d830c0d 100755",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "index 3386862d9..a4c208bf9 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py",
                "@@ -1,2 +1,2 @@",
                "-#!/usr/bin/env python3",
                "+#!/usr/bin/env python",
                " #  Licensed to the Apache Software Foundation (ASF) under one"
            ],
            "changed_files": [
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/Im2txtRestDockerfile",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/caption_generator.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/im2txtapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/model_wrapper.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/captioning/tf/vocabulary.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/BaseTFDockerfile",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionRestDockerfile",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/InceptionVideoRestDockerfile",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inception_v4.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/inceptionapi.py",
                "tika-parsers/src/main/resources/org/apache/tika/parser/recognition/tf/video_util.py"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "ac9f24e261e18afe0b43b577aafa59313552d386",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1512416714,
            "hunks": 0,
            "message": "Merge remote-tracking branch 'origin/master'",
            "diff": [],
            "changed_files": [],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "fb93ab1d8ffd19cdc638f1599c672cc8d5a089c1",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1511861739,
            "hunks": 14,
            "message": "Fix OOM when parsing very large PDFs Expose a maxMainMemoryBytes property in the PDFParserConfig which the PDFParser uses to construct a MemoryUsageSetting and pass that to PDDocument.load",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java",
                "index 4f305b540..303d8e67a 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java",
                "@@ -41,2 +41,3 @@ import org.apache.pdfbox.cos.COSName;",
                " import org.apache.pdfbox.cos.COSString;",
                "+import org.apache.pdfbox.io.MemoryUsageSetting;",
                " import org.apache.pdfbox.pdmodel.PDDocument;",
                "@@ -138,13 +139,13 @@ public class PDFParser extends AbstractParser implements Initializable {",
                "         try {",
                "-            // PDFBox can process entirely in memory, or can use a temp file",
                "-            //  for unpacked / processed resources",
                "-            // Decide which to do based on if we're reading from a file or not already",
                "-            //TODO: make this configurable via MemoryUsageSetting",
                "             TikaInputStream tstream = TikaInputStream.cast(stream);",
                "             password = getPassword(metadata, context);",
                "+            MemoryUsageSetting memoryUsageSetting = MemoryUsageSetting.setupMainMemoryOnly();",
                "+            if (localConfig.getMaxMainMemoryBytes() >= 0) {",
                "+                memoryUsageSetting = MemoryUsageSetting.setupMixed(localConfig.getMaxMainMemoryBytes());",
                "+            }",
                "             if (tstream != null && tstream.hasFile()) {",
                "                 // File based -- send file directly to PDFBox",
                "-                pdfDocument = PDDocument.load(tstream.getPath().toFile(), password);",
                "+                pdfDocument = PDDocument.load(tstream.getPath().toFile(), password, memoryUsageSetting);",
                "             } else {",
                "-                pdfDocument = PDDocument.load(new CloseShieldInputStream(stream), password);",
                "+                pdfDocument = PDDocument.load(new CloseShieldInputStream(stream), password, memoryUsageSetting);",
                "             }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java b/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java",
                "index ef1d66763..5fc9a7b7d 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java",
                "@@ -137,2 +137,4 @@ public class PDFParserConfig implements Serializable {",
                "+    private long maxMainMemoryBytes = -1;",
                "+",
                "     public PDFParserConfig() {",
                "@@ -226,2 +228,4 @@ public class PDFParserConfig implements Serializable {",
                "         }",
                "+",
                "+        maxMainMemoryBytes = getIntProp(props.getProperty(\"maxMainMemoryBytes\"), -1);",
                "     }",
                "@@ -541,2 +545,12 @@ public class PDFParserConfig implements Serializable {",
                "+    //throws NumberFormatException if there's a non-null unparseable",
                "+    //string passed in",
                "+    private long getLongProp(String p, long defaultMissing) {",
                "+        if (p == null) {",
                "+            return defaultMissing;",
                "+        }",
                "+",
                "+        return Long.parseLong(p);",
                "+    }",
                "+",
                "     //throws NumberFormatException if there's a non-null unparseable",
                "@@ -662,2 +676,16 @@ public class PDFParserConfig implements Serializable {",
                "+",
                "+    /**",
                "+     * The maximum amount of memory to use when loading a pdf into a PDDocument. Additional buffering is done using a",
                "+     * temp file.",
                "+     * @return",
                "+     */",
                "+    public long getMaxMainMemoryBytes() {",
                "+        return maxMainMemoryBytes;",
                "+    }",
                "+",
                "+    public void setMaxMainMemoryBytes(int maxMainMemoryBytes) {",
                "+        this.maxMainMemoryBytes = maxMainMemoryBytes;",
                "+    }",
                "+",
                "     private ImageType parseImageType(String ocrImageType) {",
                "@@ -706,4 +734,4 @@ public class PDFParserConfig implements Serializable {",
                "         if (getExtractActions() != config.getExtractActions()) return false;",
                "-        return getAccessChecker().equals(config.getAccessChecker());",
                "-",
                "+        if (!getAccessChecker().equals(config.getAccessChecker())) return false;",
                "+        return getMaxMainMemoryBytes() == config.getMaxMainMemoryBytes();",
                "     }",
                "@@ -730,2 +758,3 @@ public class PDFParserConfig implements Serializable {",
                "         result = 31 * result + (getExtractActions() ? 1 : 0);",
                "+        result = 31 * result + Long.valueOf(getMaxMainMemoryBytes()).hashCode();",
                "         return result;",
                "@@ -754,2 +783,3 @@ public class PDFParserConfig implements Serializable {",
                "                 \", catchIntermediateIOExceptions=\" + catchIntermediateIOExceptions +",
                "+                \", maxMainMemoryBytes=\" + maxMainMemoryBytes +",
                "                 '}';",
                "diff --git a/tika-parsers/src/main/resources/org/apache/tika/parser/pdf/PDFParser.properties b/tika-parsers/src/main/resources/org/apache/tika/parser/pdf/PDFParser.properties",
                "index e39a08a22..88b1623f2 100644",
                "--- a/tika-parsers/src/main/resources/org/apache/tika/parser/pdf/PDFParser.properties",
                "+++ b/tika-parsers/src/main/resources/org/apache/tika/parser/pdf/PDFParser.properties",
                "@@ -36,2 +36,4 @@ ocrImageType gray",
                " #scale to use when rendering a page image for OCR",
                "-ocrImageScale 2.0",
                "\\ No newline at end of file",
                "+ocrImageScale 2.0",
                "+# Use up to 500MB when loading a pdf into a PDDocument",
                "+maxMainMemoryBytes 524288000"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParserConfig.java",
                "tika-parsers/src/main/resources/org/apache/tika/parser/pdf/PDFParser.properties"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "5c7547bac9208082920859a5040a8b9fa31da642",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1508335175,
            "hunks": 6,
            "message": "Have the iWorks 13 parser set the content type on the metadata if possible, otherwise remains no-op",
            "diff": [
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java b/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java",
                "index 637b51b2f..b96cc3929 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java",
                "@@ -22,2 +22,3 @@ import org.apache.commons.compress.archivers.zip.ZipFile;",
                " import org.apache.tika.exception.TikaException;",
                "+import org.apache.tika.io.TikaInputStream;",
                " import org.apache.tika.metadata.Metadata;",
                "@@ -33,4 +34,7 @@ import java.util.Arrays;",
                " import java.util.Collections;",
                "+import java.util.Enumeration;",
                " import java.util.HashSet;",
                " import java.util.Set;",
                "+import java.util.zip.ZipEntry;",
                "+import java.util.zip.ZipInputStream;",
                "@@ -55,9 +59,31 @@ public class IWork13PackageParser extends AbstractParser {",
                "         public static MediaType detect(ZipFile zipFile) {",
                "-            ZipArchiveEntry entry = zipFile.getEntry(\"Index/MasterSlide.iwa\");",
                "-            if (zipFile.getEntry(\"Index/MasterSlide.iwa\") != null ||",
                "-                    zipFile.getEntry(\"Index/Slide.iwa\") != null) {",
                "-                return KEYNOTE13.getType();",
                "-            }",
                "-            //TODO: figure out how to distinguish numbers from pages",
                "-            return UNKNOWN13.getType();",
                "+           MediaType type = null;",
                "+           Enumeration<? extends ZipEntry> entries = zipFile.getEntries();",
                "+           while (entries.hasMoreElements()) {",
                "+              ZipEntry entry = entries.nextElement();",
                "+              type = IWork13DocumentType.detectIfPossible(entry);",
                "+              if (type != null) return type;",
                "+           }",
                "+           return UNKNOWN13.getType();",
                "+        }",
                "+        ",
                "+        /**",
                "+         * @return Specific type if this identifies one, otherwise null",
                "+         */",
                "+        public static MediaType detectIfPossible(ZipEntry entry) {",
                "+           String name = entry.getName();",
                "+           if (! name.endsWith(\".iwa\")) return null;",
                "+",
                "+           if (name.equals(\"Index/MasterSlide.iwa\") ||",
                "+               name.startsWith(\"Index/MasterSlide-\")) {",
                "+              return KEYNOTE13.getType();",
                "+           }",
                "+           if (name.equals(\"Index/Slide.iwa\") ||",
                "+               name.startsWith(\"Index/Slide-\")) {",
                "+              return KEYNOTE13.getType();",
                "+           }",
                "+           //TODO: figure out how to distinguish numbers from pages",
                "+",
                "+           // Unknown",
                "+           return null;",
                "         }",
                "@@ -83,3 +109,42 @@ public class IWork13PackageParser extends AbstractParser {",
                "     public void parse(InputStream stream, ContentHandler handler, Metadata metadata, ParseContext context) throws IOException, SAXException, TikaException {",
                "-        //no-op for now",
                "+       // Open the Zip stream",
                "+       // Use a File if we can, and an already open zip is even better",
                "+       ZipFile zipFile = null;",
                "+       ZipInputStream zipStream = null;",
                "+       if (stream instanceof TikaInputStream) {",
                "+          TikaInputStream tis = (TikaInputStream) stream;",
                "+          Object container = ((TikaInputStream) stream).getOpenContainer();",
                "+          if (container instanceof ZipFile) {",
                "+             zipFile = (ZipFile) container;",
                "+          } else if (tis.hasFile()) {",
                "+             zipFile = new ZipFile(tis.getFile());",
                "+          } else {",
                "+             zipStream = new ZipInputStream(stream);",
                "+          }",
                "+       } else {",
                "+          zipStream = new ZipInputStream(stream);",
                "+       }",
                "+",
                "+       // For now, just detect",
                "+       MediaType type = null;",
                "+       if (zipFile != null) {",
                "+          Enumeration<? extends ZipEntry> entries = zipFile.getEntries();",
                "+          while (entries.hasMoreElements()) {",
                "+             ZipEntry entry = entries.nextElement();",
                "+             if (type == null) {",
                "+                type = IWork13DocumentType.detectIfPossible(entry);",
                "+             }",
                "+          }",
                "+       } else {",
                "+          ZipEntry entry = zipStream.getNextEntry();",
                "+          while (entry != null) {",
                "+             if (type == null) {",
                "+                type = IWork13DocumentType.detectIfPossible(entry);",
                "+             }",
                "+             entry = zipStream.getNextEntry();",
                "+          }",
                "+       }",
                "+       if (type != null) {",
                "+          metadata.add(Metadata.CONTENT_TYPE, type.toString());",
                "+       }",
                "     }",
                "diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java",
                "index 3f9211b76..9a5befa7f 100644",
                "--- a/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java",
                "+++ b/tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java",
                "@@ -294,3 +294,2 @@ public class ZipContainerDetector implements Detector {",
                "         return null;",
                "-",
                "     }"
            ],
            "changed_files": [
                "tika-parsers/src/main/java/org/apache/tika/parser/iwork/iwana/IWork13PackageParser.java",
                "tika-parsers/src/main/java/org/apache/tika/parser/pkg/ZipContainerDetector.java"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "1.17",
                "1.18",
                "1.18-rc1",
                "1.18-rc2",
                "1.19",
                "1.19.1",
                "1.19.1-rc1",
                "1.20",
                "1.21",
                "1.22",
                "1.23",
                "1.23-rc1",
                "1.24",
                "1.24.1",
                "1.25",
                "1.26",
                "1.27",
                "1.28",
                "1.28-rc2",
                "1.28-rc3",
                "1.28.1",
                "1.28.1-rc1",
                "1.28.2",
                "1.28.3",
                "1.28.3-rc1",
                "1.28.4",
                "1.28.5",
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-1.28.2-rc1",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        },
        {
            "commit_id": "3ce43adda504955b5cc0c793bc7bee8decba86d8",
            "repository": "https://github.com/apache/tika",
            "timestamp": 1516804134,
            "hunks": 4,
            "message": "clean up test dependencies in tika-nlp",
            "diff": [
                "diff --git a/tika-nlp/pom.xml b/tika-nlp/pom.xml",
                "index e8552cec8..d68053c5f 100644",
                "--- a/tika-nlp/pom.xml",
                "+++ b/tika-nlp/pom.xml",
                "@@ -35,6 +35,3 @@",
                "   <url>http://maven.apache.org</url>",
                "-",
                "-  <properties>",
                "-    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>",
                "-  </properties>",
                "+  ",
                "@@ -47,16 +44,2 @@",
                "     </dependency>",
                "-    <dependency>",
                "-      <groupId>junit</groupId>",
                "-      <artifactId>junit</artifactId>",
                "-      <scope>test</scope>",
                "-    </dependency>",
                "-",
                "-    <dependency>",
                "-      <groupId>${project.groupId}</groupId>",
                "-      <artifactId>tika-core</artifactId>",
                "-      <version>${project.version}</version>",
                "-      <type>test-jar</type>",
                "-      <scope>test</scope>",
                "-    </dependency>    ",
                "-",
                "     <!-- AgePredictor client for Tika -->",
                "@@ -70,4 +53,7 @@",
                "     <dependency>",
                "-      <groupId>junit</groupId>",
                "-      <artifactId>junit</artifactId>",
                "+      <groupId>${project.groupId}</groupId>",
                "+      <artifactId>tika-core</artifactId>",
                "+      <version>${project.version}</version>",
                "+      <type>test-jar</type>",
                "+      <scope>test</scope>",
                "     </dependency>",
                "@@ -84,3 +70,7 @@",
                "     </dependency>",
                "-        ",
                "+    <dependency>",
                "+      <groupId>junit</groupId>",
                "+      <artifactId>junit</artifactId>",
                "+      <scope>test</scope>",
                "+    </dependency>",
                "   </dependencies>"
            ],
            "changed_files": [
                "tika-nlp/pom.xml"
            ],
            "message_reference_content": [],
            "jira_refs": {},
            "ghissue_refs": {},
            "cve_refs": [],
            "twins": [],
            "tags": [
                "2.0.0",
                "2.0.0-ALPHA",
                "2.0.0-ALPHA-rc1",
                "2.0.0-BETA",
                "2.1.0",
                "2.1.0-rc2",
                "2.2.0",
                "2.2.1",
                "2.2.1-rc1",
                "2.2.1-rc2",
                "2.2.1-rc3",
                "2.3.0",
                "2.3.0-rc1",
                "2.4.0",
                "2.4.0-rc1",
                "2.4.1",
                "2.5.0",
                "2.6.0",
                "2.7.0",
                "2.8.0",
                "2.9.0",
                "2.9.1",
                "2.9.2",
                "3.0.0-BETA",
                "tika-2.1.0-rc1"
            ],
            "matched_rules": []
        }
    ]
}
